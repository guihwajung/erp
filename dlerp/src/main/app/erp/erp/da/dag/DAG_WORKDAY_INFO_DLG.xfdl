<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.0">
  <Form id="form" width="601" height="630" maxwidth="635" maxheight="680" titletext="개인별실적등록" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="staTITLE" taborder="0" text="사용자 정보" left="0" top="10" width="100.00%" height="30" cssclass="sta_TITLE_Bg" textAlign="left"/>
        <Static id="sta04" taborder="2" left="134" top="47" width="466" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Static id="sta05" taborder="1" text="근무일자" left="0" top="47" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Edit id="txtDT_NAME" taborder="3" left="139" top="52" width="457" height="20" readonly="true"/>
        <Static id="sta02" taborder="4" left="424" top="76" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Edit id="txtDS_POSITION" taborder="5" left="429" top="81" width="167" height="20" readonly="true"/>
        <Static id="sta03" taborder="6" text="직위" left="309" top="76" width="116" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta06" taborder="7" left="134" top="76" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Edit id="txtDS_HNAME" taborder="8" left="139" top="81" width="167" height="20" readonly="true"/>
        <Static id="sta07" taborder="9" text="성명" left="0" top="76" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta10" taborder="10" left="134" top="105" width="466" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Edit id="txtDS_ORG" taborder="11" left="139" top="110" width="457" height="20" readonly="true"/>
        <Static id="sta11" taborder="12" text="소속" left="0" top="105" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta00" taborder="13" left="424" top="206" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Edit id="txtTM_END" taborder="14" left="429" top="211" width="167" height="20" readonly="true"/>
        <Static id="sta01" taborder="15" text="퇴근시간" left="309" top="206" width="116" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta08" taborder="17" left="134" top="206" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Static id="sta09" taborder="18" text="출근시간" left="0" top="206" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta12" taborder="19" left="134" top="177" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Edit id="txtDS_WORK" taborder="20" left="139" top="182" width="167" height="20" readonly="true"/>
        <Static id="sta13" taborder="21" text="근무구분" left="0" top="177" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="staTITLE00" taborder="22" text="근무정보" left="0" top="140" width="100.00%" height="30" cssclass="sta_TITLE_Bg" textAlign="left"/>
        <Static id="sta14" taborder="24" left="424" top="177" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Static id="sta15" taborder="25" text="결재구분" left="309" top="177" width="116" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Edit id="txtDS_APPROVAL" taborder="23" left="429" top="182" width="167" height="20" readonly="true"/>
        <Edit id="txtTM_START" taborder="16" left="139" top="211" width="167" height="20" readonly="true"/>
        <Static id="sta16" taborder="26" left="424" top="235" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Static id="sta17" taborder="28" text="소정근로종료시간" left="309" top="235" width="116" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta18" taborder="29" left="134" top="235" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Static id="sta19" taborder="30" text="소정근로시작시간" left="0" top="235" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta20" taborder="31" left="424" top="264" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Edit id="txtTM_EWORK" taborder="32" left="429" top="240" width="167" height="20" readonly="true"/>
        <Static id="sta21" taborder="33" text="연장근로종료시간" left="309" top="264" width="116" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta22" taborder="34" left="134" top="264" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Edit id="txtTM_SWORK" taborder="35" left="139" top="240" width="167" height="20" readonly="true"/>
        <Static id="sta23" taborder="36" text="연장근로시작시간" left="0" top="264" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta24" taborder="37" left="424" top="293" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Static id="sta25" taborder="38" text="연장근로시간합" left="309" top="293" width="116" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta26" taborder="39" left="134" top="293" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Static id="sta27" taborder="40" text="소정근로시간 합" left="0" top="293" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta28" taborder="41" left="424" top="322" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Edit id="txtTM_EOVER" taborder="42" left="429" top="269" width="167" height="20" readonly="true"/>
        <Static id="sta29" taborder="43" text="휴게시간" left="309" top="322" width="116" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Static id="sta30" taborder="44" left="134" top="322" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
        <Edit id="txtTM_SOVER" taborder="45" left="139" top="269" width="167" height="20" readonly="true"/>
        <Static id="sta31" taborder="46" text="일 근무시간 합계" left="0" top="322" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
        <Edit id="txtSUM_OVER" taborder="47" left="429" top="298" width="167" height="20" readonly="true"/>
        <Edit id="txtSUM_WORK" taborder="48" left="139" top="298" width="167" height="20" readonly="true"/>
        <Edit id="txtTM_WORK_DAY" taborder="49" left="139" top="327" width="167" height="20" readonly="true"/>
        <Button id="btnSubmit" taborder="50" text="연장근로 변경신청" left="470" top="370" width="130" height="27" onclick="btnSubmit_onclick"/>
        <Div id="divDataSubmit" taborder="51" left="0" top="412" width="600" height="208" text="">
          <Layouts>
            <Layout>
              <Static id="sta54_00" taborder="22" left="134" top="29" width="466" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
              <Static id="sta44" taborder="0" left="424" top="0" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
              <Static id="sta47" taborder="1" left="134" top="0" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
              <Static id="sta45" taborder="2" text="주간근무시간" left="309" top="0" width="116" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
              <Edit id="txtWK_WORK" taborder="3" left="429" top="5" width="167" height="20" readonly="true"/>
              <Static id="sta46" taborder="4" text="근무구분" left="0" top="0" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
              <Static id="sta58" taborder="5" left="134" top="87" width="466" height="71" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
              <Static id="sta59" taborder="6" text="연장근로시간 사유" left="0" top="87" width="135" height="71" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
              <Static id="sta54" taborder="7" left="134" top="58" width="466" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
              <Static id="sta55" taborder="8" text="대체근무일" left="6" top="168" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick" visible="false"/>
              <Static id="sta51" taborder="9" text="연장근무시작시간" left="0" top="58" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
              <Static id="sta48" taborder="10" left="424" top="58" width="176" height="30" cssclass="sta_WF_tablebg" text="" onclick="sta23_onclick"/>
              <Static id="sta49" taborder="11" text="연장근무종료시간" left="309" top="58" width="116" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
              <TextArea id="txtDS_REMARK" taborder="12" left="139" top="92" height="61" width="457"/>
              <Combo id="cboMM_EOVER" taborder="13" left="504" top="63" width="70" height="20" datacolumn="DS_CODE" codecolumn="CD_CODE" value="" text="" index="0" innerdataset="dsMM_EARLY"/>
              <Combo id="cboHH_EOVER" taborder="14" left="429" top="63" width="70" height="20" datacolumn="DS_CODE" codecolumn="CD_CODE" value="" text="" index="0" innerdataset="dsHH_EOVER"/>
              <Combo id="cboMM_SOVER" taborder="15" left="214" top="63" width="70" height="20" datacolumn="DS_CODE" codecolumn="CD_CODE" value="" text="" index="0" innerdataset="dsMM_EARLY"/>
              <Combo id="cboHH_SOVER" taborder="16" left="139" top="63" width="70" height="20" datacolumn="DS_CODE" codecolumn="CD_CODE" value="" text="" index="0" innerdataset="dsHH_SOVER"/>
              <Combo id="cboCD_CHANGE" taborder="17" left="139" top="5" width="167" height="20" datacolumn="DS_CODE" codecolumn="CD_CODE" value="" text="" index="0" innerdataset="dsCD_CHANGE"/>
              <Div id="divBtns" left="400" top="178" width="200" height="30" taborder="18">
                <Layouts>
                  <Layout>
                    <Button id="btnOK" taborder="0" text="저장" left="20" top="0" width="80" height="27" onclick="btnOK_onclick"/>
                    <Button id="btnAPP" taborder="15" text="전자결재" left="btnOK:20" top="0" width="80" height="27" onclick="divDataSubmit_divBtns_btnAPP_onclick"/>
                  </Layout>
                </Layouts>
              </Div>
              <Calendar id="tclDT_CHANGE" taborder="19" left="145" top="173" width="105" height="20" dateformat="yyyy-MM-dd" editformat="yyyyMMdd" autoselect="true" visible="false"/>
              <Static id="sta51_00" taborder="20" text="소정근무시작시간" left="0" top="29" width="135" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
              <Static id="sta49_00" taborder="21" text="소정근무종료시간" left="309" top="29" width="116" height="30" cssclass="sta_WF_tablelabel" onclick="sta05_onclick"/>
              <Combo id="cboHH_SWORK" taborder="23" left="139" top="33" width="70" height="20" datacolumn="DS_CODE" codecolumn="CD_CODE" value="" text="" index="0" innerdataset="dsHH_SWORK"/>
              <Combo id="cboMM_SWORK" taborder="24" left="214" top="33" width="70" height="20" datacolumn="DS_CODE" codecolumn="CD_CODE" value="" text="" index="0" innerdataset="dsMM_WORK"/>
              <Combo id="cboHH_EWORK" taborder="25" left="429" top="33" width="70" height="20" datacolumn="DS_CODE" codecolumn="CD_CODE" value="" text="" index="0" innerdataset="dsHH_EWORK"/>
              <Combo id="cboMM_EWORK" taborder="26" left="504" top="33" width="70" height="20" datacolumn="DS_CODE" codecolumn="CD_CODE" value="" text="" index="0" innerdataset="dsMM_WORK"/>
            </Layout>
          </Layouts>
        </Div>
        <Edit id="txtTM_BREAK" taborder="27" left="429" top="327" width="167" height="20" readonly="true"/>
        <Edit id="edtID_PERSON" taborder="52" left="32" top="372" width="140" height="20" enable="false" visible="false"/>
      </Layout>
    </Layouts>
    <Script type="xscript5.1"><![CDATA[this.objApp = this.gfnGetApplication();
this.gbSetVisible = "false";	// divDataSubmit 숨김

this.form_onload = function(obj:nexacro.Form,e:nexacro.LoadEventInfo)
{
	// -- 필수 -------------------//
	this.gfnFormOnLoad(this);	
	this.gfnFormInfo(this);		
	// ---------------------------//

	this.fnSetVariable();
	this.fnSetEvent();
	this.fnSetParameter();
	this.fnSetCombo();
	
	// 연장근로 변경신청 버튼 밑에부분 숨기고 숨긴부분만큼 화면을 줄인다(버튼클릭시 숨긴부분 보이고 화면도 늘린다)
	this.divDataSubmit.set_visible(false);
	this.getOwnerFrame().set_height(462);	
	this.set_height(462);

	// 메인창 파라미터 받기
	this.dsList.setColumn(0, "CD_CORP", this.getOwnerFrame().CD_CORP);
	this.dsList.setColumn(0, "DT_WORK", this.getOwnerFrame().DT_WORK);
	this.dsList.setColumn(0, "ID_PERSON", this.getOwnerFrame().ID_PERSON);
	this.dsList.setColumn(0, "ID_SABUN", this.getOwnerFrame().ID_SABUN);
		
	var today = this.gfnGetDate();	
	if(this.dsList.getColumn(0, "DT_WORK") < today.substr(0,8)){
		this.btnSubmit.set_enable(false);
	}else{
		this.btnSubmit.set_enable(true);
	}	
	
	this.fnSelect();	
};

/************************************************************************
 * 변수 선언  
 ************************************************************************/
this.fnSetVariable = function() {
	//this.ccfCD_CORP = this.ccfCD_CORP;

};

/************************************************************************
 * 파라미터 설정
 ************************************************************************/
this.fnSetParameter = function() {
	this.dsSelect = new Dataset();
	this.dsSelect.addColumn("CD_CORP", "string");
	this.dsSelect.addColumn("DT_WORK", "string");
	this.dsSelect.addColumn("ID_PERSON", "int");
	this.dsSelect.addColumn("ID_SABUN", "string");
	this.dsSelect.addColumn("GR_SEARCH", "string");
	this.dsSelect.addColumn("GR_CORP", "string");
	this.dsSelect.addColumn("GR_DEPT", "string");
	this.dsSelect.addColumn("ID_USER", "string");
	
	this.dsSave = new Dataset();
	this.dsSave.addColumn("ID_PERSON", "int");
	this.dsSave.addColumn("DT_WORK", "string");
	this.dsSave.addColumn("CD_CORP", "string");
	this.dsSave.addColumn("ID_SABUN", "string");
	this.dsSave.addColumn("CD_WORK", "string");
	this.dsSave.addColumn("HH_SOVER", "string");
	this.dsSave.addColumn("MM_SOVER", "string");
	this.dsSave.addColumn("HH_EOVER", "string");
	this.dsSave.addColumn("MM_EOVER", "string");
	this.dsSave.addColumn("DS_REMARK", "string");
	this.dsSave.addColumn("DT_CHANGE", "string");
	//
	this.dsSave.addColumn("HH_SWORK", "string");
	this.dsSave.addColumn("MM_SWORK", "string");
	this.dsSave.addColumn("HH_EWORK", "string");
	this.dsSave.addColumn("MM_EWORK", "string");
	//
	this.dsSave.addColumn("GR_SEARCH", "string");
	this.dsSave.addColumn("GR_CORP", "string");
	this.dsSave.addColumn("GR_DEPT", "string");
	this.dsSave.addColumn("ID_USER", "string");
}

/************************************************************************
 * 이벤트 설정
 ************************************************************************/
this.fnSetEvent = function() {
 	
	
};

 /*
  *	조회
  */
this.fnSelect = function() {
	//if (!this.fnSelectValidate()) return false;
	
	this.dsSelect.clearData();
	this.dsSelect.addRow();
	
	this.dsSelect.setColumn(0, "CD_CORP", this.dsList.getColumn(0, "CD_CORP"));
	this.dsSelect.setColumn(0, "DT_WORK", this.dsList.getColumn(0, "DT_WORK"));
	this.dsSelect.setColumn(0, "ID_PERSON", this.dsList.getColumn(0, "ID_PERSON"));
	this.dsSelect.setColumn(0, "ID_SABUN", this.dsList.getColumn(0, "ID_SABUN"));
	this.dsSelect.setColumn(0, "GR_SEARCH", this.FormInfo.GR_SEARCH);
	this.dsSelect.setColumn(0, "GR_CORP", this.AuthClient.CD_CORP);
	this.dsSelect.setColumn(0, "GR_DEPT", this.AuthClient.CD_DEPT);
	this.dsSelect.setColumn(0, "ID_USER", this.AuthClient.ID_USER);
	
	var strSvcId    = "select";
	var strSvcType  = "grid";
	var inProc		= "_dsProc";
	var inData      = "select=dsSelect";
	var outData     = "dsData=select0";
	var strArg      = "";
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
}

this.btnOK_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	// 확인
	this.dlgfnSave();
};


this.dlgfnSave = function() {
	//if (!this.fnDataValidate()) return;
	
	this.dsSave.clearData();
	var nrow = this.dsSave.addRow();
	
	this.dsSave.setColumn(nrow, "ID_PERSON", this.dsList.getColumn(0, "ID_PERSON"));
	this.dsSave.setColumn(nrow, "DT_WORK", this.dsList.getColumn(0, "DT_WORK"));
	this.dsSave.setColumn(nrow, "CD_CORP", this.dsList.getColumn(0, "CD_CORP"));
	this.dsSave.setColumn(nrow, "ID_SABUN", this.dsList.getColumn(0, "ID_SABUN"));
	this.dsSave.setColumn(nrow, "CD_WORK", this.dsData.getColumn(0, "CD_CHANGE"));
	this.dsSave.setColumn(nrow, "HH_SOVER", this.dsData.getColumn(0, "HH_SOVER"));
	this.dsSave.setColumn(nrow, "MM_SOVER", this.dsData.getColumn(0, "MM_SOVER"));
	this.dsSave.setColumn(nrow, "HH_EOVER", this.dsData.getColumn(0, "HH_EOVER"));
	this.dsSave.setColumn(nrow, "MM_EOVER", this.dsData.getColumn(0, "MM_EOVER"));
	this.dsSave.setColumn(nrow, "DS_REMARK", this.dsData.getColumn(0, "DS_REMARK"));
	this.dsSave.setColumn(nrow, "DT_CHANGE", this.dsData.getColumn(0, "DT_CHANGE").toString().substr(0,8));
	//
	this.dsSave.setColumn(nrow, "HH_SWORK", this.dsData.getColumn(0, "HH_SWORK"));
	this.dsSave.setColumn(nrow, "MM_SWORK", this.dsData.getColumn(0, "MM_SWORK"));
	this.dsSave.setColumn(nrow, "HH_EWORK", this.dsData.getColumn(0, "HH_EWORK"));
	this.dsSave.setColumn(nrow, "MM_EWORK", this.dsData.getColumn(0, "MM_EWORK"));
	//	
	this.dsSave.setColumn(nrow, "GR_SEARCH", this.FormInfo.GR_SEARCH);
	this.dsSave.setColumn(nrow, "GR_CORP", this.AuthClient.CD_CORP);
	this.dsSave.setColumn(nrow, "GR_DEPT", this.AuthClient.CD_DEPT);
	this.dsSave.setColumn(nrow, "ID_USER", this.AuthClient.ID_USER);

	var strSvcId    = "save";
	var strSvcType  = "save";
	var inProc		= "_dsProc";
	var inData      = "save=dsSave";
	var outData     = "";
	var strArg      = "";
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 		// 입력값으로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
											
}

this.btnCANCLE_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	// 취소
	this.getParentContext().close(false);
};

this.fnDataValidate = function(){
	/*
	if(this.gfnIsNull(this.ctclDT_BASE.value)) {		
		this.ctclDT_BASE.setFocus();
		this.gfnAlert("기준일자를 입력해주세요");
		return false;
	}
	else if(this.gfnIsNull(this.ccfCD_CORP.form.CDTextBox.value)) {		
		this.ccfCD_CORP.form.CDTextBox.setFocus();
		this.gfnAlert("법인을 입력해주세요");
		return false;
	}
	*/
	return true;	
}
/************************************************************************
 * 코드파인드 이벤트
 ************************************************************************/
this.fnBeforeUserDataSetParam = function(id, dsUserParam, nrow) {
	
}

/************************************************************************
 * 콜백 이벤트
 ************************************************************************/
this.fnCallback = function(svcID, errorCode, errorMsg)
{
	if(svcID == "save") {
		if (errorCode == 0) {
			//this.fnClose = function() {
				//this.getParentContext().close(true);
				this.fnSelect();
			//}
			//this.gfnAlert("작업이 완료 되었습니다.", "fnClose");
		} else {
			this.gfnAlert(errorMsg);
		}
	}else if (svcID == "select") {
		if(this.dsData.getColumn(0,"CD_CHANGE") == "C"){	//휴일근무일때만 활성화
			this.divDataSubmit.form.tclDT_CHANGE.set_enable(true);
		}else{
			this.divDataSubmit.form.tclDT_CHANGE.set_enable(false);
			this.dsData.setColumn(0, "DT_CHANGE", "");
		}
	}
}


// 연장근로 변경신청 버튼 클릭 이벤트
this.btnSubmit_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	// 연장근로 변경신청 내역 보이거나 숨기기
	if(this.gbSetVisible == "false"){
		this.gbSetVisible = "true";
		this.divDataSubmit.set_visible(true);
		this.getOwnerFrame().set_height(680);	
		this.set_height(680);
	}else{
		this.gbSetVisible = "false";
		this.divDataSubmit.set_visible(false);
		this.getOwnerFrame().set_height(462);	
		this.set_height(462);
	}
};

// 전자결재 버튼 클릭 이벤트
this.divDataSubmit_divBtns_btnAPP_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	//if( nICnt > -1|| nUCnt > -1 || nDCnt > -1) { 
	//	this.gfnAlert("저장 후 처리하세요.", "");
	//	return; 
	//}	

	var param = {};
	param.V1 = this.dsList.getColumn(0, "ID_PERSON");
	param.V2 = this.dsList.getColumn(0, "DT_WORK");
	param.V3 = "";
	param.V4 = "";
	param.ID_AP = this.dsData.getColumn(0, "NO_APPROVAL");	// 전자결재문서번호
	param.DS_ETITLE = "연장근무신청";

	this.gfnFormOpen("DAG", "DAG_WORKDAY_INFO_APP", "fnAprvDialogCallback", param, 1200, 750);
};

 this.fnAprvDialogCallback = function(svcID, value) {
	// 리턴값
	//if(value){
		// 결재완료, 결재취소, 결재상신 후에는 재조회를 한다
		this.fnSelect();
	//}
};



//근무구분 콤보 조회
this.fnSetCombo = function() {

   this.dsCombo = new Dataset();
   this.dsCombo.addColumn("TY_SEL", "string");
   this.dsCombo.addColumn("CD_PREFIX", "string");
   this.dsCombo.addColumn("CD_UPPREFIX", "string");
   
   this.dsCombo.addRow();
   this.dsCombo.setColumn(0, "TY_SEL", "P");
   this.dsCombo.setColumn(0, "CD_PREFIX", "GL");
   this.dsCombo.setColumn(0, "CD_UPPREFIX", "");

	var strSvcId    = "combo";
	var strSvcType  = "select";
	var inProc		= "_dsProc";
	var inData      = "combo=dsCombo";
	var outData     = "dsCD_CHANGE=combo0";
	var strArg      = "";
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
};


this.dsData_onvaluechanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{
	if(e.oldvalue != e.newvalue)
	{
		if(e.columnid == "CD_CHANGE") {	// 근무구분
			if(this.dsData.getColumn(0,"CD_CHANGE") == "C"){	//휴일근무일때만 활성화
				this.divDataSubmit.form.tclDT_CHANGE.set_enable(true);
			}else{
				this.divDataSubmit.form.tclDT_CHANGE.set_enable(false);
				this.dsData.setColumn(0, "DT_CHANGE", "");
			}
		}
		
	}
};
]]></Script>
    <Objects>
      <Dataset id="dsList">
        <ColumnInfo>
          <Column id="CD_CORP" type="STRING" size="256"/>
          <Column id="DT_WORK" type="STRING" size="256"/>
          <Column id="ID_PERSON" type="STRING" size="256"/>
          <Column id="ID_SABUN" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CORP"/>
            <Col id="DT_WORK"/>
            <Col id="ID_PERSON"/>
            <Col id="ID_SABUN"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="_dsProc">
        <ColumnInfo>
          <Column id="TARGET" type="STRING" size="256"/>
          <Column id="SP" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="TARGET">select</Col>
            <Col id="SP">DAGPR_WORKINFO_DETAIL</Col>
          </Row>
          <Row>
            <Col id="TARGET">save</Col>
            <Col id="SP">DAGPR_WORKINFO_SAVE</Col>
          </Row>
          <Row>
            <Col id="TARGET">combo</Col>
            <Col id="SP">DAZPR_COMMONCODE_COMBO</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsData" onvaluechanged="dsData_onvaluechanged">
        <ColumnInfo>
          <Column id="DT_NAME" type="STRING" size="256"/>
          <Column id="DS_CORP" type="STRING" size="256"/>
          <Column id="DS_DEPT" type="STRING" size="256"/>
          <Column id="DS_ORG" type="STRING" size="256"/>
          <Column id="ID_SABUN_ORG" type="STRING" size="256"/>
          <Column id="DS_HNAME" type="STRING" size="256"/>
          <Column id="DS_POSITION" type="STRING" size="256"/>
          <Column id="DS_OCCUPATION" type="STRING" size="256"/>
          <Column id="DS_WORK" type="STRING" size="256"/>
          <Column id="DS_APPROVAL" type="STRING" size="256"/>
          <Column id="TM_START" type="STRING" size="256"/>
          <Column id="TM_END" type="STRING" size="256"/>
          <Column id="TM_BREAK" type="STRING" size="256"/>
          <Column id="TM_SWORK" type="STRING" size="256"/>
          <Column id="TM_EWORK" type="STRING" size="256"/>
          <Column id="TM_SOVER" type="STRING" size="256"/>
          <Column id="TM_EOVER" type="STRING" size="256"/>
          <Column id="CD_HOLIDAY" type="STRING" size="256"/>
          <Column id="DS_HOLIDAY" type="STRING" size="256"/>
          <Column id="TM_HOLIDAY" type="STRING" size="256"/>
          <Column id="SUM_WORK" type="STRING" size="256"/>
          <Column id="TM_WORK_DAY" type="STRING" size="256"/>
          <Column id="SUM_WORK1" type="STRING" size="256"/>
          <Column id="SUM_OVER" type="STRING" size="256"/>
          <Column id="WK_LIMIT" type="STRING" size="256"/>
          <Column id="WK_WORK" type="STRING" size="256"/>
          <Column id="CD_CHANGE" type="STRING" size="256"/>
          <Column id="HH_SWORK" type="STRING" size="256"/>
          <Column id="MM_SWORK" type="STRING" size="256"/>
          <Column id="HH_EWORK" type="STRING" size="256"/>
          <Column id="MM_EWORK" type="STRING" size="256"/>
          <Column id="HH_SOVER" type="STRING" size="256"/>
          <Column id="MM_SOVER" type="STRING" size="256"/>
          <Column id="HH_EOVER" type="STRING" size="256"/>
          <Column id="MM_EOVER" type="STRING" size="256"/>
          <Column id="DS_REMARK" type="STRING" size="256"/>
          <Column id="DT_CHANGE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="dsCD_CHANGE">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="dsHH_EARLY">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">00</Col>
            <Col id="DS_CODE">00</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">05</Col>
            <Col id="DS_CODE">05</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">06</Col>
            <Col id="DS_CODE">06</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">07</Col>
            <Col id="DS_CODE">07</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">08</Col>
            <Col id="DS_CODE">08</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">09</Col>
            <Col id="DS_CODE">09</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">10</Col>
            <Col id="DS_CODE">10</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">11</Col>
            <Col id="DS_CODE">11</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">12</Col>
            <Col id="DS_CODE">12</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsMM_EARLY">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">00</Col>
            <Col id="DS_CODE">00</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">10</Col>
            <Col id="DS_CODE">10</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">20</Col>
            <Col id="DS_CODE">20</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">30</Col>
            <Col id="DS_CODE">30</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">40</Col>
            <Col id="DS_CODE">40</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">50</Col>
            <Col id="DS_CODE">50</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsHH_SOVER">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">00</Col>
            <Col id="DS_CODE">00</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">06</Col>
            <Col id="DS_CODE">06</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">07</Col>
            <Col id="DS_CODE">07</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">08</Col>
            <Col id="DS_CODE">08</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">09</Col>
            <Col id="DS_CODE">09</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">12</Col>
            <Col id="DS_CODE">12</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">13</Col>
            <Col id="DS_CODE">13</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">14</Col>
            <Col id="DS_CODE">14</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">15</Col>
            <Col id="DS_CODE">15</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">16</Col>
            <Col id="DS_CODE">16</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">17</Col>
            <Col id="DS_CODE">17</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">18</Col>
            <Col id="DS_CODE">18</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">19</Col>
            <Col id="DS_CODE">19</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">20</Col>
            <Col id="DS_CODE">20</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsHH_EOVER">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">00</Col>
            <Col id="DS_CODE">00</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">12</Col>
            <Col id="DS_CODE">12</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">13</Col>
            <Col id="DS_CODE">13</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">14</Col>
            <Col id="DS_CODE">14</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">15</Col>
            <Col id="DS_CODE">15</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">16</Col>
            <Col id="DS_CODE">16</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">17</Col>
            <Col id="DS_CODE">17</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">18</Col>
            <Col id="DS_CODE">18</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">19</Col>
            <Col id="DS_CODE">19</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">20</Col>
            <Col id="DS_CODE">20</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">21</Col>
            <Col id="DS_CODE">21</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">22</Col>
            <Col id="DS_CODE">22</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsHH_SWORK">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">00</Col>
            <Col id="DS_CODE">00</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">06</Col>
            <Col id="DS_CODE">06</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">07</Col>
            <Col id="DS_CODE">07</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">08</Col>
            <Col id="DS_CODE">08</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">09</Col>
            <Col id="DS_CODE">09</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">10</Col>
            <Col id="DS_CODE">10</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">11</Col>
            <Col id="DS_CODE">11</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsHH_EWORK">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">00</Col>
            <Col id="DS_CODE">00</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">12</Col>
            <Col id="DS_CODE">12</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">13</Col>
            <Col id="DS_CODE">13</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">14</Col>
            <Col id="DS_CODE">14</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">15</Col>
            <Col id="DS_CODE">15</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">16</Col>
            <Col id="DS_CODE">16</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">17</Col>
            <Col id="DS_CODE">17</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">18</Col>
            <Col id="DS_CODE">18</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsMM_WORK">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">00</Col>
            <Col id="DS_CODE">00</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">10</Col>
            <Col id="DS_CODE">10</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">20</Col>
            <Col id="DS_CODE">20</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">30</Col>
            <Col id="DS_CODE">30</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">40</Col>
            <Col id="DS_CODE">40</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">50</Col>
            <Col id="DS_CODE">50</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item8" compid="txtDT_NAME" propid="value" datasetid="dsData" columnid="DT_NAME"/>
      <BindItem id="item9" compid="txtDS_HNAME" propid="value" datasetid="dsData" columnid="DS_HNAME"/>
      <BindItem id="item10" compid="txtDS_POSITION" propid="value" datasetid="dsData" columnid="DS_POSITION"/>
      <BindItem id="item11" compid="txtDS_ORG" propid="value" datasetid="dsData" columnid="DS_ORG"/>
      <BindItem id="item12" compid="txtDS_WORK" propid="value" datasetid="dsData" columnid="DS_WORK"/>
      <BindItem id="item13" compid="txtTM_START" propid="value" datasetid="dsData" columnid="TM_START"/>
      <BindItem id="item15" compid="txtTM_SWORK" propid="value" datasetid="dsData" columnid="TM_SWORK"/>
      <BindItem id="item17" compid="txtTM_SOVER" propid="value" datasetid="dsData" columnid="TM_SOVER"/>
      <BindItem id="item18" compid="txtSUM_WORK" propid="value" datasetid="dsData" columnid="SUM_WORK"/>
      <BindItem id="item19" compid="txtTM_WORK_DAY" propid="value" datasetid="dsData" columnid="TM_WORK_DAY"/>
      <BindItem id="item20" compid="txtSUM_OVER" propid="value" datasetid="dsData" columnid="SUM_OVER"/>
      <BindItem id="item21" compid="txtTM_EOVER" propid="value" datasetid="dsData" columnid="TM_EOVER"/>
      <BindItem id="item23" compid="txtTM_EWORK" propid="value" datasetid="dsData" columnid="TM_EWORK"/>
      <BindItem id="item24" compid="txtTM_BREAK" propid="value" datasetid="dsData" columnid="TM_BREAK"/>
      <BindItem id="item25" compid="txtTM_END" propid="value" datasetid="dsData" columnid="TM_END"/>
      <BindItem id="item26" compid="txtDS_APPROVAL" propid="value" datasetid="dsData" columnid="DS_APPROVAL"/>
      <BindItem id="item29" compid="divDataSubmit.form.txtWK_WORK" propid="value" datasetid="dsData" columnid="WK_WORK"/>
      <BindItem id="item27" compid="divDataSubmit.form.txtDS_REMARK" propid="value" datasetid="dsData" columnid="DS_REMARK"/>
      <BindItem id="item28" compid="divDataSubmit.form.cboMM_EOVER" propid="value" datasetid="dsData" columnid="MM_EOVER"/>
      <BindItem id="item31" compid="divDataSubmit.form.cboHH_EOVER" propid="value" datasetid="dsData" columnid="HH_EOVER"/>
      <BindItem id="item34" compid="divDataSubmit.form.cboMM_SOVER" propid="value" datasetid="dsData" columnid="MM_SOVER"/>
      <BindItem id="item35" compid="divDataSubmit.form.cboHH_SOVER" propid="value" datasetid="dsData" columnid="HH_SOVER"/>
      <BindItem id="item36" compid="divDataSubmit.form.cboCD_CHANGE" propid="value" datasetid="dsData" columnid="CD_CHANGE"/>
      <BindItem id="item1" compid="divDataSubmit.form.tclDT_CHANGE" propid="value" datasetid="dsData" columnid="DT_CHANGE"/>
      <BindItem id="item0" compid="divDataSubmit.form.cboHH_SWORK" propid="value" datasetid="dsData" columnid="HH_SWORK"/>
      <BindItem id="item2" compid="divDataSubmit.form.cboMM_SWORK" propid="value" datasetid="dsData" columnid="MM_SWORK"/>
      <BindItem id="item3" compid="divDataSubmit.form.cboHH_EWORK" propid="value" datasetid="dsData" columnid="HH_EWORK"/>
      <BindItem id="item4" compid="divDataSubmit.form.cboMM_EWORK" propid="value" datasetid="dsData" columnid="MM_EWORK"/>
      <BindItem id="item5" compid="edtID_PERSON" propid="value" datasetid="dsList" columnid="ID_PERSON"/>
    </Bind>
  </Form>
</FDL>
