<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.0">
  <Form id="form" width="1200" height="600" titletext="발주서상세" onload="form_onload">
    <Layouts>
      <Layout>
        <Div id="divSearch" taborder="0" left="0.0" top="10.0" height="46.0" right="0" cssclass="div_SEARCH_Bg" formscrolltype="none">
          <Layouts>
            <Layout>
              <Static id="staCD_SITE" taborder="1" text="현장코드" left="0.0" top="10.0" width="144.0" height="24.0" cssclass="sta_WF_SchLabelE"/>
              <Div id="ccfCD_SITE" CodeFindName="DZX_CFSITE" CDTextWidth="80" taborder="0" left="staCD_SITE:0.0" top="10.0" width="250" height="24.0" url="cmm::cmmCodeFind.xfdl" enable="false"/>
              <Static id="sta01" taborder="2" text="계약(PO)번호" left="ccfCD_SITE:0.0" top="10.0" width="144.0" height="24.0" cssclass="sta_WF_SchLabelE"/>
              <Div id="ccfNO_CONT" CodeFindName="DCX_CFPRECONTRACT" CDTextWidth="100" taborder="3" left="sta01:0.0" top="10.0" width="250" height="24.0" url="cmm::cmmCodeFind.xfdl" enable="false"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="divData" taborder="0" left="0" top="divSearch:10" bottom="0" right="0" cssclass="div_DATA_Bg" text="">
          <Layouts>
            <Layout>
              <Static id="sta02" taborder="0" text="발주서상세정보" left="0" top="0" width="1165" height="22" cssclass="sta_TITLE_Bg"/>
              <Div id="divData01" taborder="1" left="0" top="sta02:10" width="1170" height="180" text="">
                <Layouts>
                  <Layout>
                    <Static id="sta201" taborder="0" text="발주(PR)번호" left="0" top="0" width="110" height="30" cssclass="sta_WF_tablelabel" onclick="divData_divDataRight_sta01_onclick"/>
                    <Static id="sta202" taborder="1" text="부문" left="0" top="sta201:-1" width="110" height="30" cssclass="sta_WF_tablelabel" textDecoration="none"/>
                    <Static id="sta203" taborder="3" text="(대표)거래처" left="0" top="sta202:-1" width="110" height="30" cssclass="sta_WF_tablelabelE"/>
                    <Static id="sta211" taborder="4" left="sta201:-1" top="0" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta212" taborder="5" left="sta202:-1" top="sta211:-1" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta213" taborder="6" left="sta203:-1" top="sta212:-1" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="staNO_BID" taborder="7" text="입찰번호" left="776" top="0" width="110" height="30" cssclass="sta_WF_tablelabel" onclick="divData_divDataRight_sta01_onclick"/>
                    <Static id="sta231" taborder="8" left="staNO_BID:-1" top="0" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Edit id="txtNO_PR" taborder="9" left="sta201:5" top="5" height="20" width="268" enable="true" readonly="true"/>
                    <Static id="sta00" taborder="11" text="발주명" left="388" top="0" width="110" height="30" onclick="divData_divDataRight_sta01_onclick" cssclass="sta_WF_tablelabelE"/>
                    <Static id="sta01" taborder="12" left="497" top="0" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta02" taborder="14" text="품목" left="388" top="29" width="110" height="30" onclick="divData_divDataRight_sta01_onclick" cssclass="sta_WF_tablelabelE"/>
                    <Static id="sta03" taborder="15" left="497" top="29" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta04" taborder="16" text="담당자" left="776" top="29" width="110" height="30" onclick="divData_divDataRight_sta01_onclick" cssclass="sta_WF_tablelabelE"/>
                    <Static id="sta05" taborder="17" left="885" top="29" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta06" taborder="18" text="과세율" left="388" top="58" width="110" height="30" onclick="divData_divDataRight_sta01_onclick" cssclass="sta_WF_tablelabelE"/>
                    <Static id="sta07" taborder="19" left="497" top="58" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta08" taborder="20" text="면세율" left="776" top="58" width="110" height="30" cssclass="sta_WF_tablelabel" onclick="divData_divDataRight_sta01_onclick"/>
                    <Static id="sta09" taborder="21" left="885" top="58" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta10" taborder="22" left="885" top="87" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta11" taborder="23" text="부가세" left="776" top="87" width="110" height="30" cssclass="sta_WF_tablelabel" onclick="divData_divDataRight_sta01_onclick"/>
                    <Static id="sta12" taborder="24" left="497" top="87" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta13" taborder="25" text="공급가" left="388" top="87" width="110" height="30" cssclass="sta_WF_tablelabel" onclick="divData_divDataRight_sta01_onclick" textDecoration="none"/>
                    <Static id="sta14" taborder="26" left="109" top="87" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta15" taborder="27" text="계약금액" left="0" top="87" width="110" height="30" cssclass="sta_WF_tablelabel"/>
                    <Static id="sta16" taborder="28" left="885" top="116" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta17" taborder="29" text="승인요청금액" left="776" top="116" width="110" height="30" cssclass="sta_WF_tablelabel" onclick="divData_divDataRight_sta01_onclick"/>
                    <Static id="sta18" taborder="30" left="497" top="116" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta19" taborder="31" text="예산금액" left="388" top="116" width="110" height="30" cssclass="sta_WF_tablelabel" onclick="divData_divDataRight_sta01_onclick" textDecoration="none"/>
                    <Static id="sta20" taborder="32" left="109" top="116" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta21" taborder="33" text="도급금액" left="0" top="116" width="110" height="30" cssclass="sta_WF_tablelabel"/>
                    <Static id="sta22" taborder="34" left="885" top="145" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta23" taborder="35" text="과세구분" left="776" top="145" width="110" height="30" cssclass="sta_WF_tablelabel" onclick="divData_divDataRight_sta01_onclick"/>
                    <Static id="sta24" taborder="36" left="497" top="145" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta25" taborder="37" text="납기일자" left="388" top="145" width="110" height="30" onclick="divData_divDataRight_sta01_onclick" cssclass="sta_WF_tablelabelE"/>
                    <Static id="sta26" taborder="38" left="109" top="145" width="280" height="30" cssclass="sta_WF_tablebg"/>
                    <Static id="sta27" taborder="39" text="계약유형" left="0" top="145" width="110" height="30" cssclass="sta_WF_tablelabel"/>
                    <Edit id="txtNO_BID" taborder="41" left="staNO_BID:5" top="5" height="20" width="268" readonly="true" enable="true"/>
                    <Edit id="txtDS_ORDER" taborder="40" left="503" top="5" height="20" width="268" enable="false"/>
                    <Div id="cfCD_LICCOST" CodeFindName="DMX_CFLICCOST" CDTextWidth="70" taborder="13" left="503" top="34" width="268" height="20" url="cmm::cmmCodeFind.xfdl" enable="false"/>
                    <Div id="cfCD_VENDOR" CodeFindName="DSX_CFSITETYPE_CODE" CDTextWidth="70" taborder="42" left="115" top="63" width="268" height="20" url="cmm::cmmCodeFind.xfdl" enable="false"/>
                    <Div id="cfID_DAM" CodeFindName="DSX_CFSITETYPE_CODE" CDTextWidth="70" taborder="10" left="staNO_BID:5" top="34" width="268" height="20" url="cmm::cmmCodeFind.xfdl" enable="false"/>
                    <MaskEdit id="txtAM_CONT" taborder="43" left="115" top="92" height="20" width="268" format="9,999" enable="true" readonly="true"/>
                    <MaskEdit id="txtAM_TT_DOKUB" taborder="44" left="115" top="121" height="20" width="268" format="9,999" enable="true" readonly="true"/>
                    <MaskEdit id="txtRT_TAX" taborder="45" left="503" top="63" height="20" width="268" format="#,0.00"/>
                    <MaskEdit id="txtAM_CONTPRO" taborder="46" left="503" top="92" height="20" width="268" format="9,999" readonly="true"/>
                    <MaskEdit id="txtAM_TT_SILHENG" taborder="47" left="503" top="121" height="20" width="268" format="9,999" enable="true" readonly="true"/>
                    <Calendar id="tclDT_DELIVERY" taborder="48" left="504" top="150" width="105" height="20" dateformat="yyyy-MM-dd" editformat="yyyyMMdd" autoselect="true" value="" onchanged="divData_divData01_tclDT_DELIVERY_onchanged" enable="false"/>
                    <MaskEdit id="txtRT_TAXFREE" taborder="49" left="891" top="63" height="20" width="268" format="#,0.00"/>
                    <MaskEdit id="txtAM_CONTVAT" taborder="50" left="891" top="92" height="20" width="268" format="9,999" readonly="true"/>
                    <MaskEdit id="txtAM_TT_APPROVE" taborder="51" left="891" top="121" height="20" width="268" format="9,999" enable="true" readonly="true"/>
                    <Radio id="crdoTY_TAX" taborder="2" left="sta23:5" top="txtAM_TT_APPROVE:9" height="20" innerdataset="dsTY_TAX" direction="vertical" fittocontents="width" width="200" codecolumn="CD_CODE" datacolumn="DS_CODE" enable="false"/>
                    <Combo id="cboYN_E_CONT" taborder="52" left="115" top="150" width="150" height="20" innerdataset="dsYN_E_CONT" codecolumn="CD_CODE" datacolumn="DS_CODE" enable="false"/>
                    <Edit id="txtCD_COSTCLASS" taborder="53" left="115" top="34" height="20" width="77" enable="true" readonly="true"/>
                    <Edit id="txtDS_COSTCLASS" taborder="54" left="195" top="34" height="20" width="188" enable="true" readonly="true"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="divData02" taborder="1" left="0" top="divData01:5" width="1170" height="300" text="">
                <Layouts>
                  <Layout>
                    <Grid id="objGrid" taborder="0" left="0" top="0" bottom="0" right="0"/>
                  </Layout>
                </Layouts>
              </Div>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Script type="xscript5.1"><![CDATA[this.objApp = this.gfnGetApplication();

this.form_onload = function(obj:nexacro.Form,e:nexacro.LoadEventInfo)
{
	// -- 필수 -------------------//
	this.gfnFormOnLoad(this);	
	this.gfnFormInfo(this);		
	// ---------------------------//
	
	this.fnSetButton();
	this.fnSetExtendButton();
	this.fnSetVariable();
	this.fnSetEvent();
	this.fnSetParameter();
	
	this.fnSetCombo();
	
	// 타화면에서 오픈시 넘어오는 파라미터 처리
	if(!this.gfnIsNull(this.getOwnerFrame().CD_SITE)) {
		this.dsSearch.setColumn(0, "CD_SITE", this.getOwnerFrame().CD_SITE);
		this.divSearch.form.ccfCD_SITE.form.DSTextBox.set_value(this.getOwnerFrame().DS_SITE);	
		
		// 임시 조치.
		if(!this.gfnIsNull(this.getOwnerFrame().NO_CONT))
		{
			this.dsSearch.setColumn(0, "NO_CONT", this.getOwnerFrame().NO_CONT);
			this.divSearch.form.ccfNO_CONT.form.DSTextBox.set_value(this.getOwnerFrame().DS_SUBCON);
			this.FormBtns.Select.click();
		}
	}	
};

/************************************************************************
 * 버튼 설정 : 화면(Tab) 전환시 마다 호출
 * 서브버튼 사용 및 공통버튼 강제 제어시 여기서 처리
 ************************************************************************/
this.fnSetButton = function() {
}

/************************************************************************
 * 확장 버튼 : 화면별 버튼 설정 ID, function 연결 (화면버튼관리)
 ************************************************************************/
this.fnSetExtendButton = function() {
	this.btnItem = this.gfnFormButtonAdd("btnItem", "fnItem");  
	this.btnAddVendor = this.gfnFormButtonAdd("btnAddVendor", "fnAddVendor");  	
	this.btnAttach = this.gfnFormButtonAdd("btnAttach", "fnAttach");  	
	this.btnEstimation = this.gfnFormButtonAdd("btnEstimation", "fnEstimation");
  	this.btnReq = this.gfnFormButtonAdd("btnReq", "fnReq");  	
	this.btnReqCancel = this.gfnFormButtonAdd("btnReqCancel", "fnReqCancel");
	this.btnPoCancel = this.gfnFormButtonAdd("btnPoCancel", "fnPoCancel");
	this.btnAttachEtc = this.gfnFormButtonAdd("btnAttachEtc", "fnAttachEtc");  	
	this.btnAPP = this.gfnFormButtonAdd("btnAPP", "fnAPP");
	this.btnAPPR = this.gfnFormButtonAdd("btnAPPR", "fnAPPR");
	this.btnIndirect = this.gfnFormButtonAdd("btnIndirect", "fnIndirect");
};

/************************************************************************
 * 변수 선언
 ************************************************************************/
this.fnSetVariable = function() {	
	this.ccfCD_SITE = this.divSearch.form.ccfCD_SITE;
	this.ccfNO_CONT = this.divSearch.form.ccfNO_CONT;
	
	this.dxGrid = this.divData.form.divData02.form.objGrid;
};

/************************************************************************
 * 이벤트 설정
 ************************************************************************/
this.fnSetEvent = function() {
	this.ccfNO_CONT.BeforeUserDataSetParam = "fnBeforeUserDataSetParam";
	
	this.divData.form.divData01.form.cfCD_VENDOR.CodeFindName = "DCX_CFVENDOR_DM";	
	this.divData.form.divData01.form.cfCD_LICCOST.CodeFindName = "DMX_CFLICCOST";
	this.divData.form.divData01.form.cfID_DAM.CodeFindName = "CF_CODE_DM_H07";
	
	this.divData.form.divData01.form.cfCD_LICCOST.BeforeUserDataSetParam = "fnBeforeUserDataSetParam";
	this.divData.form.divData01.form.cfCD_LICCOST.AfterCDTextChanged = "cfCD_LICCOST_AfterCDTextChanged";	
	
	//this.divData.form.divData01.form.cfCD_LICCOST.BeforeUserDataSetParam = "fnBeforeUserDataSetParam";
	//this.divData.form.divData01.form.cfCD_ACCOUNT.BeforeUserDataSetParam = "fnBeforeUserDataSetParam";
	
	this.gfnGridInit(this.dxGrid, this.dsList1, "DM", "DMA_PO_DETAIL_VIEW");
	
};

/************************************************************************
 * 파라미터 설정
 ************************************************************************/
this.fnSetParameter = function() {

	this.dsSelect = new Dataset();
	this.dsSelect.addColumn("NO_CONT", "string");
	this.dsSelect.addColumn("ID_USER", "string");

	this.dsUpdate = new Dataset();
	this.dsUpdate.addColumn("NO_CONT", "string");
	this.dsUpdate.addColumn("DS_ORDER", "string");
	this.dsUpdate.addColumn("CD_VENDOR", "string");
	this.dsUpdate.addColumn("CD_LICCOST", "string");
	this.dsUpdate.addColumn("DT_DELIVERY", "string");
	this.dsUpdate.addColumn("RT_TAX", "bigdecimal");
	this.dsUpdate.addColumn("RT_TAXFREE", "bigdecimal");
	this.dsUpdate.addColumn("YN_E_CONT", "string");
	this.dsUpdate.addColumn("AM_CONTPRO", "bigdecimal");
	this.dsUpdate.addColumn("AM_CONTVAT", "bigdecimal");
	this.dsUpdate.addColumn("TY_TAX", "string");
	this.dsUpdate.addColumn("CD_PAYMENT", "string");
	this.dsUpdate.addColumn("CD_DELIVERY", "string");
	this.dsUpdate.addColumn("CD_ORDER", "string");
	this.dsUpdate.addColumn("CD_PAY_CONDITION", "string");
	this.dsUpdate.addColumn("CD_QUALITY", "string");
	this.dsUpdate.addColumn("CD_PACKING", "string");
	this.dsUpdate.addColumn("CD_INCREASE", "string");
	this.dsUpdate.addColumn("CD_H02", "string");
	this.dsUpdate.addColumn("TY_SELECT", "string");
	this.dsUpdate.addColumn("ID_DAM", "string");
	this.dsUpdate.addColumn("RM_BIGO", "string");
	this.dsUpdate.addColumn("ID_USER", "string");
	this.dsUpdate.addColumn("CD_PURCHASE", "string");
	
	this.dsDelete = new Dataset();
	this.dsDelete.addColumn("NO_CONT", "string");
		
	this.dsReq = new Dataset();
	this.dsReq.addColumn("NO_CONT", "string");
	this.dsReq.addColumn("ID_USER", "string");
	
	this.dsPoCancel = new Dataset();
	this.dsPoCancel.addColumn("CD_SITE", "string");
	this.dsPoCancel.addColumn("NO_CONT", "string");
	this.dsPoCancel.addColumn("ID_USER", "string");
	
	this.dsDetail = new Dataset();
	this.dsDetail.addColumn("NO_CONT", "string");
}

/************************************************************************
 * 컨트롤 이벤트
 ************************************************************************/
 /*
  *	조회 버튼
  */
this.fnSelect = function() {
	if (!this.fnSelectValidate()) return false;
	
	this.dsSelect.clearData();
	this.dsSelect.addRow();
	
	this.dsSelect.setColumn(0, "NO_CONT", this.dsSearch.getColumn(0, "NO_CONT"));
	this.dsSelect.setColumn(0, "ID_USER", this.AuthClient.ID_USER);
	
	this.dsDetail.clearData();
	this.dsDetail.addRow();
	this.dsDetail.setColumn(0, "NO_CONT", this.dsSearch.getColumn(0, "NO_CONT"));
	
	var strSvcId    = "select";
	var strSvcType  = "grid";
	var inProc		= "_dsProc";
	var inData      = "select=dsSelect select_d=dsDetail";
	var outData     = "dsList=select0 dsList1=select_d0";
	var strArg      = "";
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
}

/*
 *	입력 버튼
 */
this.fnAdd = function() {
	
}

/*
 *	삭제 버튼
 */
this.fnDel = function() {
	// 싱글폼(Dataset) 필수입력 체크
	//if (!this.gfnDataValidate(this.dsList, this.dsRequired)) return;
	
	this.dsDelete.clearData();
	
	//var flag = this.gfnGetFormStatus(this);
	
	if(this.dsList.rowcount > 0) {		
		var nrow = this.dsDelete.addRow();
		this.dsDelete.setColumn(nrow, "NO_CONT", this.dsSearch.getColumn(0, "NO_CONT"));
	}	
	
	if (this.dsDelete.rowcount == 0) return;
		
	var strSvcId    = "delete";
	var strSvcType  = "save";
	var inProc		= "_dsProc";
	var inData      = "delete=dsDelete";
	var outData     = "";
	var strArg      = "";
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
}

/*
 *	저장 버튼
 */
this.fnSave = function() {
	// 싱글폼(Dataset) 필수입력 체크
	if (!this.gfnDataValidate(this.dsList, this.dsRequired)) return;
	
	this.dsUpdate.clearData();
	
	var flag = this.gfnGetFormStatus(this);
	
	if(flag == "U") {		
		var nrow = this.dsUpdate.addRow();
		
		this.dsUpdate.setColumn(nrow, "NO_CONT", this.dsSearch.getColumn(0, "NO_CONT"));
		this.dsUpdate.setColumn(nrow, "DS_ORDER", this.dsList.getColumn(0, "DS_ORDER"));
		this.dsUpdate.setColumn(nrow, "CD_VENDOR", this.dsList.getColumn(0, "CD_VENDOR"));
		this.dsUpdate.setColumn(nrow, "CD_LICCOST", this.dsList.getColumn(0, "CD_LICCOST"));
		this.dsUpdate.setColumn(nrow, "DT_DELIVERY", this.dsList.getColumn(0, "DT_DELIVERY"));
		this.dsUpdate.setColumn(nrow, "RT_TAX", this.dsList.getColumn(0, "RT_TAX"));
		this.dsUpdate.setColumn(nrow, "RT_TAXFREE", this.dsList.getColumn(0, "RT_TAXFREE"));
		this.dsUpdate.setColumn(nrow, "YN_E_CONT", this.dsList.getColumn(0, "YN_E_CONT"));
		this.dsUpdate.setColumn(nrow, "AM_CONTPRO", this.dsList.getColumn(0, "AM_CONTPRO"));
		this.dsUpdate.setColumn(nrow, "AM_CONTVAT", this.dsList.getColumn(0, "AM_CONTVAT"));
		this.dsUpdate.setColumn(nrow, "TY_TAX", this.dsList.getColumn(0, "TY_TAX"));
		this.dsUpdate.setColumn(nrow, "CD_PAYMENT", this.dsList.getColumn(0, "CD_PAYMENT"));
		this.dsUpdate.setColumn(nrow, "CD_DELIVERY", this.dsList.getColumn(0, "CD_DELIVERY"));
		this.dsUpdate.setColumn(nrow, "CD_ORDER", this.dsList.getColumn(0, "CD_ORDER"));
		this.dsUpdate.setColumn(nrow, "CD_PAY_CONDITION", this.dsList.getColumn(0, "CD_PAY_CONDITION"));
		this.dsUpdate.setColumn(nrow, "CD_QUALITY", this.dsList.getColumn(0, "CD_QUALITY"));
		this.dsUpdate.setColumn(nrow, "CD_PACKING", this.dsList.getColumn(0, "CD_PACKING"));
		this.dsUpdate.setColumn(nrow, "CD_INCREASE", this.dsList.getColumn(0, "CD_INCREASE"));
		this.dsUpdate.setColumn(nrow, "CD_H02", this.dsList.getColumn(0, "CD_H02"));
		this.dsUpdate.setColumn(nrow, "TY_SELECT", this.dsList.getColumn(0, "TY_SELECT"));
		this.dsUpdate.setColumn(nrow, "ID_DAM", this.dsList.getColumn(0, "ID_DAM"));
		this.dsUpdate.setColumn(nrow, "RM_BIGO", this.dsList.getColumn(0, "RM_BIGO"));
		this.dsUpdate.setColumn(nrow, "ID_USER", this.AuthClient.ID_USER);
		this.dsUpdate.setColumn(nrow, "CD_PURCHASE", this.dsList.getColumn(0, "CD_PURCHASE"));
	}	
	
	if (this.dsUpdate.rowcount == 0) return;
		
	var strSvcId    = "save";
	var strSvcType  = "save";
	var inProc		= "_dsProc";
	var inData      = "update=dsUpdate";
	var outData     = "";
	var strArg      = "";
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
}

/*
 *	엑셀 버튼
 */
this.fnExcel = function() {
	this.gfnExcelExport(this.dxGrid);
}

/*
 *	출력 버튼
 */
this.fnPrint = function() {
}

/************************************************************************
 * Validate
 ************************************************************************/
/*
 *	조회 Validate
 */
this.fnSelectValidate = function() {
	var validate = true;
	if (this.gfnIsNull(this.dsSearch.getColumn(0, "CD_SITE"))) {
		validate = false;
		// Alert후 실행할 처리
		this.fnVaidateCallback = function() {
			this.divSearch.form.ccfCD_SITE.form.CDTextBox.setFocus();
		}
		this.gfnAlert("현장코드를 입력하세요.", "fnVaidateCallback");
	}else if (this.gfnIsNull(this.dsSearch.getColumn(0, "NO_CONT"))) {
		validate = false;
		// Alert후 실행할 처리
		this.fnVaidateCallback = function() {
			this.divSearch.form.ccfNO_CONT.form.CDTextBox.setFocus();
		}
		this.gfnAlert("계약(PO)번호를 입력하세요.", "fnVaidateCallback");
	}
	return validate;
};

/************************************************************************
 * 콜백 이벤트
 ************************************************************************/
/*
 *	콜백 처리
 */
this.fnCallback = function(svcID, errorCode, errorMsg, strArg)
{
	if (svcID == "select") {
		if(!this.gfnIsNull(this.dsList.getColumn(0, "TY_TAX")))
		{
			if(this.dsList.getColumn(0, "TY_TAX") != "공존"){
				this.divData.form.divData01.form.txtRT_TAX.set_readonly(true);
				this.divData.form.divData01.form.txtRT_TAXFREE.set_readonly(true);
			}
			this.fnBtnCheckAll();
		}
		
		this.fnSetEnableTySel();
	}
	else if(svcID == "save") {
		if (errorCode == 0) {
			this.FormBtns.Select.click();
		} else {
			this.gfnAlert(errorMsg);
		}
	}
	else if(svcID == "delete") {
		if (errorCode == 0) {
			//this.FormBtns.Select.click();
			this.getParentContext().close(false);
		} else {
			this.gfnAlert(errorMsg);
		}
	}	
	else if(svcID == "req") {
		if (errorCode == 0) {
			this.fnCallback_callback = function()
			{
				this.FormBtns.Select.click();
			}
			var msg = "";
			if(strArg == "req")
			{
				msg = "승인요청이 정상처리되었습니다.";
			}
			else if(strArg == "cancel")
			{
				msg = "승인요청취소가 정상처리되었습니다.";
			}
			
			this.gfnAlert(msg, "fnCallback_callback");
		}
		else
		{
			this.gfnAlert(errorMsg);
		}
	}
	else if(svcID == "po_cancel")
	{
		if (errorCode == 0) {
			this.fnCallback_callback = function()
			{
				this.getParentContext().close(true);
				//this.FormBtns.Select.click();
			}

			this.gfnAlert("발주서 삭제가 정상처리되었습니다.", "fnCallback_callback");
		}
		else
		{
			this.gfnAlert(errorMsg);
		}
	}
}




/************************************************************************
 * 코드파인드 이벤트
 ************************************************************************/
//코드파인드의 파라미터 값을 넘겨줄때 사용하는 함수
this.fnBeforeUserDataSetParam = function(id, dsUserParam, nrow) {
	
	if (id == "ccfNO_CONT") {
		if (this.gfnIsNull(this.dsSearch.getColumn(0, "CD_SITE"))) {
 			this.gfnAlert("현장코드를 먼저 입력하세요.");
 			return false;
 		}
		
		dsUserParam.setColumn(nrow, "CD_SITE", this.dsSearch.getColumn(0, "CD_SITE"));
	}	
	else if (id == "cfCD_LICCOST"){
		dsUserParam.setColumn(nrow, "COSTCLASS", "");
	}	
	
	return true;
}

this.cfCD_LICCOST_AfterCDTextChanged = function(id, codeFindData) {
	// 코드,명칭 외 추가 컬럼 처리
	var arr = codeFindData; //this.ccfCD_DEPT_ORG.form.SelectedData; 둘다 사용가능

	var cd_costclass = "";
	var ds_costclass = "";
	
	if (arr.length > 0) {
		cd_costclass = arr[0]["CD_COSTCLASS"];
		ds_costclass = arr[0]["DS_COSTCLASS"];
	}
	
	this.divData.form.divData01.form.txtCD_COSTCLASS.set_value(cd_costclass);	
	this.divData.form.divData01.form.txtDS_COSTCLASS.set_value(ds_costclass);	

}


/************************************************************************
 * 그리드 이벤트
 ************************************************************************/
 
/************************************************************************
 * 기타 이벤트
 ************************************************************************/
this.dsSearch_onvaluechanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{
	if(e.oldvalue != e.newvalue) {
		this.gfnSetFormStatus(this);	// 폼상태 초기화
		this.dsList.clearData();	// 싱글폼데이터 초기화
		this.gfnGridClear(this.dxGrid);	
		
		if(e.columnid == "CD_SITE"){
			this.divSearch.form.ccfNO_CONT.form.fnCodeFindClear();
		}
	}
};


this.dsList_onvaluechanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{
	if(e.oldvalue != e.newvalue) {
		this.gfnSetFormStatus(this, "U");	// 폼상태 업데이트
		
		
		if(e.columnid == "TY_TAX")
		{
			switch(e.newvalue)
			{
				case "과세" :
					this.dsList.setColumn(0, "RT_TAX", 100); 
					//this.dsList.setColumn(0, "RT_TAXFREE", 0);
					this.divData.form.divData01.form.txtRT_TAX.set_readonly(true);
					this.divData.form.divData01.form.txtRT_TAXFREE.set_readonly(true);
					break;
				case "면세" :
					this.dsList.setColumn(0, "RT_TAX", 0); 
					//this.dsList.setColumn(0, "RT_TAXFREE", 100);
					this.divData.form.divData01.form.txtRT_TAX.set_readonly(true);
					this.divData.form.divData01.form.txtRT_TAXFREE.set_readonly(true);
					break;
				case "공존" :
					this.divData.form.divData01.form.txtRT_TAX.set_readonly(false);
					this.divData.form.divData01.form.txtRT_TAXFREE.set_readonly(false);
					break;
			}
		}
		else if(e.columnid == "RT_TAX")
		{
			if(e.newvalue > 100)
			{
				this.gfnAlert("100 이하의 숫자로 입력해주십시오.");
				this.dsList.setColumn(0, "RT_TAX", e.oldvalue);
				return;
			}
			this.dsList.set_enableevent(false);
			this.dsList.setColumn(0, "RT_TAXFREE", 100 - e.newvalue);
			this.dsList.setColumn(0, "AM_CONTVAT", this.dsList.getColumn(0, "AM_CONTPRO") * e.newvalue / 1000);
			this.dsList.set_enableevent(true);
		}
		else if(e.columnid == "RT_TAXFREE")
		{
			if(e.newvalue > 100)
			{
				this.gfnAlert("100 이하의 숫자로 입력해주십시오.");
				this.dsList.setColumn(0, "RT_TAXFREE", e.oldvalue);
				return;
			}
			
			this.dsList.set_enableevent(false);
			this.dsList.setColumn(0, "RT_TAX", 100 - e.newvalue);
			this.dsList.setColumn(0, "AM_CONTVAT", this.dsList.getColumn(0, "AM_CONTPRO") * (100 - e.newvalue) / 1000);

			this.dsList.set_enableevent(true);
		}
		else if(e.columnid == "TY_SELECT")
		{
			this.fnSetEnableTySel();
		}
		
	}
};

// 입찰일경우 공급가 입력 금지
this.fnSetEnableTySel = function()
{	
	if(this.dsList.getColumn(0, "TY_SELECT") == "10"){
		//this.divData.form.divData01.form.txtAM_CONTPRO.set_readonly(true);
	}else{
		//this.divData.form.divData01.form.txtAM_CONTPRO.set_readonly(false);
	}
	
}

this.fnSetCombo = function() {
	
	this.dsCombo = new Dataset();
	this.dsCombo.addColumn("CD_SYSTEM", "string");
	this.dsCombo.addColumn("CD_TYPE", "string");
	
	this.dsCombo.addRow();
	this.dsCombo.setColumn(0, "CD_SYSTEM", "DC");
	this.dsCombo.setColumn(0, "CD_TYPE", "13");
	
	// 같은 SP 다중건 조회는 row 추가해서
	this.dsCombo.addRow();
	this.dsCombo.setColumn(1, "CD_SYSTEM", "DM");
	this.dsCombo.setColumn(1, "CD_TYPE", "AB");
	
	this.dsCombo.addRow();
	this.dsCombo.setColumn(2, "CD_SYSTEM", "DM");
	this.dsCombo.setColumn(2, "CD_TYPE", "AG");
	
	this.dsCombo.addRow();
	this.dsCombo.setColumn(3, "CD_SYSTEM", "DC");
	this.dsCombo.setColumn(3, "CD_TYPE", "53");
	
	this.dsCombo.addRow();
	this.dsCombo.setColumn(4, "CD_SYSTEM", "DM");
	this.dsCombo.setColumn(4, "CD_TYPE", "12");
	
	this.dsCombo.addRow();
	this.dsCombo.setColumn(5, "CD_SYSTEM", "DM");
	this.dsCombo.setColumn(5, "CD_TYPE", "H09");
	
	this.dsCombo.addRow();
	this.dsCombo.setColumn(6, "CD_SYSTEM", "DM");
	this.dsCombo.setColumn(6, "CD_TYPE", "H10");
	
	this.dsCombo.addRow();
	this.dsCombo.setColumn(7, "CD_SYSTEM", "DM");
	this.dsCombo.setColumn(7, "CD_TYPE", "H11");
	
	this.dsCombo.addRow();
	this.dsCombo.setColumn(8, "CD_SYSTEM", "DM");
	this.dsCombo.setColumn(8, "CD_TYPE", "H02");
	
	this.dsCombo.addRow();
	this.dsCombo.setColumn(9, "CD_SYSTEM", "DM");
	this.dsCombo.setColumn(9, "CD_TYPE", "H08");
	
	this.dsCombo.addRow();
	this.dsCombo.setColumn(10, "CD_SYSTEM", "DM");
	this.dsCombo.setColumn(10, "CD_TYPE", "H03");
	
	var strSvcId    = "combo";
	var strSvcType  = "select";
	var inProc		= "_dsProc";
	var inData      = "combo=dsCombo";
	var outData     = "dsYN_E_CONT=combo0 dsCD_PAYMENT=combo1 dsCD_DELIVERY=combo2 dsCD_ORDER=combo3 dsCD_PAY_CONDITION=combo4 dsCD_QUALITY=combo5 dsCD_PACKING=combo6 dsCD_INCREASE=combo7 dsCD_H02=combo8 dsTY_SELECT=combo9 dsCD_PURCHASE=combo10";
	var strArg      = "";
	var callBackFnc = "fnCallbackCombo";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
};

this.fnCallbackCombo = function(svcID, errorCode, errorMsg)
{
	if(svcID == "combo") {
 		//this.divData.form.divData01.form.cboTY_HAJA.set_index(0);
	}
};



// 낙찰사입찰내역 버튼 클릭시 팝업화면 호출
this.fnEstimation = function(obj:nexacro.Button,e:nexacro.ClickEventInfo) {
	var param = {};
	
	param.CD_SITE = this.dsSearch.getColumn(0, "CD_SITE");
	param.DS_SITE = this.ccfCD_SITE.form.DSTextBox.value;
	param.NO_BID = this.dsList.getColumn(0, "NO_BID");
	param.DS_SUBCON = this.dsList.getColumn(0, "DS_BID");
	param.NO_PR = this.dsList.getColumn(0, "NO_PR");
	param.DS_PR = this.dsList.getColumn(0, "DS_PR");
	
	this.gfnFormOpen("DCB", "DCB_ESTIMATIONVENDORSAV_RFQ", "", param); 
}


// 계약Item내역 버튼 클릭시 팝업화면 호출
this.fnItem = function(obj:nexacro.Button,e:nexacro.ClickEventInfo) {
	var param = {};
	param.CD_SITE = this.dsSearch.getColumn(0, "CD_SITE");
	param.DS_SITE = this.ccfCD_SITE.form.DSTextBox.value;
	param.NO_CONT = this.dsSearch.getColumn(0, "NO_CONT");
	param.DS_SUBCON = this.ccfNO_CONT.form.DSTextBox.value;
	
	this.gfnFormOpen(this.FormInfo.CD_MODULE, "DMA_PO_ITEM_DETAIL", "", param);
}

// 계약업체관리 버튼 클릭시 팝업화면 호출
this.fnAddVendor = function(obj:nexacro.Button,e:nexacro.ClickEventInfo) {
	var param = {};
	param.NO_CONT = this.dsSearch.getColumn(0, "NO_CONT");
	param.DS_SUBCON = this.ccfNO_CONT.form.DSTextBox.value;
	param.CD_SITE = this.dsSearch.getColumn(0, "CD_SITE");
	param.DS_SITE = this.ccfCD_SITE.form.DSTextBox.value;
	
	this.gfnFormOpen(this.FormInfo.CD_MODULE, "DMA_POVENDORADD", "", param);
}

this.fnAttach = function() {
	//if (!this.fnSelectValidate()) return false;
	var param = {};
	param.NO_BID = this.dsList.getColumn(0, "NO_BID");
	//param.DS_SUBCON = this.divSearch.form.ccfNO_BID.form.DSTextBox.text;
	param.CD_VENDOR = this.dsList.getColumn(0, "CD_VENDOR");
	param.DS_VENDOR = this.dsList.getColumn(0, "DS_VENDOR");
	//param.NO_PR = this.dsList.getColumn(this.dsList.rowposition, "NO_PR");
	//param.ADDFILE_NO = this.dsList.getColumn(this.dsList.rowposition, "ADDFILE_NO");
	
	this.gfnFormOpen(this.FormInfo.CD_MODULE, "DCB_ESTIMATION_DOCUMENT_LIST", "", param, 1000, 600);
	
	//this.fnSelectEPS("B");	// B : 입찰참여회사 첨부파일조회
}

// 승인요청 버튼 클릭 이벤트
this.fnReq = function(obj:nexacro.Button,e:nexacro.ClickEventInfo) {
	if(!this.fnSelectValidate()) return;
	
	this.gfnConfirm("승인요청을 진행하시겠습니까?", "fnReq_callback");
}

this.fnReq_callback = function(strID, val)
{
	if(val == true)
	{
		this.fnExecuteReq("req");
	}
}

// 승인요청취소 버튼 클릭 이벤트
this.fnReqCancel = function(obj:nexacro.Button,e:nexacro.ClickEventInfo) {
	if(!this.fnSelectValidate()) return;
	
	this.gfnConfirm("승인요청취소를 진행하시겠습니까?", "fnReqCancel_callback");
}

this.fnReqCancel_callback = function(strID, val)
{
	if(val == true)
	{
		this.fnExecuteReq("cancel");
	}
}

this.fnExecuteReq = function(gubun)
{
	this.dsReq.clearData();
	var nrow = this.dsReq.addRow();
	
	this.dsReq.setColumn(nrow, "NO_CONT", this.dsSearch.getColumn(0, "NO_CONT"));
	this.dsReq.setColumn(nrow, "ID_USER", this.AuthClient.ID_USER);

	var strSvcId    = "req";
	var strSvcType  = "save";
	var inProc		= "_dsProc";
	var inData      = "";
	
	if(gubun == "req") inData = "req=dsReq";
	else if(gubun == "cancel") inData = "req_cancel=dsReq";
	
	var outData     = "";
	var strArg      = gubun;
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
}

// 발주서삭제 버튼 클릭 이벤트
this.fnPoCancel = function(obj:nexacro.Button,e:nexacro.ClickEventInfo) {
	if(!this.fnSelectValidate()) return;
	
	this.gfnConfirm("발주서 삭제를 진행하시겠습니까?", "fnPoCancel_callback");
}

this.fnPoCancel_callback = function(strID, val)
{
	if(val == true)
	{
		this.dsPoCancel.clearData();
		var nrow = this.dsPoCancel.addRow();
		
		this.dsPoCancel.setColumn(nrow, "CD_SITE", this.dsSearch.getColumn(0, "CD_SITE"));
		this.dsPoCancel.setColumn(nrow, "NO_CONT", this.dsSearch.getColumn(0, "NO_CONT"));
		this.dsPoCancel.setColumn(nrow, "ID_USER", this.AuthClient.ID_USER);
		
		var strSvcId    = "po_cancel";
		var strSvcType  = "save";
		var inProc		= "_dsProc";
		var inData      = "po_cancel=dsPoCancel";
		var outData     = "";
		var strArg      = "";
		var callBackFnc = "fnCallback";
		
		this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
							strSvcType , 	// transaction을 요청할 구분
							inProc,			// Procedure 정보 Dataset 이름
							inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
							outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
							strArg, 		// 입력값으로 보낼 arguments, strFormData="20120607"
							callBackFnc); // 통신방법 정의 [생략가능]
	}
}

this.fnAttachEtc = function(obj:nexacro.Button,e:nexacro.ClickEventInfo) {
	if(this.gfnIsNull(this.dsList.getColumn(0, "NO_CONT"))) return;

	var fileManager = {};
	fileManager.CD_GUBUN = "DC80";
	fileManager.CD_DIR = [ this.dsSearch.getColumn(0, "NO_CONT") ];
	// CD_DIR 만 지정시 CD_DIR 배열 순대로 키1,키2,키3 까지 자동지정
	// 저장되는 디렉토리와 키값이 다른경우 CD_REF 추가로 사용
	//fileManager.CD_REF = [ "A1" ];
	// 권한 및 상태에 따라 업로드,삭제 가능여부 지정 (기본: true)
	
	if(this.FormInfo.TY_AUTH == "R") {
		fileManager.IS_READONLY = true;
	} else {
		fileManager.IS_READONLY = false;
	}
	
	this.gfnFileManager(fileManager, "fnFileCallback");
}

this.fnAPP = function(obj:nexacro.Button,e:nexacro.ClickEventInfo) {
	var param = {};

	param.PARAM01 = this.dsSearch.getColumn(0,"CD_SITE");
	param.PARAM02 = this.dsSearch.getColumn(0, "NO_CONT");
	param.ID_AP = this.dsList.getColumn(0, "NO_ELAPDOC");	// 전자결재문서번호
	param.YN_LINK = "N";	// 화면에서 팝업을 호출할경우 N, 링크를 통해서 화면을 오픈할경우 null 이다
	
	// 화면 오픈. 
	// CD_MODULE은 보통 같은 모듈에서 호출하는 경우가 많으니 this.FormInfo.CD_MODULE 사용
	// 타 모듈 화면 호출시 지정할것.
	this.gfnFormOpen(this.FormInfo.CD_MODULE, "DMA_PO_DETAIL_APP", "fnAprvDialogCallback", param, 1210, 870);
	
}


this.fnAPPR = function(obj:nexacro.Button,e:nexacro.ClickEventInfo) {
	var param = {};

	param.PARAM01 = this.dsSearch.getColumn(0,"CD_SITE");
	param.PARAM02 = this.dsSearch.getColumn(0, "NO_CONT");
	param.ID_AP = this.dsList.getColumn(0, "NO_ELAPDOC");	// 전자결재문서번호
	param.YN_LINK = "N";	// 화면에서 팝업을 호출할경우 N, 링크를 통해서 화면을 오픈할경우 null 이다
	
	// 화면 오픈. 
	// CD_MODULE은 보통 같은 모듈에서 호출하는 경우가 많으니 this.FormInfo.CD_MODULE 사용
	// 타 모듈 화면 호출시 지정할것.
	this.gfnFormOpen(this.FormInfo.CD_MODULE, "DMA_PO_DETAIL_R_APP", "fnAprvDialogCallback", param, 1210, 870);
	
}

 this.fnAprvDialogCallback = function(svcID, value) {
	// 리턴값
	if(value){
		// 결재완료, 결재취소, 결재상신 후에는 재조회를 한다
		this.FormBtns.Select.click();
	}
};	


this.fnIndirect = function(obj:nexacro.Button,e:nexacro.ClickEventInfo) {
	var param = {};

	param.CD_SITE = this.dsSearch.getColumn(0,"CD_SITE");
	param.DS_SITE = this.divSearch.form.ccfCD_SITE.form.DSTextBox.text;
	param.NO_CONT = this.dsSearch.getColumn(0, "NO_CONT");
	param.DS_SUBCON = this.divSearch.form.ccfNO_CONT.form.DSTextBox.text;
	
	// 화면 오픈. 
	// CD_MODULE은 보통 같은 모듈에서 호출하는 경우가 많으니 this.FormInfo.CD_MODULE 사용
	// 타 모듈 화면 호출시 지정할것.
	this.gfnFormOpen(this.FormInfo.CD_MODULE, "DMA_INDIRECT_APLLY", "fnIndirect_callback", param, 1200, 650);
}

this.fnIndirect_callback = function(strID, val)
{
	this.FormBtns.Select.click();
}

this.fnBtnCheckAll = function()
{
	this.gfnBtnCheck(this.btnItem, this.dsList);
	this.gfnBtnCheck(this.btnAddVendor , this.dsList);
	this.gfnBtnCheck(this.btnAttach, this.dsList);
	this.gfnBtnCheck(this.btnEstimation, this.dsList);
	this.gfnBtnCheck(this.btnReq, this.dsList);
	this.gfnBtnCheck(this.btnReqCancel , this.dsList);
	this.gfnBtnCheck(this.btnAttachEtc, this.dsList);
	this.gfnBtnCheck(this.btnAPP, this.dsList);
	this.gfnBtnCheck(this.btnIndirect, this.dsList);
	this.gfnBtnCheck(this.btnPoCancel, this.dsList);
}
this.divData_divData01_tclDT_DELIVERY_onchanged = function(obj:nexacro.Calendar,e:nexacro.ChangeEventInfo)
{
	
};
]]></Script>
    <Objects>
      <Dataset id="dsList" onvaluechanged="dsList_onvaluechanged">
        <ColumnInfo>
          <Column id="NO_PR" type="STRING" size="256"/>
          <Column id="CD_COSTCLASS" type="STRING" size="256"/>
          <Column id="DS_COSTCLASS" type="STRING" size="256"/>
          <Column id="CD_VENDOR" type="STRING" size="256"/>
          <Column id="DS_VENDOR" type="STRING" size="256"/>
          <Column id="AM_CONT" type="STRING" size="256"/>
          <Column id="AM_TT_DOKUB" type="STRING" size="256"/>
          <Column id="YN_E_CONT" type="STRING" size="256"/>
          <Column id="DS_ORDER" type="STRING" size="256"/>
          <Column id="CD_LICCOST" type="STRING" size="256"/>
          <Column id="DS_LICCOST" type="STRING" size="256"/>
          <Column id="RT_TAX" type="STRING" size="256"/>
          <Column id="AM_CONTPRO" type="STRING" size="256"/>
          <Column id="AM_TT_SILHENG" type="STRING" size="256"/>
          <Column id="DT_DELIVERY" type="STRING" size="256"/>
          <Column id="ID_DAM" type="STRING" size="256"/>
          <Column id="DS_DAM" type="STRING" size="256"/>
          <Column id="RT_TAXFREE" type="STRING" size="256"/>
          <Column id="AM_CONTVAT" type="STRING" size="256"/>
          <Column id="AM_TT_APPROVE" type="STRING" size="256"/>
          <Column id="CD_PAYMENT" type="STRING" size="256"/>
          <Column id="CD_PAY_CONDITION" type="STRING" size="256"/>
          <Column id="CD_INCREASE" type="STRING" size="256"/>
          <Column id="RM_BIGO" type="STRING" size="256"/>
          <Column id="CD_DELIVERY" type="STRING" size="256"/>
          <Column id="CD_QUALITY" type="STRING" size="256"/>
          <Column id="CD_H02" type="STRING" size="256"/>
          <Column id="CD_ORDER" type="STRING" size="256"/>
          <Column id="CD_PACKING" type="STRING" size="256"/>
          <Column id="TY_SELECT" type="STRING" size="256"/>
          <Column id="TY_TAX" type="STRING" size="256"/>
          <Column id="NO_BID" type="STRING" size="256"/>
          <Column id="DS_BID" type="STRING" size="256"/>
          <Column id="DS_PR" type="STRING" size="256"/>
          <Column id="CD_PURCHASE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="_dsProc">
        <ColumnInfo>
          <Column id="TARGET" type="STRING" size="256"/>
          <Column id="SP" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="TARGET">select</Col>
            <Col id="SP">DMAPR_PO_DETAIL_SELECT</Col>
          </Row>
          <Row>
            <Col id="TARGET">update</Col>
            <Col id="SP">DMAPR_PO_DETAIL_UPDATE</Col>
          </Row>
          <Row>
            <Col id="SP">DMAPR_PO_DETAIL_DELETE</Col>
            <Col id="TARGET">delete</Col>
          </Row>
          <Row>
            <Col id="TARGET">combo</Col>
            <Col id="SP">DZXPR_CODE_LIST_SELECT</Col>
          </Row>
          <Row>
            <Col id="TARGET">req</Col>
            <Col id="SP">DMAPR_PO_REQUEST</Col>
          </Row>
          <Row>
            <Col id="TARGET">req_cancel</Col>
            <Col id="SP">DMAPR_PO_REQUEST_CANCEL</Col>
          </Row>
          <Row>
            <Col id="TARGET">po_cancel</Col>
            <Col id="SP">DCBPR_BIDTOPO_CANCEL</Col>
          </Row>
          <Row>
            <Col id="TARGET">select_d</Col>
            <Col id="SP">DMAPR_PRECONTRACT_HADODETAIL_DX_SELECT</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsSearch" onvaluechanged="dsSearch_onvaluechanged">
        <ColumnInfo>
          <Column id="CD_SITE" type="STRING" size="256"/>
          <Column id="NO_CONT" type="STRING" size="256"/>
          <Column id="SN_SEQ" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_SITE"/>
            <Col id="NO_CONT"/>
            <Col id="SN_SEQ"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsRequired">
        <ColumnInfo>
          <Column id="CD_FIELD" type="STRING" size="256"/>
          <Column id="DS_FIELD" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_FIELD">DS_CONTMETHOD</Col>
            <Col id="DS_FIELD">계약방법</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">CD_ACCOUNT</Col>
            <Col id="DS_FIELD">계정코드</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">CD_LICCOST</Col>
            <Col id="DS_FIELD">품목</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">CD_VENDOR</Col>
            <Col id="DS_FIELD">(대표)거래처</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">RT_TAX</Col>
            <Col id="DS_FIELD">과세율</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">ID_DAM</Col>
            <Col id="DS_FIELD">담당자</Col>
          </Row>
          <Row>
            <Col id="DS_FIELD">납기일자</Col>
            <Col id="CD_FIELD">DT_DELIVERY</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">DS_ORDER</Col>
            <Col id="DS_FIELD">발주명</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsYN_E_CONT"/>
      <Dataset id="dsCD_PAYMENT"/>
      <Dataset id="dsCD_PAY_CONDITION"/>
      <Dataset id="dsCD_INCREASE"/>
      <Dataset id="dsCD_DELIVERY"/>
      <Dataset id="dsCD_QUALITY"/>
      <Dataset id="dsCD_H02"/>
      <Dataset id="dsCD_ORDER"/>
      <Dataset id="dsCD_PACKING"/>
      <Dataset id="dsTY_SELECT"/>
      <Dataset id="dsTY_TAX">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">과세</Col>
            <Col id="DS_CODE">과세</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">면세</Col>
            <Col id="DS_CODE">면세</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">공존</Col>
            <Col id="DS_CODE">공존</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsList1" onvaluechanged="dsList_onvaluechanged">
        <ColumnInfo>
          <Column id="NO_PR" type="STRING" size="256"/>
          <Column id="CD_COSTCLASS" type="STRING" size="256"/>
          <Column id="DS_COSTCLASS" type="STRING" size="256"/>
          <Column id="CD_VENDOR" type="STRING" size="256"/>
          <Column id="DS_VENDOR" type="STRING" size="256"/>
          <Column id="AM_CONT" type="STRING" size="256"/>
          <Column id="AM_TT_DOKUB" type="STRING" size="256"/>
          <Column id="YN_E_CONT" type="STRING" size="256"/>
          <Column id="DS_ORDER" type="STRING" size="256"/>
          <Column id="CD_LICCOST" type="STRING" size="256"/>
          <Column id="DS_LICCOST" type="STRING" size="256"/>
          <Column id="RT_TAX" type="STRING" size="256"/>
          <Column id="AM_CONTPRO" type="STRING" size="256"/>
          <Column id="AM_TT_SILHENG" type="STRING" size="256"/>
          <Column id="DT_DELIVERY" type="STRING" size="256"/>
          <Column id="ID_DAM" type="STRING" size="256"/>
          <Column id="DS_DAM" type="STRING" size="256"/>
          <Column id="RT_TAXFREE" type="STRING" size="256"/>
          <Column id="AM_CONTVAT" type="STRING" size="256"/>
          <Column id="AM_TT_APPROVE" type="STRING" size="256"/>
          <Column id="CD_PAYMENT" type="STRING" size="256"/>
          <Column id="CD_PAY_CONDITION" type="STRING" size="256"/>
          <Column id="CD_INCREASE" type="STRING" size="256"/>
          <Column id="RM_BIGO" type="STRING" size="256"/>
          <Column id="CD_DELIVERY" type="STRING" size="256"/>
          <Column id="CD_QUALITY" type="STRING" size="256"/>
          <Column id="CD_H02" type="STRING" size="256"/>
          <Column id="CD_ORDER" type="STRING" size="256"/>
          <Column id="CD_PACKING" type="STRING" size="256"/>
          <Column id="TY_SELECT" type="STRING" size="256"/>
          <Column id="TY_TAX" type="STRING" size="256"/>
          <Column id="NO_BID" type="STRING" size="256"/>
          <Column id="DS_BID" type="STRING" size="256"/>
          <Column id="DS_PR" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="dsCD_PURCHASE">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="divSearch.form.ccfCD_SITE.form.CDTextBox" propid="value" datasetid="dsSearch" columnid="CD_SITE"/>
      <BindItem id="item1" compid="divSearch.form.ccfNO_CONT.form.CDTextBox" propid="value" datasetid="dsSearch" columnid="NO_CONT"/>
      <BindItem id="item7" compid="divData.form.divData01.form.cfCD_LICCOST.form.CDTextBox" propid="value" datasetid="dsList" columnid="CD_LICCOST"/>
      <BindItem id="item8" compid="divData.form.divData01.form.cfCD_LICCOST.form.DSTextBox" propid="value" datasetid="dsList" columnid="DS_LICCOST"/>
      <BindItem id="item9" compid="divData.form.divData01.form.cfID_DAM.form.CDTextBox" propid="value" datasetid="dsList" columnid="ID_DAM"/>
      <BindItem id="item10" compid="divData.form.divData01.form.cfID_DAM.form.DSTextBox" propid="value" datasetid="dsList" columnid="DS_DAM"/>
      <BindItem id="item37" compid="divData.form.divData01.form.txtNO_PR" propid="value" datasetid="dsList" columnid="NO_PR"/>
      <BindItem id="item3" compid="divData.form.divData01.form.txtDS_ORDER" propid="value" datasetid="dsList" columnid="DS_ORDER"/>
      <BindItem id="item5" compid="divData.form.divData01.form.cfCD_VENDOR.form.CDTextBox" propid="value" datasetid="dsList" columnid="CD_VENDOR"/>
      <BindItem id="item6" compid="divData.form.divData01.form.cfCD_VENDOR.form.DSTextBox" propid="value" datasetid="dsList" columnid="DS_VENDOR"/>
      <BindItem id="item4" compid="divData.form.divData01.form.txtAM_CONT" propid="value" datasetid="dsList" columnid="AM_CONT"/>
      <BindItem id="item13" compid="divData.form.divData01.form.txtAM_TT_DOKUB" propid="value" datasetid="dsList" columnid="AM_TT_DOKUB"/>
      <BindItem id="item14" compid="divData.form.divData01.form.txtRT_TAX" propid="value" datasetid="dsList" columnid="RT_TAX"/>
      <BindItem id="item15" compid="divData.form.divData01.form.txtAM_CONTPRO" propid="value" datasetid="dsList" columnid="AM_CONTPRO"/>
      <BindItem id="item16" compid="divData.form.divData01.form.txtAM_TT_SILHENG" propid="value" datasetid="dsList" columnid="AM_TT_SILHENG"/>
      <BindItem id="item17" compid="divData.form.divData01.form.tclDT_DELIVERY" propid="value" datasetid="dsList" columnid="DT_DELIVERY"/>
      <BindItem id="item18" compid="divData.form.divData01.form.txtRT_TAXFREE" propid="value" datasetid="dsList" columnid="RT_TAXFREE"/>
      <BindItem id="item19" compid="divData.form.divData01.form.txtAM_CONTVAT" propid="value" datasetid="dsList" columnid="AM_CONTVAT"/>
      <BindItem id="item20" compid="divData.form.divData01.form.txtAM_TT_APPROVE" propid="value" datasetid="dsList" columnid="AM_TT_APPROVE"/>
      <BindItem id="item21" compid="divData.form.divData01.form.cboYN_E_CONT" propid="value" datasetid="dsList" columnid="YN_E_CONT"/>
      <BindItem id="item31" compid="divData.form.divData01.form.txtCD_COSTCLASS" propid="value" datasetid="dsList" columnid="CD_COSTCLASS"/>
      <BindItem id="item11" compid="divData.form.divData01.form.txtDS_COSTCLASS" propid="value" datasetid="dsList" columnid="DS_COSTCLASS"/>
      <BindItem id="item12" compid="divData.form.divData01.form.crdoTY_TAX" propid="value" datasetid="dsList" columnid="TY_TAX"/>
      <BindItem id="item32" compid="divData.form.divData01.form.txtNO_BID" propid="value" datasetid="dsList" columnid="NO_BID"/>
    </Bind>
  </Form>
</FDL>
