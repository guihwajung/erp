<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.1">
  <Form id="form" width="550" height="700" maxwidth="600" maxheight="720" titletext="부가세 정보 입력" onload="form_onload" ondeactivate="form_ondeactivate" onbeforeclose="form_onbeforeclose">
    <Layouts>
      <Layout>
        <Div id="divData" taborder="0" left="0" top="0" height="600" right="0" cssclass="div_DATA_Bg">
          <Layouts>
            <Layout>
              <Static id="staTitle" taborder="1" text="증빙정보 입력" left="0" top="0" height="22" cssclass="sta_TITLE_Bg" right="0"/>
              <Static id="staCD_VATDEPT_ACNT" taborder="2" text="발의부서" left="10" top="staTitle:5" width="95" height="30" onclick="divData_divDataRight_sta01_onclick" cssclass="sta_WF_tablelabelE"/>
              <Static id="staCD_ACCOUNT" taborder="3" text="투자계정" left="10" top="staCD_VATDEPT_ACNT:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staTY_SALEBUY" taborder="4" text="거래구분" left="10" top="staCD_ACCOUNT:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staCD_VATPROOF" taborder="5" text="증빙코드" left="10" top="staTY_SALEBUY:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staTY_VATPROOF" taborder="6" text="증빙구분" left="10" top="staCD_VATPROOF:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staTY_BGJE" taborder="7" text="안분구분" left="10" top="staTY_VATPROOF:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staCD_SERVICE" taborder="8" text="접대비" left="10" top="staTY_BGJE:-1" width="95" height="30" cssclass="sta_WF_tablelabel" textDecoration="none"/>
              <Static id="staTY_VATTUJA" taborder="9" text="투자유형" left="10" top="staCD_SERVICE:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staDT_PROOF" taborder="10" text="증빙일자" left="10" top="staTY_VATTUJA:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staAM_SUPPLY" taborder="11" text="공급가액" left="10" top="staDT_PROOF:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staAM_VAT" taborder="12" text="부가세액" left="10" top="staAM_SUPPLY:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staAM_SERVICE" taborder="13" text="봉사료" left="10" top="staAM_VAT:-1" width="95" height="30" cssclass="sta_WF_tablelabel" textDecoration="none"/>
              <Static id="staDS_REM" taborder="14" text="적요" left="10" top="staAM_SERVICE:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staTY_PRECORP" taborder="15" text="거래처구분" left="10" top="staDS_REM:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staCD_VENDOR" taborder="16" text="거래처" left="10" top="staTY_PRECORP:-1" width="95" height="30" cssclass="sta_WF_tablelabelE"/>
              <Static id="staNO_SJC" taborder="17" text="사업자번호" left="10" top="staCD_VENDOR:-1" width="95" height="30" cssclass="sta_WF_tablelabel" textDecoration="none"/>
              <Static id="staNO_CREDIT" taborder="18" text="신용카드" left="10" top="staNO_SJC:-1" width="95" height="30" cssclass="sta_WF_tablelabel" textDecoration="none"/>
              <Static id="staTY_VAT" taborder="19" text="체크필드" left="10" top="staNO_CREDIT:-1" width="95" height="30" cssclass="sta_WF_tablelabel" textDecoration="none"/>
              <Static id="staTY_ISSUE" taborder="20" text="발행구분" left="10" top="staTY_VAT:-1" width="95" height="30" cssclass="sta_WF_tablelabel" textDecoration="none"/>
              <Static id="staBgCD_VATDEPT_ACNT" taborder="21" left="staCD_VATDEPT_ACNT:-1" top="staTitle:5" height="30" cssclass="sta_WF_tablebg" text="" right="10"/>
              <Static id="staBgCD_ACCOUNT" taborder="22" left="staCD_ACCOUNT:-1" top="staBgCD_VATDEPT_ACNT:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgTY_SALEBUY" taborder="23" left="staTY_SALEBUY:-1" top="staBgCD_ACCOUNT:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgCD_VATPROOF" taborder="24" left="staCD_VATPROOF:-1" top="staBgTY_SALEBUY:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgTY_VATPROOF" taborder="25" left="staTY_VATPROOF:-1" top="staBgCD_VATPROOF:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgTY_BGJE" taborder="26" left="staTY_BGJE:-1" top="staBgTY_VATPROOF:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgCD_SERVICE" taborder="27" left="staCD_SERVICE:-1" top="staBgTY_BGJE:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgTY_VATTUJA" taborder="28" left="staTY_VATTUJA:-1" top="staBgCD_SERVICE:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgDT_PROOF" taborder="29" left="staDT_PROOF:-1" top="staBgTY_VATTUJA:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgAM_SUPPLY" taborder="30" left="staAM_SUPPLY:-1" top="staBgDT_PROOF:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgAM_VAT" taborder="31" left="staAM_VAT:-1" top="staBgAM_SUPPLY:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgAM_SERVICE" taborder="32" left="staAM_SERVICE:-1" top="staBgAM_VAT:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgDS_REM" taborder="33" left="staDS_REM:-1" top="staBgAM_SERVICE:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgTY_PERCORP" taborder="34" left="staTY_PRECORP:-1" top="staBgDS_REM:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgCD_VENDOR" taborder="35" left="staCD_VENDOR:-1" top="staBgTY_PERCORP:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgNO_SJC" taborder="36" left="staNO_SJC:-1" top="staBgCD_VENDOR:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgNO_CREDIT" taborder="37" left="staNO_CREDIT:-1" top="staBgNO_SJC:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgTY_VAT" taborder="38" left="staTY_VAT:-1" top="staBgNO_CREDIT:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Static id="staBgTY_ISSUE" taborder="39" left="staTY_ISSUE:-1" top="staBgTY_VAT:-1" height="30" cssclass="sta_WF_tablebg" right="10"/>
              <Div id="ccfCD_VATDEPT_ACNT" taborder="40" CodeFindName="DHX_CFACNTUNIT_YNSLIPACCEPT" CDTextWidth="70" left="staCD_VATDEPT_ACNT:5" top="staTitle:10" height="20" url="cmm::cmmCodeFind.xfdl" text="" right="15"/>
              <Div id="ccfCD_ACCOUNT" taborder="41" CodeFindName="DHX_CFACNT_YNSLIP" CDTextWidth="70" left="staCD_ACCOUNT:5" top="ccfCD_VATDEPT_ACNT:9" right="15" height="20" url="cmm::cmmCodeFind.xfdl"/>
              <Radio id="rdoTY_SALEBUY" taborder="42" left="staTY_SALEBUY:5" top="ccfCD_ACCOUNT:9" width="250" height="20" innerdataset="dsTY_SALEBUY" codecolumn="CD_CODE" datacolumn="DS_CODE" direction="vertical"/>
              <Radio id="rdoCD_VATPROOF" taborder="43" left="staCD_VATPROOF:5" top="rdoTY_SALEBUY:9" width="250" height="20" innerdataset="dsCD_VATPROOF" codecolumn="CD_CODE" datacolumn="DS_CODE" direction="vertical"/>
              <Combo id="ccboTY_VATPROOF" taborder="44" left="staTY_VATPROOF:5" top="rdoCD_VATPROOF:9" width="239" height="20" innerdataset="dsTY_VATPROOF" codecolumn="CD_CODE" datacolumn="DS_CODE"/>
              <Combo id="ccboTY_BGJE" taborder="45" left="staTY_BGJE:5" top="ccboTY_VATPROOF:9" width="239" height="20" innerdataset="dsTY_BGJE" codecolumn="CD_CODE" datacolumn="DS_CODE"/>
              <Combo id="ccboCD_SERVICE" taborder="46" left="staCD_SERVICE:5" top="ccboTY_BGJE:9" width="239" height="20" innerdataset="dsCD_SERVICE" codecolumn="CD_CODE" datacolumn="DS_CODE" enable="false"/>
              <Combo id="ccboTY_VATTUJA" taborder="47" left="staTY_VATTUJA:5" top="ccboCD_SERVICE:9" width="239" height="20" innerdataset="dsTY_VATTUJA" codecolumn="CD_CODE" datacolumn="DS_CODE"/>
              <Calendar id="ctclDT_PROOF" taborder="48" left="staDT_PROOF:5" top="ccboTY_VATTUJA:9" width="105" height="20" dateformat="yyyy-MM-dd" editformat="yyyyMMdd" autoselect="true" value=""/>
              <MaskEdit id="ctxtAM_SUPPLY" taborder="49" left="staAM_SUPPLY:5" top="ctclDT_PROOF:9" width="239" height="20" value="" format="#,0"/>
              <MaskEdit id="ctxtAM_VAT" taborder="50" left="staAM_VAT:5" top="ctxtAM_SUPPLY:9" width="239" height="20" value="" format="#,0"/>
              <MaskEdit id="ctxtAM_SERVICE" taborder="51" left="staAM_SERVICE:5" top="ctxtAM_VAT:9" width="239" height="20" value="" format="#,0"/>
              <Edit id="ctxtDS_REM" taborder="52" left="staDS_REM:5" top="ctxtAM_SERVICE:9" right="15" height="20" value=""/>
              <Radio id="rdoTY_PERCORP" taborder="53" left="staTY_PRECORP:5" top="ctxtDS_REM:9" width="300" height="20" innerdataset="dsTY_PERCORP" codecolumn="CD_CODE" datacolumn="DS_CODE" direction="vertical"/>
              <Combo id="ccboTY_VENDOR" taborder="54" left="staCD_VENDOR:5" top="rdoTY_PERCORP:9" width="80" height="20" innerdataset="dsTY_VENDOR" codecolumn="CD_CODE" datacolumn="DS_CODE"/>
              <Div id="ccfCD_VENDOR" taborder="55" CodeFindName="DHX_CFETC_CODEFIND" CDTextWidth="70" left="ccboTY_VENDOR:3" top="rdoTY_PERCORP:9" right="15" height="20" url="cmm::cmmCodeFind.xfdl"/>
              <Edit id="ctxtNO_SJC" taborder="56" left="staNO_SJC:5" top="ccfCD_VENDOR:9" right="15" height="20" value=""/>
              <Div id="ccfNO_CREDIT" taborder="57" CodeFindName="DFX_CFCARD_CODEFIND" CDTextWidth="70" left="staNO_CREDIT:5" top="ctxtNO_SJC:9" right="15" height="20" url="cmm::cmmCodeFind.xfdl"/>
              <Edit id="ctxtNO_CASHBILL" taborder="58" left="staNO_CREDIT:5" top="ctxtNO_SJC:9" right="15" height="20" value="" visible="false"/>
              <CheckBox id="cchkYN_SPECIAL" taborder="59" text="간이과세" left="staTY_VAT:5" top="ccfNO_CREDIT:9" width="80" height="20" falsevalue="N" truevalue="Y"/>
              <CheckBox id="cchkCK_OMIT" taborder="60" text="누락여부" left="cchkYN_SPECIAL:2" top="ccfNO_CREDIT:9" width="80" height="20" falsevalue="N" truevalue="Y"/>
              <CheckBox id="cchkCK_DELAY" taborder="61" text="지연여부" left="cchkCK_OMIT:2" top="ccfNO_CREDIT:9" width="80" height="20" falsevalue="N" truevalue="Y"/>
              <Radio id="rdoTY_ISSUE" taborder="62" left="staTY_ISSUE:5" top="cchkYN_SPECIAL:9" width="250" height="20" innerdataset="dsTY_ISSUE" codecolumn="CD_CODE" datacolumn="DS_CODE" direction="vertical"/>
            </Layout>
          </Layouts>
        </Div>
        <Button id="btnConf" taborder="2" text="확인" left="45%" width="69" height="27" onclick="btnConf_onclick" top="divData:5"/>
        <Button id="btnDel" taborder="4" text="삭제" left="btnConf:-150" width="69" height="27" top="divData:5" onclick="btnDel_onclick"/>
        <Button id="btnCancel" taborder="3" text="닫기" left="btnConf:10" width="69" height="27" onclick="btnCancel_onclick" top="divData:5"/>
      </Layout>
    </Layouts>
    <Script type="xscript5.1"><![CDATA[this.objApp = this.gfnGetApplication();

this.YN_CHANGE = "N";

// JSON으로 이전화면에서 받는게 되지 않기에 차후 수정 예정.
// param.pValue = {}; (X) 
this.arrVatInfo = {};
this.AM_SUPPLY_FIRST = 0;

this.form_onload = function(obj:nexacro.Form,e:nexacro.LoadEventInfo)
{
	// -- 필수 -------------------//
	this.gfnFormOnLoad(this);	
	this.gfnFormInfo(this);		
	// ---------------------------//
	
	this.fnSetButton();
	this.fnSetExtendButton();
	this.fnSetVariable();
	this.fnSetEvent();
	this.fnSetParameter();
	
	this.dsSearch.setColumn(0, "IUD_FLAG", this.getOwnerFrame().IUD_FLAG);
	this.dsSearch.setColumn(0, "YN_DIRECT", this.getOwnerFrame().YN_DIRECT);


	this.arrVatInfo = this.getOwnerFrame().pArrVal; 
	
	this.pGUBUN = this.gfnIsNull(this.getOwnerFrame().pGUBUN) ? "" : this.getOwnerFrame().pGUBUN;
	this.YN_VAT = this.gfnIsNull(this.getOwnerFrame().YN_VAT) ? "Y" : this.getOwnerFrame().YN_VAT; 
	this.YN_ANBUN = this.getOwnerFrame().YN_ANBUN;
	this.CD_CORP = this.getOwnerFrame().CD_CORP;
	this.CD_DEPT = this.getOwnerFrame().CD_DEPT;
	this.DS_DEPT = this.getOwnerFrame().DS_DEPT;
	
	this.fnSetLoad();

};

/************************************************************************
 * 버튼 설정 : 화면(Tab) 전환시 마다 호출
 * 서브버튼 사용 및 공통버튼 강제 제어시 여기서 처리
 ************************************************************************/
this.fnSetButton = function() {

}

/************************************************************************
 * 확장 버튼 : 화면별 버튼 설정 ID, function 연결 (화면버튼관리)
 ************************************************************************/
this.fnSetExtendButton = function() {

};

/************************************************************************
 * 변수 선언
 ************************************************************************/
this.fnSetVariable = function() {	

};

/************************************************************************
 * 이벤트 설정
 ************************************************************************/
this.fnSetEvent = function() {

	this.dsList.addEventHandler("oncolumnchanged", this.dsList_ColumnChanged, this);

	this.divData.form.ccfCD_ACCOUNT.BeforeUserDataSetParam = "fnBeforeUserDataSetParam";
	this.divData.form.ccfCD_VATDEPT_ACNT.BeforeUserDataSetParam = "fnBeforeUserDataSetParam";
	this.divData.form.ccfCD_VENDOR.BeforeUserDataSetParam = "fnBeforeUserDataSetParam";
	this.divData.form.ccfCD_VENDOR.AfterCDTextChanged = "fnAfterCDTextChanged";
};

/************************************************************************
 * 파라미터 설정
 ************************************************************************/
this.fnSetParameter = function() {
	this.dsSelect = new Dataset();
	this.dsSelect.addColumn("NO_VAT", "string");
	this.dsSelect.addColumn("IN_CD_SLIP", "string");
	
	this.dsSelectVat = new Dataset();
	this.dsSelectVat.addColumn("IN_CD_SLIP", "string");

	this.dsInsert = new Dataset();
	this.dsInsert.addColumn("CD_VATDEPT_ACNT", "string");
	this.dsInsert.addColumn("TY_SALEBUY", "string");
	this.dsInsert.addColumn("CD_VATPROOF", "string");
	this.dsInsert.addColumn("TY_VATPROOF", "string");
	this.dsInsert.addColumn("TY_VATTUJA", "string");
	this.dsInsert.addColumn("TY_VATBGJE", "string");
	this.dsInsert.addColumn("CD_VATACCOUNT", "string");
	this.dsInsert.addColumn("TY_VATVENDOR", "string");
	this.dsInsert.addColumn("CD_VATVENDOR", "string");
	this.dsInsert.addColumn("DS_VATVENDOR", "string");
	this.dsInsert.addColumn("TY_PERCORP", "string");
	this.dsInsert.addColumn("YN_SERVICE", "string");
	this.dsInsert.addColumn("CD_SERVICE", "string");
	this.dsInsert.addColumn("AM_SUPPLY", "bigdecimal");
	this.dsInsert.addColumn("AM_VAT", "bigdecimal");
	this.dsInsert.addColumn("AM_FOREIGN", "bigdecimal");
	this.dsInsert.addColumn("AM_SERVICE", "bigdecimal");
	this.dsInsert.addColumn("CD_CURRENCY", "string");
	this.dsInsert.addColumn("NO_CREDIT", "string");
	this.dsInsert.addColumn("YN_SPECIAL", "string");
	this.dsInsert.addColumn("DT_PROOF", "string");
	this.dsInsert.addColumn("YN_APPR", "string");
	this.dsInsert.addColumn("YN_BADDEBT", "string");
	this.dsInsert.addColumn("CK_OMIT", "string");
	this.dsInsert.addColumn("CD_TRADE", "string");
	this.dsInsert.addColumn("NO_SLIP", "string");
	this.dsInsert.addColumn("DS_REM", "string");
	this.dsInsert.addColumn("ID_INSERT", "string");
	this.dsInsert.addColumn("TY_ISSUE", "string");
	this.dsInsert.addColumn("CK_DELAY", "string");
	this.dsInsert.addColumn("NO_CASHBILL", "string");

	this.dsUpdate = new Dataset();
	this.dsUpdate.addColumn("CD_VATDEPT_ACNT", "string");
	this.dsUpdate.addColumn("TY_SALEBUY", "string");
	this.dsUpdate.addColumn("CD_VATPROOF", "string");
	this.dsUpdate.addColumn("TY_VATPROOF", "string");
	this.dsUpdate.addColumn("TY_VATTUJA", "string");
	this.dsUpdate.addColumn("TY_VATBGJE", "string");
	this.dsUpdate.addColumn("CD_VATACCOUNT", "string");
	this.dsUpdate.addColumn("TY_VATVENDOR", "string");
	this.dsUpdate.addColumn("CD_VATVENDOR", "string");
	this.dsUpdate.addColumn("DS_VATVENDOR", "string");
	this.dsUpdate.addColumn("TY_PERCORP", "string");
	this.dsUpdate.addColumn("YN_SERVICE", "string");
	this.dsUpdate.addColumn("CD_SERVICE", "string");
	this.dsUpdate.addColumn("AM_SUPPLY", "bigdecimal");
	this.dsUpdate.addColumn("AM_VAT", "bigdecimal");
	this.dsUpdate.addColumn("AM_FOREIGN", "bigdecimal");
	this.dsUpdate.addColumn("AM_SERVICE", "bigdecimal");
	this.dsUpdate.addColumn("CD_CURRENCY", "string");
	this.dsUpdate.addColumn("NO_CREDIT", "string");
	this.dsUpdate.addColumn("YN_SPECIAL", "string");
	this.dsUpdate.addColumn("DT_PROOF", "string");
	this.dsUpdate.addColumn("YN_APPR", "string");
	this.dsUpdate.addColumn("YN_BADDEBT", "string");
	this.dsUpdate.addColumn("CK_OMIT", "string");
	this.dsUpdate.addColumn("CD_TRADE", "string");
	this.dsUpdate.addColumn("NO_SLIP", "string");
	this.dsUpdate.addColumn("DS_REM", "string");
	this.dsUpdate.addColumn("ID_UPDATE", "string");
	this.dsUpdate.addColumn("NO_VAT", "string");
	this.dsUpdate.addColumn("TY_ISSUE", "string");
	this.dsUpdate.addColumn("CK_DELAY", "string");
	this.dsUpdate.addColumn("NO_CASHBILL", "string");

	this.dsDelete = new Dataset();
	this.dsDelete.addColumn("NO_VAT", "string");
	
	this.dsSelectUser = new Dataset();
	this.dsSelectUser.addColumn("ID_USER", "string");
	this.dsSelectUser.addColumn("CD_DEPT", "string");
}

/************************************************************************
 * 컨트롤 이벤트
 ************************************************************************/
 /*
  *	조회 버튼
  */
this.fnSelect = function(vat) {
	
	this.dsList.set_enableevent(false);
	this.dsList.clearData();
	
	this.dsSelect.clearData();
	this.dsSelect.addRow();
	this.dsSelect.setColumn(0, "NO_VAT", this.dsSearch.getColumn(0, "NO_VAT"));
	this.dsSelect.setColumn(0, "IN_CD_SLIP", this.dsSearch.getColumn(0, "IN_CD_SLIP"));
	
	this.dsSelectVat.clearData();
	this.dsSelectVat.addRow();
	this.dsSelectVat.setColumn(0, "IN_CD_SLIP", this.dsSearch.getColumn(0, "IN_CD_SLIP"))
	
	var strSvcId    = "select";
	var strSvcType  = "grid";
	var inProc		= "_dsProc";
	var inData      = "select=dsSelect";
	var outData     = "dsList=select0";
	
	if(!this.gfnIsNull(vat))
	{
		inData = "select_vat=dsSelectVat";
		outData = "dsList=select_vat";
	}
	
	var strArg      = "";
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// trabsaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
	
}

 /*
 *	입력 버튼
 */
this.fnAdd = function() {
	

}

 /*
 *	저장 버튼
 */
this.fnSave = function() {
	if (!this.gfnDataValidate(this.dsList, this.dsRequired)) return;
	
	if(this.dsSearch.getColumn(0, "IUD_FLAG") != "S")
	{
		if(this.pGUBUN != "")
		{
			this.pGUBUN = {};
			this.pGUBUN.NO_VAT 		 = this.dsList.getColumn(0,"NO_VAT");
			this.pGUBUN.CD_DEPT_ACNT = this.dsList.getColumn(0,"CD_DEPT_ACNT");
			this.pGUBUN.DS_DEPT_ACNT = this.dsList.getColumn(0,"DS_DEPT_ACNT");
			this.pGUBUN.TY_SALEBUY   = this.dsList.getColumn(0,"TY_SALEBUY");
			this.pGUBUN.CD_VATPROOF  = this.dsList.getColumn(0,"CD_VATPROOF");
			this.pGUBUN.TY_VATPROOF  = this.dsList.getColumn(0,"TY_VATPROOF");
			this.pGUBUN.TY_VATTUJA   = this.dsList.getColumn(0,"TY_VATTUJA");
			this.pGUBUN.TY_VATBGJE   = this.dsList.getColumn(0,"TY_VATBGJE");
			this.pGUBUN.CD_ACCOUNT   = this.dsList.getColumn(0,"CD_ACCOUNT");
			this.pGUBUN.DS_ACCOUNT   = this.dsList.getColumn(0,"DS_ACCOUNT");
			this.pGUBUN.TY_VENDOR    = this.dsList.getColumn(0,"TY_VENDOR");
			this.pGUBUN.CD_VENDOR    = this.dsList.getColumn(0,"CD_VENDOR");
			this.pGUBUN.DS_VENDOR    = this.dsList.getColumn(0,"DS_VENDOR");
			this.pGUBUN.TY_PERCORP   = this.dsList.getColumn(0,"TY_PERCORP");
			this.pGUBUN.YN_SERVICE   = this.dsList.getColumn(0,"YN_SERVICE");
			this.pGUBUN.CD_SERVICE   = this.dsList.getColumn(0,"CD_SERVICE");
			this.pGUBUN.AM_SUPPLY    = nexacro.toNumber(this.dsList.getColumn(0,"AM_SUPPLY"),0);
			this.pGUBUN.AM_VAT       = nexacro.toNumber(this.dsList.getColumn(0,"AM_VAT"),0);
			this.pGUBUN.AM_FOREIGN   = nexacro.toNumber(this.dsList.getColumn(0,"AM_FOREIGN"),0);
			this.pGUBUN.CD_CURRENCY  = this.dsList.getColumn(0,"CD_CURRENCY");
			this.pGUBUN.AM_SERVICE   = nexacro.toNumber(this.dsList.getColumn(0,"AM_SERVICE"),0);
			this.pGUBUN.NO_CREDIT    = this.dsList.getColumn(0,"NO_CREDIT");
			this.pGUBUN.YN_SPECIAL   = this.dsList.getColumn(0,"YN_SPECIAL");
			this.pGUBUN.DT_PROOF     = this.dsList.getColumn(0,"DT_PROOF");
			this.pGUBUN.DS_REM       = this.dsList.getColumn(0,"DS_REM");
			this.pGUBUN.YN_BADDEBT   = this.dsList.getColumn(0,"YN_BADDEBT");
			this.pGUBUN.CK_OMIT      = this.dsList.getColumn(0,"CK_OMIT");
			this.pGUBUN.TY_ISSUE     = this.dsList.getColumn(0,"TY_ISSUE");
			this.pGUBUN.CK_DELAY     = this.dsList.getColumn(0,"CK_DELAY");
			this.pGUBUN.USER_CREDIT  = this.dsList.getColumn(0,"USER_CREDIT");
			this.pGUBUN.NO_SJC       = this.dsList.getColumn(0,"NO_SJC");
			this.pGUBUN.NO_CASHBILL  = this.dsList.getColumn(0,"NO_CASHBILL");
			this.pGUBUN.PROOF_URL    = this.dsList.getColumn(0,"PROOF_URL");
			this.pGUBUN.DT_ACCOUNT   = this.dsList.getColumn(0,"DT_ACCOUNT");
			this.pGUBUN.blsSave	  	 = true;

			this.getParentContext().close(JSON.stringify(this.pGUBUN));
		}
		else
		{
			this.pGUBUN = {};
			this.pGUBUN.blsSave = true;
			this.fnSaveData();
		}
	}
	else
	{
		this.pGUBUN = {};
		this.pGUBUN.blsSave = false;
		this.getParentContext().close(JSON.stringify(this.pGUBUN));
	}
	
	
}

this.fnSaveData = function()
{
	this.dsInsert.clearData();
	this.dsUpdate.clearData();
	this.dsDelete.clearData();
	
	switch(this.dsSearch.getColumn(0, "IUD_FLAG"))
	{
		case "I" :
			var nrow = this.dsInsert.addRow();
			this.dsInsert.setColumn(nrow, "CD_VATDEPT_ACNT", this.dsList.getColumn(0, "CD_DEPT_ACNT"));
			this.dsInsert.setColumn(nrow, "TY_SALEBUY", this.dsList.getColumn(0, "TY_SALEBUY"));
			this.dsInsert.setColumn(nrow, "CD_VATPROOF", this.dsList.getColumn(0, "CD_VATPROOF"));
			this.dsInsert.setColumn(nrow, "TY_VATPROOF", this.dsList.getColumn(0, "TY_VATPROOF"));
			this.dsInsert.setColumn(nrow, "TY_VATTUJA", this.dsList.getColumn(0, "TY_VATTUJA"));
			this.dsInsert.setColumn(nrow, "TY_VATBGJE", this.dsList.getColumn(0, "TY_VATBGJE"));
			this.dsInsert.setColumn(nrow, "CD_VATACCOUNT", this.dsList.getColumn(0, "CD_ACCOUNT"));
			this.dsInsert.setColumn(nrow, "TY_VATVENDOR", this.dsList.getColumn(0, "TY_VATVENDOR"));
			this.dsInsert.setColumn(nrow, "CD_VATVENDOR", this.dsList.getColumn(0, "CD_VATVENDOR"));
			this.dsInsert.setColumn(nrow, "DS_VATVENDOR", this.dsList.getColumn(0, "DS_VATVENDOR"));
			this.dsInsert.setColumn(nrow, "TY_PERCORP", this.dsList.getColumn(0, "TY_PERCORP"));
			this.dsInsert.setColumn(nrow, "YN_SERVICE", this.dsList.getColumn(0, "YN_SERVICE"));
			this.dsInsert.setColumn(nrow, "CD_SERVICE", this.dsList.getColumn(0, "CD_SERVICE"));
			this.dsInsert.setColumn(nrow, "AM_SUPPLY",  nexacro.toNumber(this.dsList.getColumn(0, "AM_SUPPLY"),0));
			this.dsInsert.setColumn(nrow, "AM_VAT",  nexacro.toNumber(this.dsList.getColumn(0, "AM_VAT"),0));
			this.dsInsert.setColumn(nrow, "AM_FOREIGN",  nexacro.toNumber(this.dsList.getColumn(0, "AM_FOREIGN"),0));
			this.dsInsert.setColumn(nrow, "AM_SERVICE", nexacro.toNumber(this.dsList.getColumn(0, "AM_SERVICE"),0));
			this.dsInsert.setColumn(nrow, "CD_CURRENCY", this.dsList.getColumn(0, "CD_CURRENCY"));
			this.dsInsert.setColumn(nrow, "NO_CREDIT", this.dsList.getColumn(0, "NO_CREDIT"));
			this.dsInsert.setColumn(nrow, "YN_SPECIAL", this.dsList.getColumn(0, "YN_SPECIAL"));
			this.dsInsert.setColumn(nrow, "DT_PROOF", this.dsList.getColumn(0, "DT_PROOF"));
			this.dsInsert.setColumn(nrow, "YN_APPR", this.dsList.getColumn(0, "YN_APPR"));
			this.dsInsert.setColumn(nrow, "YN_BADDEBT", this.dsList.getColumn(0, "YN_BADDEBT"));
			this.dsInsert.setColumn(nrow, "CK_OMIT", this.dsList.getColumn(0, "CK_OMIT"));
			this.dsInsert.setColumn(nrow, "CD_TRADE", this.dsList.getColumn(0, "CD_TRADE"));
			this.dsInsert.setColumn(nrow, "NO_SLIP", this.dsList.getColumn(0, "NO_SLIP"));
			this.dsInsert.setColumn(nrow, "DS_REM", this.dsList.getColumn(0, "DS_REM"));
			this.dsInsert.setColumn(nrow, "ID_INSERT", this.AuthClient.ID_USER);
			this.dsInsert.setColumn(nrow, "TY_ISSUE", this.dsList.getColumn(0, "TY_ISSUE"));
			this.dsInsert.setColumn(nrow, "CK_DELAY", this.dsList.getColumn(0, "CK_DELAY"));
			this.dsInsert.setColumn(nrow, "NO_CASHBILL", this.dsList.getColumn(0, "NO_CASHBILL"));
		break;
		
		case "U" :
			var nrow = this.dsUpdate.addRow();
			this.dsUpdate.setColumn(nrow, "CD_VATDEPT_ACNT", this.dsList.getColumn(0, "CD_DEPT_ACNT"));
			this.dsUpdate.setColumn(nrow, "TY_SALEBUY", this.dsList.getColumn(0, "TY_SALEBUY"));
			this.dsUpdate.setColumn(nrow, "CD_VATPROOF", this.dsList.getColumn(0, "CD_VATPROOF"));
			this.dsUpdate.setColumn(nrow, "TY_VATPROOF", this.dsList.getColumn(0, "TY_VATPROOF"));
			this.dsUpdate.setColumn(nrow, "TY_VATTUJA", this.dsList.getColumn(0, "TY_VATTUJA"));
			this.dsUpdate.setColumn(nrow, "TY_VATBGJE", this.dsList.getColumn(0, "TY_VATBGJE"));
			this.dsUpdate.setColumn(nrow, "CD_VATACCOUNT", this.dsList.getColumn(0, "CD_ACCOUNT"));
			this.dsUpdate.setColumn(nrow, "TY_VATVENDOR", this.dsList.getColumn(0, "TY_VATVENDOR"));
			this.dsUpdate.setColumn(nrow, "CD_VATVENDOR", this.dsList.getColumn(0, "CD_VATVENDOR"));
			this.dsUpdate.setColumn(nrow, "DS_VATVENDOR", this.dsList.getColumn(0, "DS_VATVENDOR"));
			this.dsUpdate.setColumn(nrow, "TY_PERCORP", this.dsList.getColumn(0, "TY_PERCORP"));
			this.dsUpdate.setColumn(nrow, "YN_SERVICE", this.dsList.getColumn(0, "YN_SERVICE"));
			this.dsUpdate.setColumn(nrow, "CD_SERVICE", this.dsList.getColumn(0, "CD_SERVICE"));
			this.dsUpdate.setColumn(nrow, "AM_SUPPLY", nexacro.toNumber(this.dsList.getColumn(0, "AM_SUPPLY"),0));
			this.dsUpdate.setColumn(nrow, "AM_VAT", nexacro.toNumber(this.dsList.getColumn(0, "AM_VAT"),0));
			this.dsUpdate.setColumn(nrow, "AM_FOREIGN", nexacro.toNumber(this.dsList.getColumn(0, "AM_FOREIGN"),0));
			this.dsUpdate.setColumn(nrow, "AM_SERVICE", nexacro.toNumber(this.dsList.getColumn(0, "AM_SERVICE"),0));
			this.dsUpdate.setColumn(nrow, "CD_CURRENCY", this.dsList.getColumn(0, "CD_CURRENCY"));
			this.dsUpdate.setColumn(nrow, "NO_CREDIT", this.dsList.getColumn(0, "NO_CREDIT"));
			this.dsUpdate.setColumn(nrow, "YN_SPECIAL", this.dsList.getColumn(0, "YN_SPECIAL"));
			this.dsUpdate.setColumn(nrow, "DT_PROOF", this.dsList.getColumn(0, "DT_PROOF"));
			this.dsUpdate.setColumn(nrow, "YN_APPR", this.dsList.getColumn(0, "YN_APPR"));
			this.dsUpdate.setColumn(nrow, "YN_BADDEBT", this.dsList.getColumn(0, "YN_BADDEBT"));
			this.dsUpdate.setColumn(nrow, "CK_OMIT", this.dsList.getColumn(0, "CK_OMIT"));
			this.dsUpdate.setColumn(nrow, "CD_TRADE", this.dsList.getColumn(0, "CD_TRADE"));
			this.dsUpdate.setColumn(nrow, "NO_SLIP", this.dsList.getColumn(0, "NO_SLIP"));
			this.dsUpdate.setColumn(nrow, "DS_REM", this.dsList.getColumn(0, "DS_REM"));
			this.dsUpdate.setColumn(nrow, "ID_UPDATE", this.AuthClient.ID_USER);
			this.dsUpdate.setColumn(nrow, "NO_VAT", this.dsList.getColumn(0, "NO_VAT"));
			this.dsUpdate.setColumn(nrow, "TY_ISSUE", this.dsList.getColumn(0, "TY_ISSUE"));
			this.dsUpdate.setColumn(nrow, "CK_DELAY", this.dsList.getColumn(0, "CK_DELAY"));
			this.dsUpdate.setColumn(nrow, "NO_CASHBILL", this.dsList.getColumn(0, "NO_CASHBILL"));
		break;
		
		case "D" :
			var nrow = this.dsDelete.addRow();
			this.dsDelete.setColumn(nrow, "NO_VAT", this.dsList.getColumn(0, "NO_VAT"));
		break;
	}
	
	if (this.dsInsert.rowcount == 0 && this.dsUpdate.rowcount == 0 && this.dsDelete.rowcount == 0) return;
		
	var strSvcId    = "save";
	var strSvcType  = "save";
	var inProc		= "_dsProc";
	var inData      = "insert=dsInsert update=dsUpdate delete=dsDelete";
	var outData     = "";
	var strArg      = this.dsSearch.getColumn(0, "IUD_FLAG");
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
}

/*
 *	삭제 버튼
 */
this.fnDel = function() {
	//this.gfnGridDel(this.dxGrid);
}


/*
 *	엑셀 버튼
 */
this.fnExcel = function() {
	//this.gfnExcelExport(this.dxGrid);
}

/*
 *	출력 버튼
 */
this.fnPrint = function() {
}
/************************************************************************
 * Validate
 ************************************************************************/
this.fnSelectValidate = function() {
	var validate = true;

	return validate;
};
/************************************************************************
 * 콜백 이벤트
 ************************************************************************/
/*
 *	콜백 처리
*/
this.fnCallback = function(svcID, errorCode, errorMsg, args)
{
	if (svcID == "select") {
		if(this.dsList.rowcount > 0){
			this.fnSetCombo_TY_VATPROOF(this.dsList.getColumn(0, "TY_SALEBUY"), this.dsList.getColumn(0, "CD_VATPROOF"));
			this.fnSetTY_BGJE(this.dsList.getColumn(0, "TY_VATPROOF"));
			
			var arrVat = {};
			arrVat.YN_VAT = "Y";
			arrVat.CD_VATDEPT_ACNT = this.dsList.getColumn(0, "CD_DEPT_ACNT") + "|" + this.dsList.getColumn(0, "DS_DEPT_ACNT");
			arrVat.TY_SALEBUY = this.dsList.getColumn(0, "TY_SALEBUY");
			arrVat.CD_VATPROOF = this.dsList.getColumn(0, "CD_VATPROOF");
			arrVat.TY_VATPROOF = this.dsList.getColumn(0, "TY_VATPROOF");
			arrVat.TY_VATTUJA = this.dsList.getColumn(0, "TY_VATTUJA");
			arrVat.TY_VATBGJE = this.dsList.getColumn(0, "TY_VATBGJE");
			arrVat.CD_VATACCOUNT = this.dsList.getColumn(0, "CD_ACCOUNT") + "|" + this.dsList.getColumn(0, "DS_ACCOUNT");
			arrVat.TY_VATVENDOR = this.dsList.getColumn(0, "TY_VENDOR");
			arrVat.CD_VATVENDOR = this.dsList.getColumn(0, "CD_VENDOR");
			arrVat.DS_VATVENDOR = this.dsList.getColumn(0, "DS_VENDOR");
			arrVat.TY_PERCORP = this.dsList.getColumn(0, "TY_PERCORP");
			arrVat.YN_SERVICE = this.dsList.getColumn(0, "YN_SERVICE");
			arrVat.CD_SERVICE = this.dsList.getColumn(0, "CD_SERVICE");
			arrVat.AM_SUPPLY = nexacro.toNumber(this.dsList.getColumn(0, "AM_SUPPLY"),0);
			arrVat.AM_VAT = nexacro.toNumber(this.dsList.getColumn(0, "AM_VAT"),0);
			arrVat.AM_FOREIGN = nexacro.toNumber(this.dsList.getColumn(0, "AM_FOREIGN"),0);
			arrVat.CD_CURRENCY = this.dsList.getColumn(0, "CD_CURRENCY");
			arrVat.AM_SERVICE = nexacro.toNumber(this.dsList.getColumn(0, "AM_SERVICE"),0);
			arrVat.NO_CREDIT = this.dsList.getColumn(0, "NO_CREDIT");
			arrVat.YN_SPECIAL = this.dsList.getColumn(0, "YN_SPECIAL");
			arrVat.DT_PROOF = this.dsList.getColumn(0, "DT_PROOF");
			arrVat.DS_VATREM = this.dsList.getColumn(0, "DS_REM");
			arrVat.CK_OMIT = this.dsList.getColumn(0, "CK_OMIT");
			arrVat.CK_BADDEBT = this.dsList.getColumn(0, "YN_BADDEBT");
			arrVat.TY_ISSUE = this.dsList.getColumn(0, "TY_ISSUE");
			arrVat.CK_DELAY = this.dsList.getColumn(0, "CK_DELAY");
			arrVat.USER_CREDIT = this.dsList.getColumn(0, "USER_CREDIT");
			arrVat.NO_SJC = this.dsList.getColumn(0, "NO_SJC");
			arrVat.NO_CASHBILL = this.dsList.getColumn(0, "NO_CASHBILL");
			
			this.fnVatInit(arrVat);
		}
		else
		{
			this.dsList.addRow();
		}
		//enable 처리
		//this.fnEnableComp();
		this.dsList.set_enableevent(true);
	}else if(svcID == "combo"){
		if(this.dsTY_VATBGJE.rowcount > 0){
			var nRow = this.dsTY_VATBGJE.insertRow(0);
			this.dsTY_VATBGJE.setColumn(nRow, "CD_CODE", "");
			this.dsTY_VATBGJE.setColumn(nRow, "DS_CODE", "선택");
		}
	}
	else if(svcID == "save"){
		this.fnCallback_callback = function()
		{
			this.pGUBUN.IUD_FLAG = this.dsSearch.getColumn(0, "IUD_FLAG");
			this.getParentContext().close(JSON.stringify(this.pGUBUN));
		}
		var msg = "저장이";
		
		if(args == "D") msg = "삭제가";
		msg += " 정상처리되었습니다.";
		this.gfnAlert(msg, "fnCallback_callback");
	}
	
}

/************************************************************************
 * 코드파인드 이벤트
 ************************************************************************/
this.fnBeforeUserDataSetParam = function(id, dsUserParam, nrow) {
	switch(id) {
		case "ccfCD_VATDEPT_ACNT":	
			dsUserParam.setColumn(nrow, "LV_DEPT", this.UserInfo.LEVLV_DEPT_ACNT);
			dsUserParam.setColumn(nrow, "CD_DEPT_UPPER", this.UserInfo.LEVCD_DEPT_ACNT);
			dsUserParam.setColumn(nrow, "YN_SLIPACCEPT", "Y");
			dsUserParam.setColumn(nrow, "CD_CORP", this.CD_CORP);
			dsUserParam.setColumn(nrow, "YR_ACCOUNT", "");
		break;
		case "ccfCD_ACCOUNT":
			dsUserParam.setColumn(nrow, "CD_CORP", this.CD_CORP);
		break;
		case "ccfCD_VENDOR":
			dsUserParam.setColumn(nrow, "TY_VENDOR", this.dsList.getColumn(0, "TY_VENDOR"));
			dsUserParam.setColumn(nrow, "CD_DEPT_REF", this.dsList.getColumn(0, "CD_DEPT_ACNT"));
			dsUserParam.setColumn(nrow, "ORIGENTTAX", "");
		break;
	}
	
	return true;
};

this.fnAfterCDTextChanged = function(id, codeFindData) {
	// 코드,명칭 외 추가 컬럼 처리
	var arr = codeFindData; //this.ccfCD_DEPT_ORG.form.SelectedData; 둘다 사용가능

	if (arr.length > 0) {
		if(id == "ccfCD_VENDOR")
		{
			this.dsList.setColumn(0, "NO_SJC" , arr[0]["NO_SJC"]);
		}
	}
	
	
}

/************************************************************************
 * 그리드 이벤트
 ************************************************************************/
 
/************************************************************************
 * 기타 이벤트
 ************************************************************************/
//취소버튼 클릭
this.btnCancel_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	this.getParentContext().close();
};

//확인버튼 클릭
this.btnConf_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	this.fnSave();
};

this.btnDel_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	this.gfnConfirm("삭제를 진행하시겠습니까?", "fnBtnDelCallback");

};

this.fnBtnDelCallback = function(strId, val)
{
	if(val == true)
	{
		this.dsSearch.setColumn(0, "IUD_FLAG", "D");
		this.fnSave();
	}
}

this.fnSetLoad = function()
{
	if(!this.gfnIsNull(this.getOwnerFrame().NO_VAT) || !this.gfnIsNull(this.getOwnerFrame().CD_SLIP))
	{
		this.dsSearch.setColumn(0, "IN_CD_SLIP", this.getOwnerFrame().CD_SLIP);
		this.dsSearch.setColumn(0, "NO_VAT", this.getOwnerFrame().NO_VAT);
		
		this.fnSelectData();
	}
	else if(!this.gfnIsNull(this.arrVatInfo))
	{
		this.fnVatInit(this.arrVatInfo);
		if(this.YN_VAT == "N")
		{
			// TODO : 체크박스 관련 함수 사용
		}
	}

	//발의부서/계정코드/증빙일자는 수정할수 없다.
	//단, 신규입력시는 아래내용 수정가능함
	//전표에서 입력된 경우에는 수정불가
	if(this.dsSearch.getColumn(0, "IUD_FLAG") == "U" && this.dsSearch.getColumn(0, "YN_DIRECT") != "직접")
	{
		this.divData.form.ccfCD_ACCOUNT.set_enable(false);
	}
	
	
	if(this.dsSearch.getColumn(0, "IUD_FLAG") == "S")
	{
		this.divData.form.ccfCD_ACCOUNT.set_enable(false);
		this.divData.form.ccfCD_VATDEPT_ACNT.set_enable(false);
		this.divData.form.rdoCD_VATPROOF.set_enable(false);
		this.divData.form.rdoTY_SALEBUY.set_enable(false);
		this.divData.form.ccboTY_VATPROOF.set_enable(false);
		this.divData.form.ccboCD_SERVICE.set_enable(false);
		this.divData.form.ccboTY_BGJE.set_enable(false);
		this.divData.form.ccboTY_VATTUJA.set_enable(false);
		
		this.divData.form.ctclDT_PROOF.set_enable(false);
		this.divData.form.rdoTY_PERCORP.set_enable(false);
		this.divData.form.ccboTY_VENDOR.set_enable(false);
		this.divData.form.ccfCD_VENDOR.set_enable(false);
		this.divData.form.cchkCK_OMIT.set_enable(false);
		this.divData.form.cchkCK_DELAY.set_enable(false);
		this.divData.form.cchkYN_SPECIAL.set_enable(false);
		this.divData.form.cchkCK_DELAY.set_enable(false);
		this.divData.form.ccfNO_CREDIT.set_enable(false);
		
		this.divData.form.ctxtAM_SUPPLY.set_readonly(true);
		this.divData.form.ctxtAM_VAT.set_readonly(true);
		this.divData.form.ctxtAM_SERVICE.set_readonly(true);
		this.divData.form.ctxtDS_REM.set_readonly(true);
		this.divData.form.ctxtNO_SJC.set_readonly(true);
		this.divData.form.ctxtNO_CASHBILL.set_readonly(true);
		
		this.btnDel.set_visible(false);
	}
	else if(this.dsSearch.getColumn(0, "IUD_FLAG") == "I")
	{
// 		this.dsList.clearData();
// 		this.dsList.addRow();
		
		//this.dsList.setColumn(0, "TY_SALEBUY", this.getOwnerFrame().TY_SALEBUY);
		
		if(this.pGUBUN == "")
		{
			if(this.dsList.getColumn(0, "TY_SALEBUY") == "I" || this.dsList.getColumn(0, "TY_SALEBUY") == "O")
			{
				this.dsList.setColumn(0, "CD_VATPROOF", "A");
			}
			else
			{
				this.dsList.setColumn(0, "CD_VATPROOF", "R");
			}
			
			this.dsList.setColumn(0, "CD_DEPT_ACNT", this.CD_DEPT);
			this.dsList.setColumn(0, "DS_DEPT_ACNT", this.DS_DEPT);
			this.dsList.setColumn(0, "DT_PROOF", this.gfnGetDate());
			this.dsList.setColumn(0, "AM_SERVICE", 0);
			this.dsList.setColumn(0, "AM_VAT", 0);
			this.divData.form.ctclDT_PROOF.set_enable(false);
		}
		
		this.btnDel.set_visible(false);
	}
	
	this.YN_CHANGE = "";
	
	if (this.pGUBUN != "")
	{
		this.btnDel.set_visible(false);

		this.divData.form.rdoTY_PERCORP.set_enable(false);
		this.divData.form.ccboTY_VENDOR.set_enable(false);
		this.divData.form.ccfCD_VENDOR.set_enable(false);
	}
}


this.dsList_onvaluechanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{
	if(e.oldvalue != e.newvalue)
	{
		if(e.columnid == "CD_VATPROOF")
		{
			var ty_salebuy = this.dsList.getColumn(0, "TY_SALEBUY");
			if(ty_salebuy == "Z" && e.newvalue != "R")
			{
				// 라디오버튼 이벤트 꼬이는 문제로 메시지 콜백에서 값 변환.
				this.gfnAlert("거래구분이 현금영수증인 경우 기타만 선택가능합니다.", "fnMsgCallback");
				return;
			}
			this.fnSetCombo_TY_VATPROOF(this.dsList.getColumn(0, "TY_SALEBUY"), this.dsList.getColumn(0, "CD_VATPROOF"));
			this.fnSetTY_BGJE(this.dsList.getColumn(0, "TY_VATPROOF"));
			this.fnSetTY_VATPROOF(this.dsList.getColumn(0, "TY_VATPROOF"));
		}
		else if(e.columnid == "TY_SALEBUY")
		{
			if(e.newvalue == "Z")
			{
				this.dsList.setColumn(0, "CD_VATPROOF", "R");
			}
			
			this.fnSetCombo_TY_VATPROOF(this.dsList.getColumn(0, "TY_SALEBUY"), this.dsList.getColumn(0, "CD_VATPROOF"));
			this.fnCD_VATPROOF_Checked();
			this.fnSetTY_BGJE(this.dsList.getColumn(0, "TY_VATPROOF"));
			this.fnSetTY_VATPROOF(this.dsList.getColumn(0, "TY_VATPROOF"));
		}
		else if(e.columnid == "TY_VATPROOF")
		{
			this.fnSetTY_BGJE(e.newvalue);
			this.fnSetTY_VATPROOF(e.newvalue);
		}
		else if(e.columnid == "TY_VATBGJE")
		{
			this.fnChangedTY_BGJE(this.dsList.getColumn(0, "TY_VATPROOF"), this.dsList.getColumn(0, "TY_VATBGJE"));
		}
		else if(e.columnid == "TY_PERCORP")
		{
			if(!this.gfnIsNull(e.newvalue))
				this.dsList.setColumn(0, "TY_VENDOR", e.newvalue);
		}
	}
};

this.fnMsgCallback = function()
{	
	this.dsList.setColumn(0, "CD_VATPROOF", "R");
	this.divData.form.resetScroll();
	this.fnSetTY_BGJE(this.dsList.getColumn(0, "TY_VATPROOF"));
	this.fnSetTY_VATPROOF(this.dsList.getColumn(0, "TY_VATPROOF"));
}	

this.fnCD_VATPROOF_Checked = function()
{
	this.divData.form.ctxtAM_SERVICE.set_readonly(true);
	
	if(this.dsList.getColumn(0, "TY_SALEBUY") == "I")
	{
		switch(this.dsList.getColumn(0, "CD_VATPROOF"))
		{
			case "A" :
				this.divData.form.ctxtAM_VAT.set_readonly(false);
				this.divData.form.ctclDT_PROOF.set_enable(true);
				this.divData.form.cchkCK_OMIT.set_enable(true);
				this.divData.form.cchkCK_DELAY.set_enable(true);
			break;
			case "B" :
				this.dsList.setColumn(0, "AM_VAT", 0);
				this.divData.form.ctxtAM_VAT.set_readonly(true);
				this.divData.form.ctclDT_PROOF.set_enable(true);
				this.divData.form.cchkCK_OMIT.set_enable(true);
				this.divData.form.cchkCK_DELAY.set_enable(true);
			break;
			case "R" :
				this.dsList.setColumn(0, "AM_VAT", 0);
				//this.divData.form.ctxtAM_VAT.set_readonly(true);
				this.divData.form.ctclDT_PROOF.set_enable(false);
				this.dsList.setColumn(0, "TY_ISSUE", "P");
				this.divData.form.cchkCK_OMIT.set_enable(false);
				this.divData.form.cchkYN_SPECIAL.set_enable(false);
				this.divData.form.cchkCK_DELAY.set_enable(false);
			break;
		}
		this.divData.form.ccboTY_VATTUJA.set_enable(false);
	}
	else if(this.dsList.getColumn(0, "TY_SALEBUY") == "O")
	{
		switch(this.dsList.getColumn(0, "CD_VATPROOF"))
		{
			case "A" :
				this.divData.form.ctxtAM_VAT.set_readonly(false);
				this.divData.form.ccboTY_VATTUJA.set_enable(true);
			break;
			case "B" :
				this.dsList.setColumn(0, "AM_VAT", 0);
				this.divData.form.ctxtAM_VAT.set_readonly(true);
				this.divData.form.ccboTY_VATTUJA.set_enable(true);
			break;
			case "R" :
				this.dsList.setColumn(0, "AM_VAT", 0);
				this.divData.form.ctxtAM_VAT.set_readonly(true);
				this.divData.form.ccboTY_VATTUJA.set_enable(false);
			break;
		}
	}
	else if(this.dsList.getColumn(0, "TY_SALEBUY") == "Z")
	{
		this.dsList.setColumn(0, "CD_VATPROOF", "R");
		this.divData.form.ccboTY_VATTUJA.set_enable(false);
	}
	
	switch(this.dsList.getColumn(0, "CD_VATPROOF"))
	{
		case "A" :
			this.dsList.setColumn(0, "NO_CREDIT", "");
			this.divData.form.ccfNO_CREDIT.form.DSTextBox.set_value("");
			this.divData.form.staNO_CREDIT.set_textDecoration("none");
			this.dsList.setColumn(0, "YN_SPECIAL", "N");
			this.divData.form.cchkYN_SPECIAL.set_enable(true);
			this.divData.form.ctxtAM_VAT.set_readonly(false);
			
			if(this.gfnNvl(this.dsList.getColumn(0, "AM_SUPPLY"), 0) != 0)
			{
				var vat = this.dsList.getColumn(0, "AM_SUPPLY") / 10;
				this.dsList.setColumn(0, "AM_VAT", vat);
				this.divData.form.ctclDT_PROOF.set_enable(true);
			}
		break;
		case "B" :
			this.dsList.setColumn(0, "NO_CREDIT", "");
			this.divData.form.ccfNO_CREDIT.form.DSTextBox.set_value("");
			this.divData.form.staNO_CREDIT.set_textDecoration("none");
			this.dsList.setColumn(0, "YN_SPECIAL", "N");
			this.divData.form.cchkYN_SPECIAL.set_enable(true);
			this.divData.form.ctxtAM_VAT.set_readonly(true);
			this.dsList.setColumn(0, "AM_SUPPLY", 0);
			this.divData.form.ctclDT_PROOF.set_enable(true);
		break;
		case "R" :
			this.dsList.setColumn(0, "YN_SPECIAL", "N");
			this.divData.form.cchkYN_SPECIAL.set_enable(false);
		
			if(this.dsList.getColumn(0, "TY_SALEBUY") == "I")
			{
				this.divData.form.ctclDT_PROOF.set_enable(true);
				
				if(this.dsList.getColumn(0, "CD_VATPROOF") == "R" && this.dsList.getColumn(0, "TY_VATPROOF") == "RJ")
				{
					this.divData.form.ctxtAM_VAT.set_readonly(false);
				}
				else
				{
					this.divData.form.ctxtAM_VAT.set_readonly(true);
				}
				
				this.divData.form.ctxtAM_SERVICE.set_readonly(true);
			}
			else if(this.dsList.getColumn(0, "TY_SALEBUY") == "O")
			{
				this.dsList.setColumn(0, "AM_VAT", 0);
				this.divData.form.ctclDT_PROOF.set_enable(true);
				this.divData.form.ctxtAM_VAT.set_readonly(true);
				this.divData.form.ctxtAM_SERVICE.set_readonly(true);
			}
			else if(this.dsList.getColumn(0, "TY_SALEBUY") == "Z")
			{
				this.divData.form.ctclDT_PROOF.set_enable(true);
				this.divData.form.ctxtAM_VAT.set_readonly(false);
				this.divData.form.ctxtAM_SERVICE.set_readonly(true);
			}
			
		break;
	}
}

this.fnSetCombo_TY_VATPROOF = function(ty_salebuy, cd_vatproof)
{
	var job = ty_salebuy + cd_vatproof;
	
	this.dsTY_VATPROOF.clearData();

	try
	{
		var nrow;
		this.divData.form.ccboTY_VATPROOF.set_enable(false);
		this.divData.form.ccboTY_VATTUJA.set_enable(false);
		this.divData.form.staTY_VATTUJA.set_textDecoration("none");
		switch(job)
		{
			case "IA" :
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "AA"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "일반세금계산서");
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "AC"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "매입불공제");				
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "AD"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "영세율");				
				this.divData.form.ccboTY_VATPROOF.set_enable(true);
				this.divData.form.ccboTY_VATPROOF.set_index(0);
				this.divData.form.ccboTY_VATTUJA.set_index(5);
			break;
			case "OA" :
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "AA"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "일반세금계산서");
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "AD"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "영세율");				
				this.divData.form.ccboTY_VATPROOF.set_enable(true);
				this.divData.form.ccboTY_VATTUJA.set_enable(true);
				this.divData.form.ccboTY_VATPROOF.set_index(0);
				this.divData.form.ccboTY_VATTUJA.set_index(7);
				this.divData.form.staTY_VATTUJA.set_textDecoration("underline");
			break;
			case "IB" :
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "BA"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "계산서");			
				this.divData.form.ccboTY_VATPROOF.set_enable(true);
				this.divData.form.ccboTY_VATPROOF.set_index(0);
				this.divData.form.ccboTY_VATTUJA.set_index(5);
			break;	
			case "OB" :
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "BA"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "계산서");			
				this.divData.form.ccboTY_VATPROOF.set_enable(true);
				this.divData.form.ccboTY_VATTUJA.set_enable(true);
				this.divData.form.ccboTY_VATPROOF.set_index(0);
				this.divData.form.ccboTY_VATTUJA.set_index(7);
				this.divData.form.staTY_VATTUJA.set_textDecoration("underline");
			break;
			case "IR" :
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "RJ"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "신용카드");			
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "RK"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "신용카드(매입불공제)");		
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "RH"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "기타영수증");		
				this.divData.form.ccboTY_VATPROOF.set_enable(true);
				this.divData.form.ccboTY_VATPROOF.set_index(0);
				this.divData.form.ccboTY_VATTUJA.set_index(5);
			break;
			case "OR" :		
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "RH"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "기타영수증");		
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "AF"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "영세율기타");		
				
				this.divData.form.ccboTY_VATPROOF.set_enable(true);
				this.divData.form.ccboTY_VATTUJA.set_enable(true);
				this.divData.form.ccboTY_VATPROOF.set_index(0);
				this.divData.form.ccboTY_VATTUJA.set_index(5);
				this.divData.form.staTY_VATTUJA.set_textDecoration("underline");
			break;
			case "ZR" :		
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "RJ"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "신용카드");			
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "RK"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "신용카드(매입불공제)");		
				nrow = this.dsTY_VATPROOF.addRow(); this.dsTY_VATPROOF.setColumn(nrow, "CD_CODE", "RH"); this.dsTY_VATPROOF.setColumn(nrow, "DS_CODE", "기타영수증");		
				this.divData.form.ccboTY_VATPROOF.set_index(2);
				this.divData.form.ccboTY_VATTUJA.set_index(5);
			break;
		}	
		
		if(this.dsSearch.getColumn(0, "IUD_FLAG") == "S")
		{
			this.divData.form.ccboTY_VATPROOF.set_enable(false);
			this.divData.form.ccboTY_VATTUJA.set_enable(false);
		}
		
		if(this.divData.form.staTY_VATTUJA.textDecoration == "underline")
		{
			if(this.dsRequired.findRow("CD_FIELD", "TY_VATTUJA") < 0)
			{
				var nrow = this.dsRequired.addRow();
				this.dsRequired.setColumn(nrow, "CD_FIELD", "TY_VATTUJA");
				this.dsRequired.setColumn(nrow, "DS_FIELD", "투자유형");
			}
		}
		else
		{
			if(this.dsRequired.findRow("CD_FIELD", "TY_VATTUJA") > -1)
			{
				this.dsRequired.deleteRow(this.dsRequired.findRow("CD_FIELD", "TY_VATTUJA"));
			}
		}

	}
	catch(e)
	{
		this.gfnAlert(e);
	}
	finally
	{
	}
}

this.fnSetTY_VATPROOF = function(TY_VATPROOF)
{
	this.divData.form.staNO_CREDIT.set_textDecoration("underline");
	this.divData.form.ccfNO_CREDIT.set_enable(false);
	this.divData.form.staNO_CREDIT.set_text("신용카드");
	this.divData.form.ctxtNO_CASHBILL.set_visible(false);
	this.divData.form.ccfNO_CREDIT.set_visible(true);
	
	switch(TY_VATPROOF)
	{
		case "AA" :
			if(this.dsList.getColumn(0, "TY_SALEBUY") == "I")
			{	
				this.divData.form.staTY_BGJE.set_text("안분구분");
				this.divData.form.staTY_BGJE.set_textDecoration("underline");
				this.divData.form.ccboTY_BGJE.set_enable(true);
				if(this.YN_ANBUN == "Y")
				{
					this.divData.form.ccboTY_BGJE.set_index(1);
				}
				else
				{
					this.divData.form.ccboTY_BGJE.set_index(0);
				}
			}
			else
			{
				this.divData.form.staTY_BGJE.set_textDecoration("none");
				this.divData.form.ccboTY_BGJE.set_enable(false);
				this.divData.form.ccboTY_BGJE.set_index(-1);
			}
		break;
		
		case "AD" :
			if(this.dsList.getColumn(0, "TY_SALEBUY") == "O")
			{
				this.divData.form.staTY_BGJE.set_text("안분구분");
				this.divData.form.staTY_BGJE.set_textDecoration("underline");
				this.divData.form.ccboTY_BGJE.set_enable(true);
				this.divData.form.ccboTY_BGJE.set_index(1);
				this.dsList.setColumn(0, "AM_VAT", 0);
			}
			else if(this.dsList.getColumn(0, "TY_SALEBUY") == "I")
			{
				this.divData.form.staTY_BGJE.set_text("안분구분");
				this.divData.form.staTY_BGJE.set_textDecoration("none");
				this.divData.form.ccboTY_BGJE.set_enable(false);
				this.divData.form.ccboTY_BGJE.set_index(-1);
				this.dsList.setColumn(0, "AM_VAT", 0);
			}
		break;
		case "AC" :
			this.divData.form.staTY_BGJE.set_text("매불구분");
			this.divData.form.staTY_BGJE.set_textDecoration("underline");
			this.divData.form.ccboTY_BGJE.set_enable(true);
			this.divData.form.ccboTY_BGJE.set_index(0);
		break;
		case "RJ" :
			this.divData.form.staTY_BGJE.set_text("세부증빙");
			this.divData.form.staTY_BGJE.set_textDecoration("underline");
			this.divData.form.ccboTY_BGJE.set_enable(true);
			this.divData.form.ccboTY_BGJE.set_index(0);
			this.divData.form.staNO_CREDIT.set_textDecoration("none");		
		break;		
		case "RK" :
			this.divData.form.staTY_BGJE.set_text("세부증빙");
			this.divData.form.staTY_BGJE.set_textDecoration("underline");
			this.divData.form.ccboTY_BGJE.set_enable(true);
			this.divData.form.ccboTY_BGJE.set_index(0);
			this.divData.form.staNO_CREDIT.set_textDecoration("none");		
		break;			
		case "BA" :
			this.divData.form.staTY_BGJE.set_text("세부증빙");
			this.divData.form.staTY_BGJE.set_textDecoration("underline");
			this.divData.form.ccboTY_BGJE.set_enable(true);
			this.divData.form.ccboTY_BGJE.set_index(0);
			this.divData.form.staNO_CREDIT.set_textDecoration("none");	
		break;	
		case "RH" :
			if(this.dsList.getColumn(0, "TY_SALEBUY") == "Z")
			{
				this.divData.form.staTY_BGJE.set_text("세부증빙");
				this.divData.form.staTY_BGJE.set_textDecoration("underline");
				this.divData.form.ccboTY_BGJE.set_index(0);
				this.divData.form.ccboTY_BGJE.set_enable(false);
				this.divData.form.staNO_CREDIT.set_textDecoration("none");	
				this.divData.form.staNO_CREDIT.set_text("현금영수증");
				this.divData.form.ctxtNO_CASHBILL.set_visible(true);
				this.divData.form.ccfNO_CREDIT.set_visible(false);
			}
			else
			{
				this.divData.form.staTY_BGJE.set_text("세부증빙");
				this.divData.form.staTY_BGJE.set_textDecoration("underline");
				this.divData.form.ccboTY_BGJE.set_enable(true);
				this.divData.form.ccboTY_BGJE.set_index(0);
				this.divData.form.staNO_CREDIT.set_textDecoration("none");	
				this.divData.form.staNO_CREDIT.set_text("카드번호");
			}
		break;	
		case "AF" :
			this.divData.form.staTY_BGJE.set_text("세부증빙");
			this.divData.form.staTY_BGJE.set_textDecoration("none");
			this.divData.form.ccboTY_BGJE.set_enable(false);
			this.divData.form.ccboTY_BGJE.set_index(-1);	
		break;	
		
		default:
			this.divData.form.staTY_BGJE.set_text("매불구분");
			this.divData.form.staTY_BGJE.set_textDecoration("none");
			this.divData.form.ccboTY_BGJE.set_enable(false);
			this.divData.form.ccboTY_BGJE.set_index(-1);	
		break;
	}
	
	switch(TY_VATPROOF)
	{
		case "RJ" :
			this.divData.form.ctxtAM_VAT.set_readonly(false);
		break;
		
		default : 
			this.divData.form.ctxtAM_VAT.set_readonly(false);
		break;
	}
	
	// TY_VATBGJE 안분구분 필수 체크 / 제거
	if(this.divData.form.staTY_BGJE.textDecoration == "underline")
	{
		if(this.dsRequired.findRow("CD_FIELD", "TY_VATBGJE") < 0)
		{
			var nrow = this.dsRequired.addRow();
			this.dsRequired.setColumn(nrow, "CD_FIELD", "TY_VATBGJE");
			this.dsRequired.setColumn(nrow, "DS_FIELD", "안분구분");
		}
	}
	else
	{
		if(this.dsRequired.findRow("CD_FIELD", "TY_VATBGJE") > -1)
		{
			this.dsRequired.deleteRow(this.dsRequired.findRow("CD_FIELD", "TY_VATBGJE"));
		}
	}
	
	this.fnChangedTY_BGJE(this.dsList.getColumn(0, "TY_VATPROOF"), this.dsList.getColumn(0, "TY_VATBGJE"));
}

this.fnSetTY_BGJE = function(TY_VATPROOF)
{
	this.dsTY_BGJE.clearData();
			
	for(var i = 0; i < this.dsTY_BGJE_TYPE.rowcount; i++)
	{
		if(TY_VATPROOF == this.dsTY_BGJE_TYPE.getColumn(i, "TY_VATPROOF"))
		{
			if(this.gfnNvl(this.dsTY_BGJE_TYPE.getColumn(i, "TY_SALEBUY"), this.dsList.getColumn(0, "TY_SALEBUY")) == this.dsList.getColumn(0, "TY_SALEBUY"))
			{
				var nrow = this.dsTY_BGJE.addRow();
				this.dsTY_BGJE.setColumn(nrow, "CD_CODE", this.dsTY_BGJE_TYPE.getColumn(i, "CD_CODE"));
				this.dsTY_BGJE.setColumn(nrow, "DS_CODE", this.dsTY_BGJE_TYPE.getColumn(i, "DS_CODE"));
			}
		}
	}

	if(this.gfnIsNull(this.dsList.getColumn(0, "TY_VATBGJE")))
	{
		this.divData.form.ccboTY_BGJE.set_index(0);
	}
}

this.fnChangedTY_BGJE = function(TY_VATPROOF, TY_BGJE)
{
	this.divData.form.ctxtAM_VAT.set_readonly(false);
	
	switch(TY_VATPROOF)
	{
		case "AA" :
			this.divData.form.ctclDT_PROOF.set_enable(true);
		break;
		
		case "BA" : 
			this.divData.form.ctclDT_PROOF.set_enable(true);
			this.dsList.setColumn(0, "AM_VAT", 0);
		break;
		
		default :
			this.dsList.setColumn(0, "AM_VAT", 0);
	}
	
	switch(TY_BGJE)
	{
		case "RJ0" :
		case "RJ1" :
		case "RJ3" :
			this.divData.form.ccfNO_CREDIT.set_enable(true);
			this.divData.form.staNO_CREDIT.set_textDecoration("none");
			this.dsList.setColumn(0, "AM_VAT", 0);
			this.divData.form.ctclDT_PROOF.set_enable(false);
		break;
		case "RJ2" :
			this.divData.form.ccfNO_CREDIT.set_enable(true);
			this.divData.form.staNO_CREDIT.set_textDecoration("none");
			this.dsList.setColumn(0, "AM_VAT", 0);
			this.divData.form.ctclDT_PROOF.set_enable(true);
		break;
		
		default :
			this.divData.form.staNO_CREDIT.set_textDecoration("underline");
			this.dsList.setColumn(0, "NO_CREDIT", "");
			this.divData.form.ccfNO_CREDIT.form.DSTextBox.set_value("");
			this.divData.form.ccfNO_CREDIT.set_enable(false);
		break;
	}
	
	if(TY_VATPROOF == "RH" && TY_BGJE == "RH1")
	{
		if(this.gfnNvl(this.dsList.getColumn(0, "AM_SUPPLY"),"").length != 0)
		{
			var vat = nexacro.toNumber(this.dsList.getColumn(0, "AM_SUPPLY"),0) / 10;
			this.dsList.setColumn(0, "AM_VAT", vat);
			this.divData.form.ctclDT_PROOF.set_enable(true);
		}
	}
	else if(TY_VATPROOF == "RH" && TY_BGJE != "RH1")
	{
		this.divData.form.ctclDT_PROOF.set_enable(false);
		this.dsList.setColumn(0, "AM_VAT", 0);	
	}
	
	if((TY_VATPROOF == "AA" && TY_BGJE == "AAZ") || (TY_VATPROOF == "BA" && TY_BGJE == "BAZ"))
	{
		this.dsList.setColumn(0, "AM_SUPPLY", 0);	
		this.dsList.setColumn(0, "AM_VAT", 0);	
	}
}

this.fnVatInit = function(pValue)
{
	if(this.dsList.rowcount < 1)
	{
		this.dsList.addRow();
	}
	
	if(this.gfnNvl(pValue.YN_VAT, "").trim() == "Y")
	{
		if(this.gfnNvl(pValue.TY_VATPROOF,"").trim() == "AA")
		{
			this.AM_SUPPLY_FIRST = nexacro.toNumber(this.gfnNvl(pValue.AM_SUPPLY,"0"),0);
		}
		else
		{
			this.AM_SUPPLY_FIRST = nexacro.toNumber(this.gfnNvl(pValue.AM_SUPPLY,"0"),0) + nexacro.toNumber(this.gfnNvl(pValue.AM_VAT,"0"),0);
		}
		
		var dept = this.gfnNvl(pValue.CD_VATDEPT_ACNT,"").trim().split("|");
		
		this.dsList.setColumn(0, "CD_DEPT_ACNT", dept[0]);
		this.dsList.setColumn(0, "DS_DEPT_ACNT", dept[1]);
		
		if(this.gfnNvl(pValue.AM_SUPPLY, "") == "")
		{
			this.dsList.setColumn(0, "AM_SUPPLY", 0);
		}
		else
		{
			this.dsList.setColumn(0, "AM_SUPPLY", nexacro.toNumber(pValue.AM_SUPPLY, 0));
		}
		
		this.dsList.setColumn(0, "CD_ACCOUNT", pValue.CD_ACCOUNT);
		this.dsList.setColumn(0, "DS_ACCOUNT", pValue.DS_ACCOUNT);
		
		this.dsList.setColumn(0, "CD_VATPROOF", this.gfnNvl(pValue.CD_VATPROOF,"").trim());
		this.dsList.setColumn(0, "TY_SALEBUY", this.gfnNvl(pValue.TY_SALEBUY, "Z").trim());
		this.dsList.setColumn(0, "TY_VATPROOF", this.gfnNvl(pValue.TY_VATPROOF,"").trim());
		this.dsList.setColumn(0, "TY_VATTUJA", this.gfnNvl(pValue.TY_VATTUJA,"").trim());
		this.dsList.setColumn(0, "TY_VATBGJE", this.gfnNvl(pValue.TY_VATBGJE,"").trim());
		this.dsList.setColumn(0, "TY_VENDOR", this.gfnNvl(pValue.TY_VATVENDOR,"").trim());
		this.dsList.setColumn(0, "TY_PERCORP", this.gfnNvl(pValue.TY_PERCORP,"").trim());
		this.dsList.setColumn(0, "CD_VENDOR", this.gfnNvl(pValue.CD_VATVENDOR,"").trim());
		this.dsList.setColumn(0, "DS_VENDOR", this.gfnNvl(pValue.DS_VATVENDOR,"").trim());
		if(this.gfnIsNull(this.dsList.getColumn(0, "NO_SJC")))
		{
			this.divData.form.ccfCD_VENDOR.form.fnCodeFindLoad();
		}
		this.dsList.setColumn(0, "CD_SERVICE", this.gfnNvl(pValue.CD_SERVICE,"").trim());
		this.dsList.setColumn(0, "AM_VAT", nexacro.toNumber(pValue.AM_VAT,0));
		this.dsList.setColumn(0, "AM_SERVICE", nexacro.toNumber(pValue.AM_SERVICE,0));
		this.dsList.setColumn(0, "NO_CREDIT", this.gfnNvl(pValue.NO_CREDIT,"").trim());
		this.divData.form.ccfNO_CREDIT.form.DSTextBox.set_value(this.gfnNvl(pValue.USER_CREDIT,"").trim());
		this.dsList.setColumn(0, "DT_PROOF", this.gfnNvl(pValue.DT_PROOF,"").trim());
		this.dsList.setColumn(0, "DS_REM", this.gfnNvl(pValue.DS_REM,"").trim());
		this.dsList.setColumn(0, "YN_SPECIAL", this.gfnNvl(pValue.YN_SPECIAL,"").trim());
		this.dsList.setColumn(0, "YN_BADDEBT", this.gfnNvl(pValue.CK_BADDEBT,"").trim());
		this.dsList.setColumn(0, "CK_OMIT", this.gfnNvl(pValue.CK_OMIT,"").trim());
		this.dsList.setColumn(0, "TY_ISSUE", this.gfnNvl(pValue.TY_ISSUE,"").trim());
		this.dsList.setColumn(0, "CK_DELAY", this.gfnNvl(pValue.CK_DELAY,"").trim());
	}
	else
	{
		this.AM_SUPPLY_FIRST = nexacro.toNumber(pValue.AM_SUPPLY,0);
		this.dsSearch.setColumn(0, "IUD_FLAG", "I");
		this.divData.form.ccfCD_VENDOR.set_enable(true);
		this.divData.form.ccboTY_VENDOR.set_enable(true);
		
		this.dsList.setColumn(0, "CD_DEPT_ACNT", this.gfnNvl(pValue.CD_DEPT_BE,"").trim());
		this.dsList.setColumn(0, "DS_DEPT_ACNT", this.gfnNvl(pValue.DS_DEPT,"").trim());
		this.dsList.setColumn(0, "CD_ACCOUNT", this.gfnNvl(pValue.CD_ACCOUNT,"").trim());
		this.dsList.setColumn(0, "DS_ACCOUNT", this.gfnNvl(pValue.DS_ACCOUNT,"").trim());
		this.dsList.setColumn(0, "TY_SALEBUY", this.gfnNvl(pValue.TY_SALEBUY,"").trim());
		this.dsList.setColumn(0, "CD_VATPROOF", "A");
		this.dsList.setColumn(0, "AM_SUPPLY", nexacro.toNumber(pValue.AM_SUPPLY,0));
		
		if(nexacro.toNumber(pValue.AM_SUPPLY,0) == 0)
		{
			this.dsList.setColumn(0, "AM_VAT", 0);
			this.divData.form.ctclDT_PROOF.set_enable(false);
		}
		else
		{
			if(this.dsSearch.getColumn(0, "IDU_FLAG") != "S" && this.dsList.getColumn(0, "CD_VATPROOF") == "A"
			&& nexacro.toNumber(pValue.AM_SUPPLY,0) != 0 && (nexacro.toNumber(this.dsList.getColumn(0, "AM_VAT"),0) == 0) )
			{
				var am_vat = nexacro.toNumber(pValue.AM_SUPPLY,0) / 10;
				this.dsList.setColumn(0, "AM_VAT", am_vat);
				this.divData.form.ctclDT_PROOF.set_enable(true);
			}	
		}
		
		this.dsList.setColumn(0, "AM_SERVICE", nexacro.toNumber(pValue.AM_SERVICE,0));		
		this.dsList.setColumn(0, "TY_VENDOR", this.gfnNvl(pValue.TY_VATVENDOR,"").trim());
		this.dsList.setColumn(0, "TY_PERCORP", this.gfnNvl(pValue.TY_PERCORP,"").trim());
		this.dsList.setColumn(0, "CD_VENDOR", this.gfnNvl(pValue.CD_VATVENDOR,"").trim());
		this.dsList.setColumn(0, "DS_VENDOR", this.gfnNvl(pValue.DS_VATVENDOR,"").trim());
		if(this.gfnIsNull(this.dsList.getColumn(0, "NO_SJC")))
		{
			this.divData.form.ccfCD_VENDOR.form.fnCodeFindLoad();		
		}
		this.dsList.setColumn(0, "YN_SERVICE", this.gfnNvl(pValue.YN_SERVICE,"").trim());
		this.dsList.setColumn(0, "DT_PROOF", this.gfnNvl(pValue.DT_PROOF,"").trim());
		this.dsList.setColumn(0, "DS_REM", this.gfnNvl(pValue.DS_REM,"").trim());
		this.dsList.setColumn(0, "TY_ISSUE", "E");
		this.btnDel.set_visible(false);
	}
}

this.fnSelectData = function()
{
	if(!this.gfnIsNull(this.dsSearch.getColumn(0, "NO_VAT")))
	{
		this.FormBtns.Select.click();
	}
	else
	{
		this.fnSelect("N");
	}
}]]></Script>
    <Objects>
      <Dataset id="dsList" onvaluechanged="dsList_onvaluechanged">
        <ColumnInfo>
          <Column id="NO_VAT" type="STRING" size="256"/>
          <Column id="CD_DEPT_ACNT" type="STRING" size="256"/>
          <Column id="DS_DEPT_ACNT" type="STRING" size="256"/>
          <Column id="TY_SALEBUY" type="STRING" size="256"/>
          <Column id="CD_VATPROOF" type="STRING" size="256"/>
          <Column id="TY_VATPROOF" type="STRING" size="256"/>
          <Column id="TY_VATTUJA" type="STRING" size="256"/>
          <Column id="TY_VATBGJE" type="STRING" size="256"/>
          <Column id="CD_ACCOUNT" type="STRING" size="256"/>
          <Column id="DS_ACCOUNT" type="STRING" size="256"/>
          <Column id="TY_VENDOR" type="STRING" size="256"/>
          <Column id="CD_VENDOR" type="STRING" size="256"/>
          <Column id="DS_VENDOR" type="STRING" size="256"/>
          <Column id="TY_PERCORP" type="STRING" size="256"/>
          <Column id="YN_SERVICE" type="STRING" size="256"/>
          <Column id="CD_SERVICE" type="STRING" size="256"/>
          <Column id="AM_SUPPLY" type="BIGDECIMAL" size="256"/>
          <Column id="AM_VAT" type="BIGDECIMAL" size="256"/>
          <Column id="AM_FOREIGN" type="BIGDECIMAL" size="256"/>
          <Column id="CD_CURRENCY" type="STRING" size="256"/>
          <Column id="AM_SERVICE" type="INT" size="256"/>
          <Column id="NO_CREDIT" type="STRING" size="256"/>
          <Column id="YN_SPECIAL" type="STRING" size="256"/>
          <Column id="DT_PROOF" type="STRING" size="256"/>
          <Column id="DS_REM" type="STRING" size="256"/>
          <Column id="YN_BADDEBT" type="STRING" size="256"/>
          <Column id="CK_OMIT" type="STRING" size="256"/>
          <Column id="TY_ISSUE" type="STRING" size="256"/>
          <Column id="CK_DELAY" type="STRING" size="256"/>
          <Column id="USER_CREDIT" type="STRING" size="256"/>
          <Column id="NO_SJC" type="STRING" size="256"/>
          <Column id="NO_CASHBILL" type="STRING" size="256"/>
          <Column id="PROOF_URL" type="STRING" size="256"/>
          <Column id="DT_ACCOUNT" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="_dsProc">
        <ColumnInfo>
          <Column id="TARGET" type="STRING" size="256"/>
          <Column id="SP" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="SP">DHVPR_VAT_SELECT</Col>
            <Col id="TARGET">select</Col>
          </Row>
          <Row>
            <Col id="SP">DHVPR_VAT_INSERT</Col>
            <Col id="TARGET">insert</Col>
          </Row>
          <Row>
            <Col id="SP">DHVPR_VAT_UPDATE</Col>
            <Col id="TARGET">update</Col>
          </Row>
          <Row>
            <Col id="SP">DHVPR_VAT_DELETE</Col>
            <Col id="TARGET">delete</Col>
          </Row>
          <Row>
            <Col id="TARGET">select_vat</Col>
            <Col id="SP">DHAPR_VAT_SELECT</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsSearch">
        <ColumnInfo>
          <Column id="IN_CD_SLIP" type="STRING" size="256"/>
          <Column id="NO_VAT" type="STRING" size="256"/>
          <Column id="IUD_FLAG" type="STRING" size="256"/>
          <Column id="YN_DIRECT" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="dsTY_SALEBUY">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="DS_CODE">매입</Col>
            <Col id="CD_CODE">I</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">매출</Col>
            <Col id="CD_CODE">O</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">현금영수증</Col>
            <Col id="CD_CODE">Z</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsCD_VATPROOF">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">A</Col>
            <Col id="DS_CODE">세금계산서</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">B</Col>
            <Col id="DS_CODE">계산서</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">R</Col>
            <Col id="DS_CODE">기타</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsTY_VATPROOF">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="DS_CODE">일반세금계산서</Col>
            <Col id="CD_CODE">AA</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">매입불공제</Col>
            <Col id="CD_CODE">AC</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">영세율</Col>
            <Col id="CD_CODE">AD</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">계산서</Col>
            <Col id="CD_CODE">BA</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">일반영수증</Col>
            <Col id="CD_CODE">RH</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">신용카드</Col>
            <Col id="CD_CODE">RJ</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsTY_BGJE">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="DS_CODE">필요적 기재사항 누락 등</Col>
            <Col id="CD_CODE">ACD</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">사업과관련없는지출</Col>
            <Col id="CD_CODE">ACB</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">비사업용소형자동차분</Col>
            <Col id="CD_CODE">ACA</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">접대비 및 이와 유사한 비용 관련</Col>
            <Col id="CD_CODE">ACE</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">면세사업관련분</Col>
            <Col id="CD_CODE">ACC</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">토지의 자본적 지출 관련</Col>
            <Col id="CD_CODE">ACF</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">ACG</Col>
            <Col id="DS_CODE">사업자등록 전 매입세액</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">ACH</Col>
            <Col id="DS_CODE">금거래계좌 미사용 관련 매입세액</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsCD_SERVICE">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="DS_CODE">해당사항없음</Col>
            <Col id="CD_CODE">BA</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">일반접대비</Col>
            <Col id="CD_CODE">BB</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">해외접대비</Col>
            <Col id="CD_CODE">BC</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">소액접대비</Col>
            <Col id="CD_CODE">BD</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsTY_VATTUJA">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">TA</Col>
            <Col id="DS_CODE">수입금액제외:(고정자산매각)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TB</Col>
            <Col id="DS_CODE">수입금액제외:(전기요금외)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TC</Col>
            <Col id="DS_CODE">수입금액제외:(간주임대료)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TD</Col>
            <Col id="DS_CODE">수입금액제외:(보험료)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TE</Col>
            <Col id="DS_CODE">수입금액제외:(수도요금전력기금)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TF</Col>
            <Col id="DS_CODE">수입금액제외:(기타)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TS</Col>
            <Col id="DS_CODE">수입금액제외:(공동도급)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TL</Col>
            <Col id="DS_CODE">공사:(공사수입)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TM</Col>
            <Col id="DS_CODE">공사:(기타)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TN</Col>
            <Col id="DS_CODE">용역:(용역수입)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TO</Col>
            <Col id="DS_CODE">용역:(기타)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TP</Col>
            <Col id="DS_CODE">임대:(임대료수입)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">TQ</Col>
            <Col id="DS_CODE">임대:(기타)</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsTY_VENDOR">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="DS_CODE">일반</Col>
            <Col id="CD_CODE">F</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">금융</Col>
            <Col id="CD_CODE">B</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">개인</Col>
            <Col id="CD_CODE">P</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">기타</Col>
            <Col id="CD_CODE">X</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">S</Col>
            <Col id="DS_CODE">사번</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsTY_ISSUE">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="DS_CODE">전자발행</Col>
            <Col id="CD_CODE">E</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">일반발행</Col>
            <Col id="CD_CODE">P</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsRequired">
        <ColumnInfo>
          <Column id="CD_FIELD" type="STRING" size="256"/>
          <Column id="DS_FIELD" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_FIELD">CD_VATDEPT_ACNT</Col>
            <Col id="DS_FIELD">발의부서</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">CD_ACCOUNT</Col>
            <Col id="DS_FIELD">계정코드</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">TY_SALEBUY</Col>
            <Col id="DS_FIELD">거래구분</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">CD_VATPROOF</Col>
            <Col id="DS_FIELD">증빙코드</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">TY_VATPROOF</Col>
            <Col id="DS_FIELD">증빙구분</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">TY_VATBGJE</Col>
            <Col id="DS_FIELD">안분구분</Col>
          </Row>
          <!--
          <Row>
            <Col id="CD_FIELD">TY_BID</Col>
            <Col id="DS_FIELD">선정방법</Col>
          </Row>
          -->
          <Row>
            <Col id="DS_FIELD">투자유형</Col>
            <Col id="CD_FIELD">TY_VATTUJA</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">DT_PROOF</Col>
            <Col id="DS_FIELD">증빙일자</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">AM_SUPPLY</Col>
            <Col id="DS_FIELD">공급가액</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">AM_VAT</Col>
            <Col id="DS_FIELD">부가세액</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">DS_REM</Col>
            <Col id="DS_FIELD">적요</Col>
          </Row>
          <Row>
            <Col id="CD_FIELD">TY_VENDOR</Col>
            <Col id="DS_FIELD">거래처구분</Col>
          </Row>
          <!--
          <Row>
            <Col id="CD_FIELD">CD_VENDOR</Col>
            <Col id="DS_FIELD">거래처</Col>
          </Row>
		  -->
        </Rows>
      </Dataset>
      <Dataset id="dsTY_PERCORP">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="DS_CODE">사업등록</Col>
            <Col id="CD_CODE">F</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">주민등록</Col>
            <Col id="CD_CODE">P</Col>
          </Row>
          <!-- .NET에 비활성화 처리 되어있음.
          <Row>
            <Col id="DS_CODE">기타</Col>
            <Col id="CD_CODE">N</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">사번</Col>
            <Col id="CD_CODE">S</Col>
          </Row>
		  -->
        </Rows>
      </Dataset>
      <Dataset id="dsTY_BGJE_TYPE">
        <ColumnInfo>
          <Column id="TY_VATPROOF" type="STRING" size="256"/>
          <Column id="TY_SALEBUY" type="STRING" size="256"/>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="TY_VATPROOF">AA</Col>
            <Col id="CD_CODE">AAB</Col>
            <Col id="DS_CODE">부가세안분제외(100%공제)</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">AA</Col>
            <Col id="CD_CODE">AAA</Col>
            <Col id="DS_CODE">부가세안분대상</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">AD</Col>
            <Col id="CD_CODE">AAB</Col>
            <Col id="DS_CODE">부가세안분제외(100%공제)</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">AD</Col>
            <Col id="CD_CODE">AAA</Col>
            <Col id="DS_CODE">부가세안분대상</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">AC</Col>
            <Col id="CD_CODE">ACD</Col>
            <Col id="DS_CODE">필요적 기재사항 누락 등</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">AC</Col>
            <Col id="CD_CODE">ACB</Col>
            <Col id="DS_CODE">사업과관련없는지출</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">AC</Col>
            <Col id="CD_CODE">ACA</Col>
            <Col id="DS_CODE">비사업용소형자동차분</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">AC</Col>
            <Col id="CD_CODE">ACE</Col>
            <Col id="DS_CODE">접대비 및 이와 유사한 비용 관련</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">AC</Col>
            <Col id="CD_CODE">ACC</Col>
            <Col id="DS_CODE">면세사업관련분</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">AC</Col>
            <Col id="CD_CODE">ACF</Col>
            <Col id="DS_CODE">토지의 자본적 지출 관련</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">ACG</Col>
            <Col id="TY_VATPROOF">AC</Col>
            <Col id="DS_CODE">사업자등록 전 매입세액</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">ACH</Col>
            <Col id="TY_VATPROOF">AC</Col>
            <Col id="DS_CODE">금거래계좌 미사용 관련 매입세액</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RJ</Col>
            <Col id="CD_CODE">RJ0</Col>
            <Col id="DS_CODE">법인카드(안분대상)</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RJ</Col>
            <Col id="CD_CODE">RJ1</Col>
            <Col id="DS_CODE">법인카드(안분제외)</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RK</Col>
            <Col id="CD_CODE">RJ4</Col>
            <Col id="DS_CODE">비사업용소형자동차분(신용카드)</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RK</Col>
            <Col id="CD_CODE">RJ5</Col>
            <Col id="DS_CODE">사업과관련없는지출(신용카드)</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RK</Col>
            <Col id="CD_CODE">RJ6</Col>
            <Col id="DS_CODE">면세사업관련분(신용카드)</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RK</Col>
            <Col id="CD_CODE">RJ7</Col>
            <Col id="DS_CODE">필요적 기재사항 누락 등</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RK</Col>
            <Col id="CD_CODE">RJ8</Col>
            <Col id="DS_CODE">접대비 및 이와 유사한 비용 관련</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RK</Col>
            <Col id="CD_CODE">RJ9</Col>
            <Col id="DS_CODE">토지의 자본적 지출 관련</Col>
          </Row>
          <Row>
            <Col id="CD_CODE"/>
            <Col id="DS_CODE">사업자등록 전 매입세액</Col>
            <Col id="TY_VATPROOF">RK</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">BA</Col>
            <Col id="CD_CODE">BAA</Col>
            <Col id="DS_CODE">안분제외</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">BA</Col>
            <Col id="TY_SALEBUY">O</Col>
            <Col id="CD_CODE">BAB</Col>
            <Col id="DS_CODE">교부면제분</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RH</Col>
            <Col id="CD_CODE">RH1</Col>
            <Col id="DS_CODE">현금영수증</Col>
            <Col id="TY_SALEBUY">Z</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RH</Col>
            <Col id="CD_CODE">RH2</Col>
            <Col id="DS_CODE">일반영수증</Col>
            <Col id="TY_SALEBUY">Z</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RH</Col>
            <Col id="CD_CODE">RH3</Col>
            <Col id="DS_CODE">기타</Col>
            <Col id="TY_SALEBUY">Z</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RH</Col>
            <Col id="CD_CODE">RH2</Col>
            <Col id="DS_CODE">일반영수증</Col>
            <Col id="TY_SALEBUY">I</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RH</Col>
            <Col id="CD_CODE">RH4</Col>
            <Col id="DS_CODE">금전등록기</Col>
            <Col id="TY_SALEBUY">I</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RH</Col>
            <Col id="CD_CODE">RH3</Col>
            <Col id="DS_CODE">기타</Col>
            <Col id="TY_SALEBUY">I</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RH</Col>
            <Col id="CD_CODE">RH2</Col>
            <Col id="DS_CODE">일반영수증</Col>
            <Col id="TY_SALEBUY">O</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RH</Col>
            <Col id="CD_CODE">RH4</Col>
            <Col id="DS_CODE">금전등록기</Col>
            <Col id="TY_SALEBUY">O</Col>
          </Row>
          <Row>
            <Col id="TY_VATPROOF">RH</Col>
            <Col id="CD_CODE">RH3</Col>
            <Col id="DS_CODE">기타</Col>
            <Col id="TY_SALEBUY">O</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="divData.form.ccfCD_VATDEPT_ACNT.form.CDTextBox" propid="value" datasetid="dsList" columnid="CD_DEPT_ACNT"/>
      <BindItem id="item1" compid="divData.form.ccfCD_VATDEPT_ACNT.form.DSTextBox" propid="value" datasetid="dsList" columnid="DS_DEPT_ACNT"/>
      <BindItem id="item2" compid="divData.form.ccfCD_ACCOUNT.form.CDTextBox" propid="value" datasetid="dsList" columnid="CD_ACCOUNT"/>
      <BindItem id="item3" compid="divData.form.ccfCD_ACCOUNT.form.DSTextBox" propid="value" datasetid="dsList" columnid="DS_ACCOUNT"/>
      <BindItem id="item4" compid="divData.form.rdoTY_SALEBUY" propid="value" datasetid="dsList" columnid="TY_SALEBUY"/>
      <BindItem id="item5" compid="divData.form.rdoCD_VATPROOF" propid="value" datasetid="dsList" columnid="CD_VATPROOF"/>
      <BindItem id="item6" compid="divData.form.ccboTY_VATPROOF" propid="value" datasetid="dsList" columnid="TY_VATPROOF"/>
      <BindItem id="item7" compid="divData.form.ccboTY_BGJE" propid="value" datasetid="dsList" columnid="TY_VATBGJE"/>
      <BindItem id="item8" compid="divData.form.ccboCD_SERVICE" propid="value" datasetid="dsList" columnid="CD_SERVICE"/>
      <BindItem id="item9" compid="divData.form.ccboTY_VATTUJA" propid="value" datasetid="dsList" columnid="TY_VATTUJA"/>
      <BindItem id="item10" compid="divData.form.ctclDT_PROOF" propid="value" datasetid="dsList" columnid="DT_PROOF"/>
      <BindItem id="item11" compid="divData.form.ctxtAM_SUPPLY" propid="value" datasetid="dsList" columnid="AM_SUPPLY"/>
      <BindItem id="item12" compid="divData.form.ctxtAM_VAT" propid="value" datasetid="dsList" columnid="AM_VAT"/>
      <BindItem id="item13" compid="divData.form.ctxtAM_SERVICE" propid="value" datasetid="dsList" columnid="AM_SERVICE"/>
      <BindItem id="item14" compid="divData.form.ctxtDS_REM" propid="value" datasetid="dsList" columnid="DS_REM"/>
      <BindItem id="item15" compid="divData.form.rdoTY_PERCORP" propid="value" datasetid="dsList" columnid="TY_PERCORP"/>
      <BindItem id="item16" compid="divData.form.ccfCD_VENDOR.form.CDTextBox" propid="value" datasetid="dsList" columnid="CD_VENDOR"/>
      <BindItem id="item17" compid="divData.form.ccfCD_VENDOR.form.DSTextBox" propid="value" datasetid="dsList" columnid="DS_VENDOR"/>
      <BindItem id="item18" compid="divData.form.ctxtNO_SJC" propid="value" datasetid="dsList" columnid="NO_SJC"/>
      <BindItem id="item19" compid="divData.form.ccfNO_CREDIT.form.CDTextBox" propid="value" datasetid="dsList" columnid="NO_CREDIT"/>
      <BindItem id="item20" compid="divData.form.cchkYN_SPECIAL" propid="value" datasetid="dsList" columnid="YN_SPECIAL"/>
      <BindItem id="item21" compid="divData.form.cchkCK_OMIT" propid="value" datasetid="dsList" columnid="CK_OMIT"/>
      <BindItem id="item22" compid="divData.form.cchkCK_DELAY" propid="value" datasetid="dsList" columnid="CK_DELAY"/>
      <BindItem id="item23" compid="divData.form.rdoTY_ISSUE" propid="value" datasetid="dsList" columnid="TY_ISSUE"/>
      <BindItem id="item24" compid="divData.form.ccboTY_VENDOR" propid="value" datasetid="dsList" columnid="TY_VENDOR"/>
      <BindItem id="item25" compid="divData.form.ctxtNO_CASHBILL" propid="value" datasetid="dsList" columnid="NO_CASHBILL"/>
    </Bind>
  </Form>
</FDL>
