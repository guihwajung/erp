<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.0">
  <Form id="form" width="1280" height="1000" titletext="평가자평가실행" onload="form_onload">
    <Layouts>
      <Layout>
        <Div id="divSearch" taborder="1" left="0" top="0" height="78.0" right="0" cssclass="div_SEARCH_Bg" text="">
          <Layouts>
            <Layout>
              <Div id="ccfCD_CORP" CDTextWidth="70" taborder="3" left="0.0" top="10.0" width="280" height="24.0" url="cmm::cmmCodeFind.xfdl" text="" CodeFindName="DAX_CFCORP" enable="false"/>
              <Static id="staYY_EVALUATION" taborder="0" text="평가년도" left="ccfCD_CORP:0.0" top="10.0" width="92.0" height="24.0" cssclass="sta_WF_SchLabelE"/>
              <Div id="ccfYY_EVALUATION" CDTextWidth="70" taborder="4" left="staYY_EVALUATION:0.0" top="10.0" width="70" height="24.0" url="cmm::cmmCalYY.xfdl" text="" CodeFindName="DAX_CFCORP" enable="false"/>
              <Static id="staTY_EVALUATION" taborder="1" text="구분" left="ccfYY_EVALUATION:0.0" top="10.0" width="92.0" height="24.0" rtl="false" cssclass="sta_WF_SchLabelE"/>
              <Static id="staCD_CORP" taborder="2" text="법인" left="staTY_EVALUATION:0.0" top="10.0" width="92.0" height="24.0" cssclass="sta_WF_SchLabelE"/>
              <Combo id="cboTY_EVALUATION" taborder="5" text="cbo00" left="staTY_EVALUATION:0.0" top="10.0" width="94" height="24.0" innerdataset="dsTY_EVALUATION" codecolumn="CD_CODE" datacolumn="DS_CODE" enable="false"/>
              <Static id="staID_SABUN" taborder="7" text="피평가자" left="cboTY_EVALUATION:0.0" top="10.0" width="92.0" height="24.0" usedecorate="false" cssclass="sta_WF_SchLabelE"/>
              <Div id="ccfID_SABUN" CodeFindName="DAX_CFBASEINFO_ALL" CDTextWidth="70" taborder="6" left="staID_SABUN:0.0" top="10.0" width="210" height="24.0" url="cmm::cmmCodeFind.xfdl" enable="false"/>
              <Static id="staCD_DEPT" taborder="8" text="부서" left="0.0" top="ccfCD_CORP:10.0" width="92.0" height="24.0" cssclass="sta_WF_SchLabelE"/>
              <Edit id="edtCD_DEPT" taborder="9" left="staCD_DEPT:0.0" top="ccfCD_CORP:10.0" width="68" value="" text="" readonly="true" height="24.0"/>
              <Edit id="edtDS_DEPT" taborder="10" left="edtCD_DEPT:0.0" top="ccfCD_CORP:10.0" readonly="true" value="" text="" tabstop="ccfCD_CORP:10.0" width="209" height="24.0"/>
              <Static id="staCD_POSITION" taborder="11" text="직위" left="edtDS_DEPT:0.0" top="ccfCD_CORP:10.0" width="92.0" height="24.0" cssclass="sta_WF_SchLabelE"/>
              <Edit id="edtCD_POSITION" taborder="12" left="staCD_POSITION:0.0" top="ccfCD_CORP:10.0" width="70" value="" text="" readonly="true" height="24.0"/>
              <Edit id="edtDS_POSITION" taborder="13" left="edtCD_POSITION:0.0" top="ccfCD_CORP:10.0" readonly="true" value="" text="" tabstop="ccfCD_CORP:10.0" height="24.0" width="153"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="divData" taborder="0" left="0" top="divSearch:10" cssclass="div_DATA_Bg" bottom="0" right="0" text="">
          <Layouts>
            <Layout>
              <Div id="divTop" taborder="3" top="0" height="30" cssclass="div_SEARCH_Bg" left="0" right="0">
                <Layouts>
                  <Layout>
                    <Calendar id="calTO_SELF" taborder="1" top="4" width="120" height="20" dateformat="yyyy-MM-dd ddd" right="10" readonly="true" color="#0000ff"/>
                    <Static id="staID_SABUN00_00_00" taborder="0" text="~" top="3" height="20" usedecorate="false" textAlign="center" right="calTO_SELF:10" width="20"/>
                    <Calendar id="calFR_SELF" taborder="2" top="4" height="20" dateformat="yyyy-MM-dd ddd" width="120" right="staID_SABUN00_00_00:10" readonly="true" color="#0000ff"/>
                    <Static id="staID_SABUN00_00" taborder="3" text="평가기간" top="4" width="80" height="20" usedecorate="false" right="calFR_SELF:0"/>
                    <Combo id="cboCD_SLEDDING" taborder="4" top="4" width="128" height="20" innerdataset="dsCD_SLEDDING" codecolumn="CD_CODE" datacolumn="DS_CODE" displaynulltext="작성중(임시저장)" right="staID_SABUN00_00:20" readonly="true" color="#0000ff"/>
                    <Static id="staID_SABUN00" taborder="5" text="평가 진행상태" top="4" width="80" height="18" usedecorate="false" right="cboCD_SLEDDING:10"/>
                    <Static id="staEVALUATION_SEQ" taborder="7" top="4" height="18" textAlign="right" right="staID_SABUN00:2" width="81"/>
                    <Static id="staStatusMsg" taborder="6" left="10" top="3" height="20" textAlign="left" right="staEVALUATION_SEQ:50" cssclass="sta_TITLE_Bg"/>
                  </Layout>
                </Layouts>
              </Div>
              <Grid id="objGrid" taborder="0" left="0" top="divTop:1" right="0" height="260"/>
              <Static id="staDS_OPINION" taborder="1" text="피평가자의 의견" left="0" top="objGrid:5" right="762" height="22" cssclass="sta_TITLE_Bg"/>
              <TextArea id="txtDS_OPINION" taborder="2" left="10" top="staDS_OPINION:3" right="10" height="159" onkeydown="divData_txtDS_OPINION_onkeydown"/>
              <Static id="staDS_ETC" taborder="4" text="종합의견" left="0" top="txtDS_OPINION:5" height="22" cssclass="sta_TITLE_Bg" width="150"/>
              <Div id="divBottom" taborder="5" left="10" top="staDS_ETC:5" height="258" right="10" text="">
                <Layouts>
                  <Layout>
                    <Static id="staBg4_00" taborder="4" left="0" width="167" height="85" cssclass="sta_WF_tablelabel" text="보완점" top="113" textAlign="center"/>
                    <TextArea id="txtDS_SUPPLEMENT_ASS" taborder="5" left="staBg4_00:-1" top="113" right="0" height="85" onkeydown="divData_txtDS_OPINION_onkeydown"/>
                    <Static id="staBg4_00_00" taborder="6" left="0" top="staBg4_00:-1" width="167" height="30" cssclass="sta_WF_tablelabel" text="평가의견" textAlign="center"/>
                    <Static id="staBg2" taborder="9" left="staBg4_00_00:-1" top="197" height="30" cssclass="sta_WF_tablebg" right="0"/>
                    <Static id="sta00" taborder="0" text="구분" left="0" top="0" width="167" height="30" cssclass="sta_WF_tablelabel" textAlign="center"/>
                    <Static id="sta00_00" taborder="1" text="평가자" left="sta00:-1" top="0" height="30" cssclass="sta_WF_tablelabel" right="0" textAlign="center"/>
                    <Static id="staBg4" taborder="2" left="0" width="167" height="85" cssclass="sta_WF_tablelabel" text="강점" top="29" textAlign="center"/>
                    <TextArea id="txtDS_OCCUPATION_ASS" taborder="3" left="staBg4:-1" right="0" height="85" onkeydown="divData_txtDS_OPINION_onkeydown" top="29"/>
                    <Radio id="rdoDS_OPINION_ASS" taborder="7" left="staBg4_00_00:10" top="203" width="561" height="18" innerdataset="dsPOINT" codecolumn="CD_CODE" datacolumn="DS_CODE" rowcount="1" onitemchanged="divData_divBottom_rdoDS_OPINION_ASS_onitemchanged"/>
                    <Static id="staBg4_00_00_00" taborder="8" left="0" top="staBg4_00_00:-1" width="167" height="30" cssclass="sta_WF_tablelabel" text="작성자" textAlign="center"/>
                    <Static id="staBg2_00" taborder="10" left="staBg4_00_00_00:-1" top="226" height="30" cssclass="sta_WF_tablebg" right="0"/>
                    <Edit id="edtID_SABUN_ASS" taborder="11" left="staBg4_00_00_00:10" top="232" width="68" value="" text="" readonly="true" height="20"/>
                    <Edit id="edtDS_HNAME_ASS" taborder="12" left="edtID_SABUN_ASS:4" top="232" readonly="true" value="" text="" tabstop="false" width="209" height="20"/>
                  </Layout>
                </Layouts>
              </Div>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Script type="xscript5.1"><![CDATA[this.objApp = this.gfnGetApplication();

this.fv_initStatusMsg = "평가자 평가기간이 아닙니다.";
this.fv_EVALUATION_SEQ = "01";

this.form_onload = function(obj:nexacro.Form,e:nexacro.LoadEventInfo)
{
	// -- 필수 -------------------//
	this.gfnFormOnLoad(this);	
	this.gfnFormInfo(this);		
	// ---------------------------// 
	
	this.fnSetButton();
	this.fnSetExtendButton();
	this.fnSetVariable();
	this.fnSetEvent();
	this.fnSetParameter();	
	
	if(!this.gfnIsNull(this.getOwnerFrame().CD_CORP) && !this.gfnIsNull(this.getOwnerFrame().ID_SABUN) ){
	
		this.divData.form.divTop.form.staEVALUATION_SEQ.set_text(this.getOwnerFrame().DS_EVALUATION_SEQ);
		this.fv_EVALUATION_SEQ = this.getOwnerFrame().EVALUATION_SEQ;

		this.ccfYY_EVALUATION.form.TextBox.set_value(this.getOwnerFrame().YY_EVALUATION); // 	평가년도
		this.cboTY_EVALUATION.set_value(this.getOwnerFrame().TY_EVALUATION);	 // 	구분
			
		this.ccfCD_CORP.form.CDTextBox.set_value(this.getOwnerFrame().CD_CORP);		// 	법인 
		this.ccfCD_CORP.form.DSTextBox.set_value(this.getOwnerFrame().DS_CORP);	
		
		this.ccfID_SABUN.form.CDTextBox.set_value(this.getOwnerFrame().ID_SABUN); // 	피평가자	사원번호
		this.ccfID_SABUN.form.fnCodeFindLoad();
		
		this.edtCD_DEPT.set_value(this.getOwnerFrame().CD_DEPT);// 	피평가자	부서코드
		this.edtDS_DEPT.set_value(this.getOwnerFrame().DS_DEPT);

		this.edtCD_POSITION.set_value(this.getOwnerFrame().CD_POSITION);// 	피평가자	직위코드
		this.edtDS_POSITION.set_value(this.getOwnerFrame().DS_POSITION);
		
		if(this.fv_EVALUATION_SEQ == "01"){
			this.dxGrid.setFormatColProperty(this.dxGrid.getBindCellIndex("body", "CD_2ND_POINT"), "size", 0);
		}

	}else{
	
		var today = this.gfnGetDate();
		this.ccfYY_EVALUATION.form.TextBox.set_value(today.substr(0,4));
		this.cboTY_EVALUATION.set_index(0);	
			
		this.ccfCD_CORP.form.CDTextBox.set_value(this.AuthClient.CD_CORP);		
		this.ccfCD_CORP.form.DSTextBox.set_value(this.AuthClient.DS_CORP);	
		
		if(this.FormInfo.GR_SEARCH == "9"){
			this.ccfID_SABUN.form.CDTextBox.set_value(this.AuthClient.ID_SABUN);
			this.ccfID_SABUN.form.fnCodeFindLoad();
		}
	}
		
// 	if(this.FormInfo.GR_SEARCH == "1"){
 		this.ccfCD_CORP.set_enable(true);
// 	}else{
// 		this.ccfCD_CORP.set_enable(false);
// 	}
// 	
// 	if(this.FormInfo.GR_SEARCH == "9"){
 		this.ccfID_SABUN.set_enable(false);
// 	}else{
// 		this.ccfID_SABUN.set_enable(true);
// 	}		

	this.ccfCD_CORP.set_enable(false);
	this.ccfID_SABUN.set_enable(false);
	
	this.dxGrid.set_autosizingtype("none");
	this.dxGrid.set_autosizingtype("row");	
	

	//화면 로드시 자동조회
	this.FormBtns.Select.click();
};

/************************************************************************
 * 버튼 설정 : 화면(Tab) 전환시 마다 호출
 * 서브버튼 사용 및 공통버튼 강제 제어시 여기서 처리
 ************************************************************************/
this.fnSetButton = function() {
}

/************************************************************************
 * 확장 버튼 : 화면별 버튼 설정 ID, function 연결 (화면버튼관리)
 ************************************************************************/
this.fnSetExtendButton = function() {
	this.btnComplete = this.gfnFormButtonAdd("Complete", "fnComplete");  //제출
};

this.fnComplete = function(){
	for(var i=0;i<this.dsList.rowcount;i++){
		var CD_1ST_POINT = this.dsList.getColumn(i, "CD_1ST_POINT");
		var CD_2ND_POINT = this.dsList.getColumn(i, "CD_2ND_POINT");
		
		if(this.fv_EVALUATION_SEQ == "01"){
			if(this.gfnIsNull(CD_1ST_POINT)){
				this.gfnAlert("1차평가를 선택하세요!");
				return;
			}
		}
		
		if(this.fv_EVALUATION_SEQ == "02"){
			if(this.gfnIsNull(CD_2ND_POINT)){
				this.gfnAlert("2차평가를 선택하세요!");
				return;
			}
		}
	}
	
	var DS_OCCUPATION_ASS  = this.gfnTrim(this.divData.form.divBottom.form.txtDS_OCCUPATION_ASS.value);
	var DS_SUPPLEMENT_ASS = this.gfnTrim(this.divData.form.divBottom.form.txtDS_SUPPLEMENT_ASS.value);
	var DS_OPINION_ASS = this.divData.form.divBottom.form.rdoDS_OPINION_ASS.value;
	
	if(this.fv_EVALUATION_SEQ == "01"){
		if(this.gfnIsNull(DS_OCCUPATION_ASS)){
			this.gfnAlert("강점을 입력하세요!");
			return;
		}	
		if(this.gfnIsNull(DS_SUPPLEMENT_ASS)){
			this.gfnAlert("보완점을 입력하세요!");
			return;
		}	
		if(this.gfnIsNull(DS_OPINION_ASS)){
			this.gfnAlert("평가의견을 입력하세요!");
			return;
		}
	}
	if(this.fv_EVALUATION_SEQ == "02"){
		if(this.gfnIsNull(DS_OPINION_ASS)){
			this.gfnAlert("평가의견을 입력하세요!");
			return;
		}	
	}


	this.fnCompleteCallback = function(id, val){
		if(val){
			this.fnSaveProc("C"); //제출(완료)
		}
	}
	this.gfnConfirm("제출 할 경우 수정이 불가 합니다.  계속 진행 하시겠습니까?", "fnCompleteCallback");	
}

/************************************************************************
 * 변수 선언
 ************************************************************************/
this.fnSetVariable = function() {
	this.dxGrid = this.divData.form.objGrid;
			

	this.ccfCD_CORP = this.divSearch.form.ccfCD_CORP;
	this.ccfYY_EVALUATION = this.divSearch.form.ccfYY_EVALUATION;
	this.cboTY_EVALUATION = this.divSearch.form.cboTY_EVALUATION;	
	this.ccfID_SABUN = this.divSearch.form.ccfID_SABUN;
		
	this.edtCD_DEPT = this.divSearch.form.edtCD_DEPT;
	this.edtDS_DEPT = this.divSearch.form.edtDS_DEPT;
	this.edtCD_POSITION = this.divSearch.form.edtCD_POSITION;
	this.edtDS_POSITION = this.divSearch.form.edtDS_POSITION;
	
	//this.txtDS_CONTENT = this.divData.form.txtDS_CONTENT; //업무실적
	this.txtDS_OPINION = this.divData.form.txtDS_OPINION; //피평가자의 의견
};

/************************************************************************
 * 이벤트 설정
 ************************************************************************/
this.fnSetEvent = function() {
	this.ccfCD_CORP.BeforeUserDataSetParam = "fnBeforeUserDataSetParam";
	this.ccfCD_CORP.AfterCDTextChanged = "fnAfterCDTextChanged";	
	
	this.ccfID_SABUN.BeforeUserDataSetParam = "fnBeforeUserDataSetParam";
	this.ccfID_SABUN.AfterCDTextChanged = "fnAfterCDTextChanged";	

	this.gfnGridInit(this.dxGrid, this.dsList, "DA", "DAJ_EVALUATION_ASSESSOR_PUT");
	
	
	this.dxGrid.BeforeUserDataSetParam = "fnGrid_BeforeUserDataSetParam";	// 그리드 코드파인드 설정
	this.dxGrid.AfterEdit = "fnGrid_AfterEdit";	// 셀 변경 후 이벤트
	
	// 셀 수정가능 여부
	this.dxGrid.EnterCell = "fnGrid_EnterCell";		
}

/************************************************************************
 * 파라미터 설정
 ************************************************************************/
this.fnSetParameter = function() {
	this.dsSelectDate = new Dataset();
	this.dsSelectDate.addColumn("CD_CORP", "string");
	this.dsSelectDate.addColumn("YY_EVALUATION", "string");
	this.dsSelectDate.addColumn("TY_EVALUATION", "string");
	this.dsSelectDate.addColumn("GR_SEARCH", "string");
	this.dsSelectDate.addColumn("TY_AUTH", "string");
	this.dsSelectDate.addColumn("GR_DEPT", "string");
	this.dsSelectDate.addColumn("ID_USER", "string");

	this.dsSelect = new Dataset();
	this.dsSelect.addColumn("CD_CORP", "string");
	this.dsSelect.addColumn("YY_EVALUATION", "string");
	this.dsSelect.addColumn("TY_EVALUATION", "string");
	this.dsSelect.addColumn("ID_SABUN", "string");
	this.dsSelect.addColumn("EVALUATION_SEQ", "string");
	this.dsSelect.addColumn("GR_SEARCH", "string");
	this.dsSelect.addColumn("TY_AUTH", "string");
	this.dsSelect.addColumn("GR_DEPT", "string");
	this.dsSelect.addColumn("ID_USER", "string");
	
	//평가등급배분
	this.dsSelectDist = new Dataset();
	this.dsSelectDist.addColumn("CD_CORP", "string");
	this.dsSelectDist.addColumn("YY_EVALUATION", "string");
	this.dsSelectDist.addColumn("TY_EVALUATION", "string");
	this.dsSelectDist.addColumn("ID_SABUN", "string");
	this.dsSelectDist.addColumn("EVALUATION_SEQ", "string");
	this.dsSelectDist.addColumn("TY_EMPLOY", "string");
	this.dsSelectDist.addColumn("TY_SITE", "string");
	this.dsSelectDist.addColumn("GR_SEARCH", "string");
	this.dsSelectDist.addColumn("TY_AUTH", "string");
	this.dsSelectDist.addColumn("GR_DEPT", "string");
	this.dsSelectDist.addColumn("ID_USER", "string");	
	
	this.dsSave = new Dataset();
	this.dsSave.addColumn("TY_SAVE", "string");
	this.dsSave.addColumn("CD_CORP", "string");
	this.dsSave.addColumn("YY_EVALUATION", "string");
	this.dsSave.addColumn("TY_EVALUATION", "string");
	this.dsSave.addColumn("ID_SABUN", "string");
	this.dsSave.addColumn("NO_SEQ", "int");
	this.dsSave.addColumn("CD_GROUP", "string");
	this.dsSave.addColumn("CD_COMMENT", "string");
	this.dsSave.addColumn("DS_CONTENT", "string");
	this.dsSave.addColumn("NO_POINT", "int");
	this.dsSave.addColumn("CD_POINT", "string");
	this.dsSave.addColumn("NO_1ST_POINT", "int");
	this.dsSave.addColumn("CD_1ST_POINT", "string");
	this.dsSave.addColumn("NO_2ND_POINT", "int");
	this.dsSave.addColumn("CD_2ND_POINT", "string");
	this.dsSave.addColumn("DS_REMARK", "string");
	this.dsSave.addColumn("EVALUATION_SEQ", "string");
	this.dsSave.addColumn("GR_SEARCH", "string");
	this.dsSave.addColumn("TY_AUTH", "string");
	this.dsSave.addColumn("GR_DEPT", "string");
	this.dsSave.addColumn("ID_USER", "string");
	
	this.dsSave1 = new Dataset();
	this.dsSave1.addColumn("TY_SAVE", "string");
	this.dsSave1.addColumn("CD_CORP", "string");
	this.dsSave1.addColumn("YY_EVALUATION", "string");
	this.dsSave1.addColumn("TY_EVALUATION", "string");
	this.dsSave1.addColumn("ID_SABUN", "string");
	this.dsSave1.addColumn("NO_POINT_ASS", "int");
	this.dsSave1.addColumn("CD_POINT_ASS", "string");
	this.dsSave1.addColumn("DS_OCCUPATION_ASS", "string");
	this.dsSave1.addColumn("DS_SUPPLEMENT_ASS", "string");
	this.dsSave1.addColumn("DS_OPINION_ASS", "string");
	this.dsSave1.addColumn("CD_SLEDDING_ASS", "string");
	this.dsSave1.addColumn("EVALUATION_SEQ", "string");
	this.dsSave1.addColumn("GR_SEARCH", "string");
	this.dsSave1.addColumn("TY_AUTH", "string");
	this.dsSave1.addColumn("GR_DEPT", "string");
	this.dsSave1.addColumn("ID_USER", "string");
	
	this.dsCheck = new Dataset();
	this.dsCheck.addColumn("CD_CORP", "string");
	this.dsCheck.addColumn("YY_EVALUATION", "string");
	this.dsCheck.addColumn("TY_EVALUATION", "string");
	this.dsCheck.addColumn("ID_SABUN", "string");
	this.dsCheck.addColumn("ID_ASSESSOR", "string");
	this.dsCheck.addColumn("EVALUATION_SEQ", "string");
	this.dsCheck.addColumn("NO_POINT", "int");
}

/************************************************************************
 * 컨트롤 이벤트
 ************************************************************************/
 /*
  *	조회 버튼
  */
this.fnSelect = function() {
	if(!this.fnSelectValid()) return;

	this.gfnGridBeforeSelect(this.dxGrid);
	this.gfnSetFormStatus(this);
	
	this.divData.form.divTop.form.staStatusMsg.set_text(this.fv_initStatusMsg);
	

	this.dsSelect.clearData();
	this.dsSelect.addRow();
	this.dsSelect.setColumn(0, "CD_CORP", this.dsSearch.getColumn(0, "CD_CORP"));
	this.dsSelect.setColumn(0, "YY_EVALUATION", this.dsSearch.getColumn(0, "YY_EVALUATION"));
	this.dsSelect.setColumn(0, "TY_EVALUATION", this.dsSearch.getColumn(0, "TY_EVALUATION"));
	this.dsSelect.setColumn(0, "ID_SABUN", this.dsSearch.getColumn(0, "ID_SABUN"));
	this.dsSelect.setColumn(0, "EVALUATION_SEQ", this.fv_EVALUATION_SEQ); 
	this.dsSelect.setColumn(0, "GR_SEARCH", this.FormInfo.GR_SEARCH);
	this.dsSelect.setColumn(0, "TY_AUTH", this.FormInfo.TY_AUTH);
	this.dsSelect.setColumn(0, "GR_DEPT", this.AuthClient.CD_DEPT);
	this.dsSelect.setColumn(0, "ID_USER", this.AuthClient.ID_USER);
	
	this.dsSelectDate.clearData();
	this.dsSelectDate.addRow();		
	this.dsSelectDate.setColumn(0, "CD_CORP", this.dsSearch.getColumn(0, "CD_CORP"));
	this.dsSelectDate.setColumn(0, "YY_EVALUATION", this.dsSearch.getColumn(0, "YY_EVALUATION"));
	this.dsSelectDate.setColumn(0, "TY_EVALUATION", this.dsSearch.getColumn(0, "TY_EVALUATION"));
	this.dsSelectDate.setColumn(0, "GR_SEARCH", this.FormInfo.GR_SEARCH);
	this.dsSelectDate.setColumn(0, "TY_AUTH", this.FormInfo.TY_AUTH);
	this.dsSelectDate.setColumn(0, "GR_DEPT", this.AuthClient.CD_DEPT);
	this.dsSelectDate.setColumn(0, "ID_USER", this.AuthClient.ID_USER);	
	
	this.dsSelectDist.clearData();
	this.dsSelectDist.addRow();
	this.dsSelectDist.setColumn(0, "CD_CORP", this.dsSearch.getColumn(0, "CD_CORP"));
	this.dsSelectDist.setColumn(0, "YY_EVALUATION", this.dsSearch.getColumn(0, "YY_EVALUATION"));
	this.dsSelectDist.setColumn(0, "TY_EVALUATION", this.dsSearch.getColumn(0, "TY_EVALUATION"));
	this.dsSelectDist.setColumn(0, "ID_SABUN", this.dsSearch.getColumn(0, "ID_SABUN"));
	this.dsSelectDist.setColumn(0, "EVALUATION_SEQ", this.fv_EVALUATION_SEQ);
	this.dsSelectDist.setColumn(0, "TY_EMPLOY", "");
	this.dsSelectDist.setColumn(0, "TY_SITE", "");
	this.dsSelectDist.setColumn(0, "GR_SEARCH", this.FormInfo.GR_SEARCH);
	this.dsSelectDist.setColumn(0, "TY_AUTH", this.FormInfo.TY_AUTH);
	this.dsSelectDist.setColumn(0, "GR_DEPT", this.AuthClient.CD_DEPT);
	this.dsSelectDist.setColumn(0, "ID_USER", this.AuthClient.ID_USER);	

	var strSvcId    = "select";
	var strSvcType  = "grid";
	var inProc		= "_dsProc";
	var inData      = "select=dsSelect selectDate=dsSelectDate";	//selectDist=dsSelectDist
	var outData     = "dsList=select0 dsList1=select1 dsDate=selectDate0";// dsListDist=selectDist0
	var strArg      = "";
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
	
}

this.fnSelectValid = function(){
	if(this.gfnIsNull(this.ccfCD_CORP.form.CDTextBox.value)){
		this.fnValidCallback = function(){
			this.ccfCD_CORP.form.CDTextBox.setFocus();
		}
		this.gfnAlert("법인을 선택하세요!", "fnValidCallback");
		return false;
	}
	if(this.gfnIsNull(this.ccfYY_EVALUATION.form.TextBox.value)){
		this.fnValidCallback = function(){
			this.ccfYY_EVALUATION.form.TextBox.setFocus();
		}
		this.gfnAlert("평가년도를 입력하세요!", "fnValidCallback");
		return false;
	}	
	if(this.gfnIsNull(this.cboTY_EVALUATION.value)){
		this.fnValidCallback = function(){
			this.cboTY_EVALUATION.setFocus();
		}
		this.gfnAlert("구분을 입력하세요!", "fnValidCallback");
		return false;
	}	
	if(this.gfnIsNull(this.ccfID_SABUN.form.CDTextBox.value)){
		this.fnValidCallback = function(){
			this.ccfID_SABUN.form.CDTextBox.setFocus();
		}
		this.gfnAlert("피평가자를 입력하세요!", "fnValidCallback");
		return false;
	}	
	
	return true;
}


this.fnAdd = function() {
	//var nrow = this.gfnGridAdd(this.dxGrid);
}

/*
 *	삭제 버튼
 */
this.fnDel = function() { 
	//this.gfnGridDel(this.dxGrid); 
	
	this.fnDelConfirmCallback = function(id, val){
		//trace("fnDelConfirmCallback>>"+id, val);
		if(val){
			for(var i=0;i<this.dsList.rowcount;i++){
				this.dsList.setColumn(i, this.ucFlag, "D");
			}
			this.divData.form.divBottom.form.txtDS_OCCUPATION_ASS.set_value("");
			this.divData.form.divBottom.form.txtDS_SUPPLEMENT_ASS.set_value("");
			this.divData.form.divBottom.form.rdoDS_OPINION_ASS.set_value("");
			
			this.fnSaveProc("D");
		}
	}
	this.gfnConfirm("삭제하시겠습니까?", "fnDelConfirmCallback");
	return;
} 

/*
 *	저장 버튼
 */
this.fnSave = function() {
	this.fnSaveProc("S");
}

this.fnSaveProc = function(callType){
	
	//저장이나 제출일때만 필수 체크
	if(callType == "S" || callType == "C"){
		// 그리드 필수항목 체크
		if (!this.gfnGridValidate(this.dxGrid)) return;	
	}

	this.dxGrid.updateToDataset();
	
	this.dsSave.clearData();
	this.dsSave1.clearData();	
	
	for (var i = 0; i < this.dsList.rowcount; i++) {
 		var flag = this.gfnGetFlag(this.dsList, i);
		if(flag == "#") continue;
			
		var nrow = this.dsSave.addRow();
		this.dsSave.setColumn(nrow, "TY_SAVE", flag == "D" ? "D" : this.dsList.getColumn(i, "CRUD_FLAG"));
		this.dsSave.setColumn(nrow, "CD_CORP", this.dsList.getColumn(i, "CD_CORP"));
		this.dsSave.setColumn(nrow, "YY_EVALUATION", this.dsList.getColumn(i, "YY_EVALUATION"));
		this.dsSave.setColumn(nrow, "TY_EVALUATION", this.dsList.getColumn(i, "TY_EVALUATION"));
		this.dsSave.setColumn(nrow, "ID_SABUN", this.dsList.getColumn(i, "ID_SABUN"));
		this.dsSave.setColumn(nrow, "NO_SEQ", this.dsList.getColumn(i, "NO_SEQ"));
		this.dsSave.setColumn(nrow, "CD_GROUP", this.gfnNvl(this.dsList.getColumn(i, "CD_GROUP"), ""));
		this.dsSave.setColumn(nrow, "CD_COMMENT", this.gfnNvl(this.dsList.getColumn(i, "CD_COMMENT"), ""));
		this.dsSave.setColumn(nrow, "DS_CONTENT", this.gfnNvl(this.dsList.getColumn(i, "DS_CONTENT"), ""));
		this.dsSave.setColumn(nrow, "NO_POINT", 0);//this.dsList.getColumn(i, "NO_POINT"));
		this.dsSave.setColumn(nrow, "CD_POINT", this.gfnNvl(this.dsList.getColumn(i, "CD_POINT"), ""));
		this.dsSave.setColumn(nrow, "NO_1ST_POINT", 0);//this.dsList.getColumn(i, "NO_1ST_POINT"));
		this.dsSave.setColumn(nrow, "CD_1ST_POINT", this.dsList.getColumn(i, "CD_1ST_POINT"));
		this.dsSave.setColumn(nrow, "NO_2ND_POINT", 0);//this.dsList.getColumn(i, "NO_2ND_POINT"));
		this.dsSave.setColumn(nrow, "CD_2ND_POINT", this.dsList.getColumn(i, "CD_2ND_POINT"));
		this.dsSave.setColumn(nrow, "DS_REMARK", "");//this.dsList.getColumn(i, "DS_REMARK"));
		this.dsSave.setColumn(nrow, "EVALUATION_SEQ", this.fv_EVALUATION_SEQ);
		this.dsSave.setColumn(nrow, "GR_SEARCH", this.FormInfo.GR_SEARCH);
		this.dsSave.setColumn(nrow, "TY_AUTH", this.FormInfo.TY_AUTH);
		this.dsSave.setColumn(nrow, "GR_DEPT", this.AuthClient.CD_DEPT);
		this.dsSave.setColumn(nrow, "ID_USER", this.AuthClient.ID_USER);
	}
	
	this.dsSave1.addRow();
	this.dsSave1.setColumn(0, "TY_SAVE", "U");
	this.dsSave1.setColumn(0, "CD_CORP", this.dsList1.getColumn(0, "CD_CORP"));
	this.dsSave1.setColumn(0, "YY_EVALUATION", this.dsList1.getColumn(0, "YY_EVALUATION"));
	this.dsSave1.setColumn(0, "TY_EVALUATION", this.dsList1.getColumn(0, "TY_EVALUATION"));
	this.dsSave1.setColumn(0, "ID_SABUN", this.dsList1.getColumn(0, "ID_SABUN"));
 	this.dsSave1.setColumn(0, "NO_POINT_ASS", this.dsList1.getColumn(0, "NO_POINT_ASS"));
 	this.dsSave1.setColumn(0, "CD_POINT_ASS", this.gfnNvl(this.dsList1.getColumn(0, "CD_POINT_ASS"), ""));
	this.dsSave1.setColumn(0, "DS_OCCUPATION_ASS", this.gfnNvl(this.dsList1.getColumn(0, "DS_OCCUPATION_ASS"), ""));
	this.dsSave1.setColumn(0, "DS_SUPPLEMENT_ASS", this.gfnNvl(this.dsList1.getColumn(0, "DS_SUPPLEMENT_ASS"), ""));
	this.dsSave1.setColumn(0, "DS_OPINION_ASS", this.gfnNvl(this.dsList1.getColumn(0, "DS_OPINION_ASS"), ""));
 	this.dsSave1.setColumn(0, "CD_SLEDDING_ASS", callType == "C" ? "02" : "01"); //(01 작성중(임시저장) ,02 제출)
	this.dsSave1.setColumn(0, "EVALUATION_SEQ", this.fv_EVALUATION_SEQ);
	this.dsSave1.setColumn(0, "GR_SEARCH", this.FormInfo.GR_SEARCH);
	this.dsSave1.setColumn(0, "TY_AUTH", this.FormInfo.TY_AUTH);
	this.dsSave1.setColumn(0, "GR_DEPT", this.AuthClient.CD_DEPT);
	this.dsSave1.setColumn(0, "ID_USER", this.AuthClient.ID_USER);
	
	if (this.dsSave.rowcount == 0 || this.dsSave1.rowcount == 0) return;
		
	var strSvcId    = "save_"+callType;
	var strSvcType  = "save";
	var inProc		= "_dsProc";
	var inData      = "save=dsSave save1=dsSave1";
	var outData     = "";
	var strArg      = "";
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// transaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
}


this.fnExcel = function() {
	this.gfnExcelExport(this.dxGrid);
}

this.fnPrint = function() {
}



/************************************************************************
 * Validate
 ************************************************************************/

/************************************************************************
 * 콜백 이벤트
 ************************************************************************/
/*
 *	콜백 처리
 */
this.fnCallback = function(svcID, errorCode, errorMsg)
{
	if (svcID == "select") {
		this.gfnGridAfterSelect(this.dxGrid);
		this.fnSelectAfter();
	} 
	else if(svcID.startsWith("save_")) {
		var arrSvcID = svcID.split("_");
		
		if (errorCode == 0) {
			var sMsg = "";
			if(arrSvcID[1] == "S"){ //저장
				sMsg = "저장이 완료되었습니다.";
			}
			else if(arrSvcID[1] == "D"){ //삭제
				sMsg = "삭제가 완료되었습니다.";
			}
			else if(arrSvcID[1] == "C"){ //제출(완료)
				sMsg = "제출이 완료되었습니다.";
			}
			
			this.gfnAlert(sMsg);
			this.FormBtns.Select.click();
			
		} else {
			this.gfnAlert(errorMsg);
		}
	} 
}

this.fnSelectAfter = function(){
	this.fnSetRealRowSize();
	
	var FR_SELF = (this.fv_EVALUATION_SEQ == "01") ? this.dsDate.getColumn(0, "FR_1ST") : this.dsDate.getColumn(0, "FR_2ND");
	var TO_SELF = (this.fv_EVALUATION_SEQ == "01") ? this.dsDate.getColumn(0, "TO_1ST") : this.dsDate.getColumn(0, "TO_2ND");
	this.divData.form.divTop.form.calFR_SELF.set_value(FR_SELF);
	this.divData.form.divTop.form.calTO_SELF.set_value(TO_SELF);				
	
	if(this.dsList.rowcount == 0){
		this.gfnAlert("전단계 평가내역이 없습니다.");
		return;
	}
	
	this.fnSetFormEnable();	
}

//업무실적 textarea 처리
//그리드에서 textarea 형식으로 입력일 잘안되어서 이렇게 처리함.
this.fnSetRealRowSize = function(){
	var nrowSizeSum = 0;
	
	// 그리드 높이 조절
	for(var i=0;i < this.dsList.rowcount;i++){
		var CD_COMMENT = this.dsList.getColumn(i, "CD_COMMENT");
		
		var rowSize = this.dxGrid.getRealRowSize(i);	
		
		if(CD_COMMENT == "ZZ"){
			if(rowSize < 200){
				rowSize = 200;
				this.dxGrid.setRealRowSize(i, rowSize);	
			}
			//this.dxGrid.setRealRowSize(i, 0); //숨기기	
		}
		nrowSizeSum += rowSize;
	}
	
	//trace("nrowSizeSum", nrowSizeSum);
	//trace("this.divData.form.objGrid.height", this.divData.form.objGrid.height);
	
	var nGridHeight = this.divData.form.objGrid.height;
	if(nrowSizeSum > nGridHeight){
		nGridHeight = nrowSizeSum + 50;
	}
	//if(nGridHeight > 1000){
	//	nGridHeight = 1000;
	//}
	
	this.divData.form.objGrid.set_height(nGridHeight);
	this.divData.form.resetScroll();
}


/************************************************************************
 * 코드파인드 이벤트
 ************************************************************************/
this.fnBeforeUserDataSetParam = function(id, dsUserParam, nrow) {
	if(id == "ccfCD_CORP"){
		;
	}
	else if (id == "ccfID_SABUN") {
		if(this.gfnIsNull(this.ccfCD_CORP.form.CDTextBox.value)){
			this.gfnAlert("법인코드를 먼저 입력하세요.");
			return false;
		}
		dsUserParam.setColumn(nrow, "CD_CORP", this.ccfCD_CORP.form.CDTextBox.value);
		dsUserParam.setColumn(nrow, "GR_SEARCH",this.FormInfo.GR_SEARCH);
		dsUserParam.setColumn(nrow, "CD_DEPT", this.AuthClient.CD_DEPT);
		dsUserParam.setColumn(nrow, "TY_RETIRE", "%");
		dsUserParam.setColumn(nrow, "YN_CORP", "N");
	}	
	return true;
};

this.fnAfterCDTextChanged = function(id, codeFindData) {	
	var arr = codeFindData;

	if(id == "ccfCD_CORP"){
	}
	if (id == "ccfID_SABUN") {
	}
}

/************************************************************************
 * 그리드 이벤트
 ************************************************************************/
this.fnGrid_BeforeUserDataSetParam = function(id, dsUserParam, nrow) {	
	return true;
}

this.fnGrid_AfterEdit = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo) {
}

this.fnGrid_EnterCell = function(obj:nexacro.Grid, row, cell) {
 	var colnm = this.gfnGridGetBindColumnNameByIndex(this.dxGrid, cell);

	var bRtn = this.fnIsChangePossible();
	
	if(bRtn == false){
		return false;
	}else{
		if(colnm == "CD_1ST_POINT"){
			if(this.fv_EVALUATION_SEQ == "02"){
				return false;
			}
		}
	}
}

/************************************************************************
 * 확장버튼 이벤트
 ************************************************************************/

/************************************************************************
 * 기타 이벤트
 ************************************************************************/
this.dsSearch_onvaluechanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo){	
	if(e.oldvalue != e.newvalue) {
		this.gfnSetFormStatus(this);	// 폼상태 초기화
		this.gfnGridClear(this.dxGrid);	
		
		if(e.columnid == "TY_EVALUATION"){
			//this.FormBtns.Select.click();
		}
	}
};

this.divData_txtDS_OPINION_onkeydown = function(obj:nexacro.TextArea,e:nexacro.KeyEventInfo){
	this.gfnSetFormStatus(this, "U");
};


this.fnIsChangePossible = function(){
	var bPossible = true;
	
	var today = this.gfnGetDate();
	
	var sStatusMsg = this.fv_initStatusMsg;
	
	if(this.dsDate.rowcount == 0){
		//trace("평가기간없음");
		bPossible = false;
		sStatusMsg = "평가기간이 아닙니다.";
	}else{
		var FR_SELF = "";
		var TO_SELF = "";
		var CD_SLEDDING = "";
				
		if(this.fv_EVALUATION_SEQ == "01"){ 
			FR_SELF = this.gfnNvl(this.dsDate.getColumn(0, "FR_1ST"), "00000000"); //1차평가 시작일
			TO_SELF = this.gfnNvl(this.dsDate.getColumn(0, "TO_1ST"), "99999999");	//1차평가 종료일
			CD_SLEDDING = this.gfnNvl(this.dsList1.getColumn(0, "CD_1ST_SLEDDING"), "01"); //1차평가자-진행상태 : (01 작성중(임시저장) ,02 제출)
			
		}else{
			FR_SELF = this.gfnNvl(this.dsDate.getColumn(0, "FR_2ND"), "00000000"); //2차평가 시작일
			TO_SELF = this.gfnNvl(this.dsDate.getColumn(0, "TO_2ND"), "99999999");	//2차평가 종료일
			CD_SLEDDING = this.gfnNvl(this.dsList1.getColumn(0, "CD_2ST_SLEDDING"), "01"); //2차평가자-진행상태 : (01 작성중(임시저장) ,02 제출)
		}
		var YN_CLOSE = this.gfnNvl(this.dsDate.getColumn(0, "YN_CLOSE"), "N");	//마감여부
		
		if(YN_CLOSE == "Y"){
			bPossible = false;
			//trace("마감");
			sStatusMsg = "평가 마감되었습니다.";
		}else{
			if(today >= FR_SELF && today <= TO_SELF){
				if(CD_SLEDDING != "01"){
					bPossible = false;
					//trace("제출상태");
					sStatusMsg = "평가제출되었습니다.";
				}else{
					sStatusMsg = "평가자평가기간입니다.";
				}
			}else{
				bPossible = false;
				//trace("기간종료");
				sStatusMsg = "평가자평가 입력 기간이 종료되었습니다.";
			}
		}
	}
	
	if(bPossible){
		trace("fnIsChangePossible>>수정가능");
	}else{
		trace("fnIsChangePossible>>수정불가");
	}
	
	this.divData.form.divTop.form.staStatusMsg.set_text(sStatusMsg);
	
	return bPossible;
}

this.fnSetFormEnable = function(){
	var bRtn = this.fnIsChangePossible();

 	this.divData.form.txtDS_OPINION.set_enable(false);
	
	this.divData.form.divBottom.form.txtDS_OCCUPATION_ASS.set_enable(bRtn);
	this.divData.form.divBottom.form.txtDS_SUPPLEMENT_ASS.set_enable(bRtn);
	this.divData.form.divBottom.form.rdoDS_OPINION_ASS.set_enable(bRtn);
	
	this.FormBtns.Del.set_enable(bRtn);	
	this.FormBtns.Save.set_enable(bRtn);	
	
	this.btnComplete.set_enable(bRtn);
}	


this.dsList1_onvaluechanged = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{

};

this.dsList1_cancolumnchange = function(obj:nexacro.NormalDataset,e:nexacro.DSColChangeEventInfo)
{

// //아래 테스트 필요함..
// //코딩 어케했는지 모르겠음
// 
// 	if(e.columnid == "DS_OPINION_ASS"){
// 		if( e.newvalue != e.oldvalue){
// 			//평가의견 변경시
// 			var DS_OPINION_ASS_ORG = obj.getColumn(e.row, "DS_OPINION_ASS_ORG");
// 			var DS_OPINION_ASS = obj.getColumn(e.row, "DS_OPINION_ASS");
// 			var targetCol = ""; //<====이구 구하는 로직 들어가야함...DS_OPINION_ASS 값 100, 90, 80, 70, 60 구간에 따라 컬럼명 하드코딩으로..
// 			var baseVal = "";
// 			var currVal = "";
// 			
// 			var nFindStr = "EVALUATION_SEQ == '"+ this.EVALUATION_SEQ + "'";
// 			   nFindStr += "CD_GUBUN == '1'";
// 			  
// 			
// 			var nFindRow = this.dsListDist.findRowExpr(nFindStr);
// 			if(nFindRow == -1){
// 				this.gfnAlert("배분표가 없습니다.");
// 				return false;
// 			}
// 			baseVal = this.dsListDist.getColumn(nFindRow, targetCol);
// 			
// 			var nFindStr2 = "EVALUATION_SEQ == '"+ this.EVALUATION_SEQ + "'";
// 			   nFindStr2 += "CD_GUBUN == '2'";	
// 			var nFindRow2 = this.dsListDist.findRowExpr(nFindStr2);
// 			if(nFindRow2 == -1){
// 				currVal = "";
// 			}else{
// 				currVal = this.dsListDist.getColumn(nFindRow2, targetCol);
// 			}
// 			
// 			if(parseInt(baseVal) <  parseInt(currVal) + 1){
// 				this.fnValidCallback = function(id,val){
// 					if(val){
// 						return true;
// 					}
// 				}
// 				this.gfnAlert("평가 배분표에 맞지 않습니다. 그래도 계속 진행하시겠습니까?", "fnValidCallback");
// 				return false;			
// 			}
// 
// 			
// 			//여기서 dsListDist 의 평가차수의 등급에 따른 수를 가져와서 체크토록한다.
// 			//현재 등급이랑, 기존(org)) 등급이 같으면 여기를 안타겠지...
// 			
// 				
// 		}
// 		
// 	}

};

this.divData_divBottom_rdoDS_OPINION_ASS_onitemchanged = function(obj:nexacro.Radio,e:nexacro.ItemChangeEventInfo)
{
		if(!this.fnSelectValid()) return;
	
	this.dsCheck.clearData();
	this.dsCheck.addRow();
	this.dsCheck.setColumn(0, "CD_CORP", this.dsSearch.getColumn(0, "CD_CORP"));
	this.dsCheck.setColumn(0, "YY_EVALUATION", this.dsSearch.getColumn(0, "YY_EVALUATION"));
	this.dsCheck.setColumn(0, "TY_EVALUATION", this.dsSearch.getColumn(0, "TY_EVALUATION"));
	this.dsCheck.setColumn(0, "ID_SABUN", this.dsSearch.getColumn(0, "ID_SABUN"));
	this.dsCheck.setColumn(0, "ID_ASSESSOR", this.dsList1.getColumn(0, "ID_SABUN_ASS"));
	this.dsCheck.setColumn(0, "EVALUATION_SEQ", this.fv_EVALUATION_SEQ);
	this.dsCheck.setColumn(0, "NO_POINT", this.dsList1.getColumn(0, "DS_OPINION_ASS"));

	var strSvcId    = "check";
	var strSvcType  = "save";
	var inProc		= "_dsProc";
	var inData      = "check=dsCheck";
	var outData     = "";
	var strArg      = "";
	var callBackFnc = "fnCallback";
	
	this.gfnTransaction( strSvcId , 	// transaction을 구분하기 위한 svc id값
						strSvcType , 	// trabsaction을 요청할 구분
						inProc,			// Procedure 정보 Dataset 이름
						inData , 		// 입력값으로 보낼 dataset id , a=b형태로 실제이름과 입력이름을 매칭
						outData , 		// 처리결과값으로 받을 dataset id, a=b형태로 실제이름과 입력이름을 매칭
						strArg, 			// 입력갑스로 보낼 arguments, strFormData="20120607"
						callBackFnc); // 통신방법 정의 [생략가능]
};
]]></Script>
    <Objects>
      <Dataset id="_dsProc">
        <ColumnInfo>
          <Column id="TARGET" type="STRING" size="256"/>
          <Column id="SP" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="TARGET">selectDate</Col>
            <Col id="SP">DAJPR_EVALUATION_DATE_SELECT</Col>
          </Row>
          <Row>
            <Col id="TARGET">select</Col>
            <Col id="SP">DAJPR_EVALUATION_ASSESSOR_PUT_SELECT</Col>
          </Row>
          <Row>
            <Col id="TARGET">save</Col>
            <Col id="SP">DAJPR_EVALUATION_ASSESSOR_PUT_SAVE</Col>
          </Row>
          <Row>
            <Col id="TARGET">save1</Col>
            <Col id="SP">DAJPR_EVALUATION_ASSESSOR_OPINION_SAVE</Col>
          </Row>

<Row>
            <Col id="TARGET">selectDist</Col>
            <Col id="SP">DAJPR_EVALUATION_ASSESSOR_DIST</Col>
</Row>

          <Row>
            <Col id="SP">DAJPR_EVALUATION_ASSESSOR_CHECK</Col>
            <Col id="TARGET">check</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsSearch" onvaluechanged="dsSearch_onvaluechanged">
        <ColumnInfo>
          <Column id="CD_CORP" type="STRING" size="256"/>
          <Column id="DS_CORP" type="STRING" size="256"/>
          <Column id="YY_EVALUATION" type="STRING" size="256"/>
          <Column id="TY_EVALUATION" type="STRING" size="256"/>
          <Column id="ID_SABUN" type="STRING" size="256"/>
          <Column id="DS_HNAME" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CORP"/>
            <Col id="DS_CORP"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsList">
        <ColumnInfo>
          <Column id="CD_CORP" type="STRING" size="256"/>
          <Column id="DS_CORP" type="STRING" size="256"/>
          <Column id="YY_EVALUATION" type="STRING" size="256"/>
          <Column id="TY_EVALUATION" type="STRING" size="256"/>
          <Column id="ID_SABUN" type="STRING" size="256"/>
          <Column id="NO_SEQ" type="BIGDECIMAL" size="256"/>
          <Column id="CD_EVALUATION" type="STRING" size="256"/>
          <Column id="DS_EVALUATION" type="STRING" size="256"/>
          <Column id="CD_GROUP" type="STRING" size="256"/>
          <Column id="DS_GROUP" type="STRING" size="256"/>
          <Column id="CD_COMMENT" type="STRING" size="256"/>
          <Column id="DS_COMMENT" type="STRING" size="256"/>
          <Column id="DS_CONTENT" type="STRING" size="256"/>
          <Column id="CD_POINT" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="dsTY_EVALUATION">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE"/>
            <Col id="DS_CODE">전체</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">01</Col>
            <Col id="DS_CODE">상반기</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">02</Col>
            <Col id="DS_CODE">하반기</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsList1" onvaluechanged="dsList1_onvaluechanged" cancolumnchange="dsList1_cancolumnchange">
        <ColumnInfo>
          <Column id="CD_CORP" type="STRING" size="256"/>
          <Column id="YY_EVALUATION" type="STRING" size="256"/>
          <Column id="TY_EVALUATION" type="STRING" size="256"/>
          <Column id="ID_SABUN" type="STRING" size="256"/>
          <Column id="NO_POINT" type="INT" size="256"/>
          <Column id="CD_POINT" type="STRING" size="256"/>
          <Column id="DS_OPINION" type="STRING" size="256"/>
          <Column id="CD_SLEDDING" type="STRING" size="256"/>
          <Column id="ID_1ST_SABUN" type="STRING" size="256"/>
          <Column id="DS_1ST_HNAME" type="STRING" size="256"/>
          <Column id="NO_1ST_POINT" type="INT" size="256"/>
          <Column id="CD_1ST_POINT" type="STRING" size="256"/>
          <Column id="DS_1ST_OCCUPATION" type="STRING" size="256"/>
          <Column id="DS_1ST_SUPPLEMENT" type="STRING" size="256"/>
          <Column id="DS_1ST_OPINION" type="STRING" size="256"/>
          <Column id="CD_1ST_SLEDDING" type="STRING" size="256"/>
          <Column id="ID_2ND_SABUN" type="STRING" size="256"/>
          <Column id="DS_2ND_HNAME" type="STRING" size="256"/>
          <Column id="NO_2ND_POINT" type="INT" size="256"/>
          <Column id="CD_2ND_POINT" type="STRING" size="256"/>
          <Column id="DS_2ND_OCCUPATION" type="STRING" size="256"/>
          <Column id="DS_2ND_SUPPLEMENT" type="STRING" size="256"/>
          <Column id="DS_2ND_OPINION" type="STRING" size="256"/>
          <Column id="CD_2ST_SLEDDING" type="STRING" size="256"/>
          <Column id="ID_SABUN_ASS" type="STRING" size="256"/>
          <Column id="DS_HNAME_ASS" type="STRING" size="256"/>
          <Column id="NO_POINT_ASS" type="INT" size="256"/>
          <Column id="CD_POINT_ASS" type="STRING" size="256"/>
          <Column id="DS_OCCUPATION_ASS" type="STRING" size="256"/>
          <Column id="DS_SUPPLEMENT_ASS" type="STRING" size="256"/>
          <Column id="DS_OPINION_ASS" type="STRING" size="256"/>
          <Column id="CD_SLEDDING_ASS" type="STRING" size="256"/>
          <Column id="DS_OPINION_ASS_ORG" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="dsCD_SLEDDING">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">01</Col>
            <Col id="DS_CODE">작성중(임시저장)</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">02</Col>
            <Col id="DS_CODE">제출</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsDate">
        <ColumnInfo>
          <Column id="CD_CORP" type="STRING" size="256"/>
          <Column id="YY_EVALUATION" type="STRING" size="256"/>
          <Column id="TY_EVALUATION" type="STRING" size="256"/>
          <Column id="FR_SELF" type="STRING" size="256"/>
          <Column id="TO_SELF" type="STRING" size="256"/>
          <Column id="FR_1ST" type="STRING" size="256"/>
          <Column id="TO_1ST" type="STRING" size="256"/>
          <Column id="FR_2ND" type="STRING" size="256"/>
          <Column id="TO_2ND" type="STRING" size="256"/>
          <Column id="FR_UPEVALUATION" type="STRING" size="256"/>
          <Column id="TO_UPEVALUATION" type="STRING" size="256"/>
          <Column id="FR_OTHER" type="STRING" size="256"/>
          <Column id="TO_OTHER" type="STRING" size="256"/>
          <Column id="YN_CLOSE" type="STRING" size="256"/>
          <Column id="DT_CLOSE" type="STRING" size="256"/>
          <Column id="DS_REMARK" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="dsPOINT">
        <ColumnInfo>
          <Column id="CD_CODE" type="STRING" size="256"/>
          <Column id="DS_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD_CODE">100</Col>
            <Col id="DS_CODE">100</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">90</Col>
            <Col id="DS_CODE">90</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">80</Col>
            <Col id="DS_CODE">80</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">70</Col>
            <Col id="DS_CODE">70</Col>
          </Row>
          <Row>
            <Col id="CD_CODE">60</Col>
            <Col id="DS_CODE">60</Col>
          </Row>
          <Row>
            <Col id="DS_CODE">입력취소</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="dsListDist"/>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="divSearch.form.ccfCD_CORP.form.CDTextBox" propid="value" datasetid="dsSearch" columnid="CD_CORP"/>
      <BindItem id="item1" compid="divSearch.form.ccfCD_CORP.form.DSTextBox" propid="value" datasetid="dsSearch" columnid="DS_CORP"/>
      <BindItem id="item2" compid="divSearch.form.ccfYY_EVALUATION.form.TextBox" propid="value" datasetid="dsSearch" columnid="YY_EVALUATION"/>
      <BindItem id="item3" compid="divSearch.form.cboTY_EVALUATION" propid="value" datasetid="dsSearch" columnid="TY_EVALUATION"/>
      <BindItem id="item4" compid="divSearch.form.ccfID_SABUN.form.CDTextBox" propid="value" datasetid="dsSearch" columnid="ID_SABUN"/>
      <BindItem id="item5" compid="divSearch.form.ccfID_SABUN.form.DSTextBox" propid="value" datasetid="dsSearch" columnid="DS_HNAME"/>
      <BindItem id="item7" compid="divData.form.txtDS_OPINION" propid="value" datasetid="dsList1" columnid="DS_OPINION"/>
      <BindItem id="item9" compid="divData.form.divTop.form.cboCD_SLEDDING" propid="value" datasetid="dsList1" columnid="CD_SLEDDING_ASS"/>
      <BindItem id="item10" compid="divData.form.divBottom.form.txtDS_OCCUPATION_ASS" propid="value" datasetid="dsList1" columnid="DS_OCCUPATION_ASS"/>
      <BindItem id="item11" compid="divData.form.divBottom.form.txtDS_SUPPLEMENT_ASS" propid="value" datasetid="dsList1" columnid="DS_SUPPLEMENT_ASS"/>
      <BindItem id="item12" compid="divData.form.divBottom.form.rdoDS_OPINION_ASS" propid="value" datasetid="dsList1" columnid="DS_OPINION_ASS"/>
      <BindItem id="item13" compid="divData.form.divBottom.form.edtID_SABUN_ASS" propid="value" datasetid="dsList1" columnid="ID_SABUN_ASS"/>
      <BindItem id="item14" compid="divData.form.divBottom.form.edtDS_HNAME_ASS" propid="value" datasetid="dsList1" columnid="DS_HNAME_ASS"/>
    </Bind>
  </Form>
</FDL>
